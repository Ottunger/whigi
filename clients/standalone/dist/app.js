webpackJsonp([0],{0:function(t,e,n){"use strict";var r=n(1),o=n(24);r.platformBrowserDynamic().bootstrapModule(o.AppModule)},24:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(25),i=n(22),s=n(3),c=n(26),l=n(66),u=n(93),p=n(402),d=n(405),f=n(406),h=n(422),g=n(423),m=n(404),y=n(408),v=n(409),b=n(410),_=n(411),w=n(412),k=n(413),C=n(414),A=n(415),S=n(424),E=n(416),O=n(417),R=n(418),P=n(425),V=n(419),N=n(420),D=n(426),M=n(421),x=function(){function AppModule(){}return AppModule=r([s.NgModule({imports:[i.BrowserModule,c.FormsModule,a.HttpModule,l.TranslateModule.forRoot(),u.SimpleNotificationsModule,p.routing],declarations:[g.Application,m.Logging,y.Profile,v.Dataview,b.Vaultview,_.Reset,w.Savekey,k.Filesystem,C.Oauth,A.Resethelp,S.Userinfo,E.Account,O.Remote,R.Generics,P.Clearview,V.Logginglight,N.User,D.Merge,M.Notfound],providers:[p.appRoutingProviders,d.Backend,f.Data,h.Profileguard,h.Fullguard],bootstrap:[g.Application]}),o("design:paramtypes",[])],AppModule)}();e.AppModule=x},26:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}__export(n(27))},27:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}var r=n(28);e.FORM_DIRECTIVES=r.FORM_DIRECTIVES,e.REACTIVE_FORM_DIRECTIVES=r.REACTIVE_FORM_DIRECTIVES;var o=n(39);e.AbstractControlDirective=o.AbstractControlDirective;var a=n(54);e.AbstractFormGroupDirective=a.AbstractFormGroupDirective;var i=n(29);e.CheckboxControlValueAccessor=i.CheckboxControlValueAccessor;var s=n(52);e.ControlContainer=s.ControlContainer;var c=n(30);e.NG_VALUE_ACCESSOR=c.NG_VALUE_ACCESSOR;var l=n(31);e.DefaultValueAccessor=l.DefaultValueAccessor;var u=n(34);e.NgControl=u.NgControl;var p=n(33);e.NgControlStatus=p.NgControlStatus;var d=n(40);e.NgForm=d.NgForm;var f=n(53);e.NgModel=f.NgModel;var h=n(55);e.NgModelGroup=h.NgModelGroup;var g=n(58);e.FormControlDirective=g.FormControlDirective;var m=n(59);e.FormControlName=m.FormControlName;var y=n(61);e.FormGroupDirective=y.FormGroupDirective;var v=n(62);e.FormArrayName=v.FormArrayName;var b=n(62);e.FormGroupName=b.FormGroupName;var _=n(50);e.NgSelectOption=_.NgSelectOption,e.SelectControlValueAccessor=_.SelectControlValueAccessor;var w=n(51);e.SelectMultipleControlValueAccessor=w.SelectMultipleControlValueAccessor;var k=n(63);e.MaxLengthValidator=k.MaxLengthValidator,e.MinLengthValidator=k.MinLengthValidator,e.PatternValidator=k.PatternValidator,e.RequiredValidator=k.RequiredValidator;var C=n(64);e.FormBuilder=C.FormBuilder;var A=n(42);e.AbstractControl=A.AbstractControl,e.FormArray=A.FormArray,e.FormControl=A.FormControl,e.FormGroup=A.FormGroup;var S=n(45);e.NG_ASYNC_VALIDATORS=S.NG_ASYNC_VALIDATORS,e.NG_VALIDATORS=S.NG_VALIDATORS,e.Validators=S.Validators,__export(n(65))},28:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=n(3),o=n(29),a=n(31),i=n(33),s=n(40),c=n(53),l=n(55),u=n(48),p=n(49),d=n(58),f=n(59),h=n(61),g=n(62),m=n(50),y=n(51),v=n(63),b=n(29);e.CheckboxControlValueAccessor=b.CheckboxControlValueAccessor;var _=n(31);e.DefaultValueAccessor=_.DefaultValueAccessor;var w=n(34);e.NgControl=w.NgControl;var k=n(33);e.NgControlStatus=k.NgControlStatus;var C=n(40);e.NgForm=C.NgForm;var A=n(53);e.NgModel=A.NgModel;var S=n(55);e.NgModelGroup=S.NgModelGroup;var E=n(48);e.NumberValueAccessor=E.NumberValueAccessor;var O=n(49);e.RadioControlValueAccessor=O.RadioControlValueAccessor;var R=n(58);e.FormControlDirective=R.FormControlDirective;var P=n(59);e.FormControlName=P.FormControlName;var V=n(61);e.FormGroupDirective=V.FormGroupDirective;var N=n(62);e.FormArrayName=N.FormArrayName,e.FormGroupName=N.FormGroupName;var D=n(50);e.NgSelectOption=D.NgSelectOption,e.SelectControlValueAccessor=D.SelectControlValueAccessor;var M=n(51);e.NgSelectMultipleOption=M.NgSelectMultipleOption,e.SelectMultipleControlValueAccessor=M.SelectMultipleControlValueAccessor;var x=n(63);e.MaxLengthValidator=x.MaxLengthValidator,e.MinLengthValidator=x.MinLengthValidator,e.PatternValidator=x.PatternValidator,e.RequiredValidator=x.RequiredValidator,e.SHARED_FORM_DIRECTIVES=[m.NgSelectOption,y.NgSelectMultipleOption,a.DefaultValueAccessor,u.NumberValueAccessor,o.CheckboxControlValueAccessor,m.SelectControlValueAccessor,y.SelectMultipleControlValueAccessor,p.RadioControlValueAccessor,i.NgControlStatus,v.RequiredValidator,v.MinLengthValidator,v.MaxLengthValidator,v.PatternValidator],e.TEMPLATE_DRIVEN_DIRECTIVES=[c.NgModel,l.NgModelGroup,s.NgForm],e.REACTIVE_DRIVEN_DIRECTIVES=[d.FormControlDirective,h.FormGroupDirective,f.FormControlName,g.FormGroupName,g.FormArrayName],e.FORM_DIRECTIVES=[e.TEMPLATE_DRIVEN_DIRECTIVES,e.SHARED_FORM_DIRECTIVES],e.REACTIVE_FORM_DIRECTIVES=[e.REACTIVE_DRIVEN_DIRECTIVES,e.SHARED_FORM_DIRECTIVES];var I=function(){function InternalFormsSharedModule(){}return InternalFormsSharedModule.decorators=[{type:r.NgModule,args:[{declarations:e.SHARED_FORM_DIRECTIVES,exports:e.SHARED_FORM_DIRECTIVES}]}],InternalFormsSharedModule}();e.InternalFormsSharedModule=I},29:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=n(3),o=n(30);e.CHECKBOX_VALUE_ACCESSOR={provide:o.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return a}),multi:!0};var a=function(){function CheckboxControlValueAccessor(t,e){this._renderer=t,this._elementRef=e,this.onChange=function(t){},this.onTouched=function(){}}return CheckboxControlValueAccessor.prototype.writeValue=function(t){this._renderer.setElementProperty(this._elementRef.nativeElement,"checked",t)},CheckboxControlValueAccessor.prototype.registerOnChange=function(t){this.onChange=t},CheckboxControlValueAccessor.prototype.registerOnTouched=function(t){this.onTouched=t},CheckboxControlValueAccessor.decorators=[{type:r.Directive,args:[{selector:"input[type=checkbox][formControlName],input[type=checkbox][formControl],input[type=checkbox][ngModel]",host:{"(change)":"onChange($event.target.checked)","(blur)":"onTouched()"},providers:[e.CHECKBOX_VALUE_ACCESSOR]}]}],CheckboxControlValueAccessor.ctorParameters=[{type:r.Renderer},{type:r.ElementRef}],CheckboxControlValueAccessor}();e.CheckboxControlValueAccessor=a},30:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=n(3);e.NG_VALUE_ACCESSOR=new r.OpaqueToken("NgValueAccessor")},31:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=n(3),o=n(32),a=n(30);e.DEFAULT_VALUE_ACCESSOR={provide:a.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return i}),multi:!0};var i=function(){function DefaultValueAccessor(t,e){this._renderer=t,this._elementRef=e,this.onChange=function(t){},this.onTouched=function(){}}return DefaultValueAccessor.prototype.writeValue=function(t){var e=o.isBlank(t)?"":t;this._renderer.setElementProperty(this._elementRef.nativeElement,"value",e)},DefaultValueAccessor.prototype.registerOnChange=function(t){this.onChange=t},DefaultValueAccessor.prototype.registerOnTouched=function(t){this.onTouched=t},DefaultValueAccessor.decorators=[{type:r.Directive,args:[{selector:"input:not([type=checkbox])[formControlName],textarea[formControlName],input:not([type=checkbox])[formControl],textarea[formControl],input:not([type=checkbox])[ngModel],textarea[ngModel],[ngDefaultControl]",host:{"(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[e.DEFAULT_VALUE_ACCESSOR]}]}],DefaultValueAccessor.ctorParameters=[{type:r.Renderer},{type:r.ElementRef}],DefaultValueAccessor}();e.DefaultValueAccessor=i},32:function(t,e){(function(t){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";function scheduleMicroTask(t){Zone.current.scheduleMicroTask("scheduleMicrotask",t)}function getTypeNameForDebugging(t){return t.name?t.name:typeof t}function isPresent(t){return void 0!==t&&null!==t}function isBlank(t){return void 0===t||null===t}function isBoolean(t){return"boolean"==typeof t}function isNumber(t){return"number"==typeof t}function isString(t){return"string"==typeof t}function isFunction(t){return"function"==typeof t}function isType(t){return isFunction(t)}function isStringMap(t){return"object"==typeof t&&null!==t}function isStrictStringMap(t){return isStringMap(t)&&Object.getPrototypeOf(t)===a}function isPromise(t){return isPresent(t)&&isFunction(t.then)}function isArray(t){return Array.isArray(t)}function isDate(t){return t instanceof e.Date&&!isNaN(t.valueOf())}function noop(){}function stringify(t){if("string"==typeof t)return t;if(void 0===t||null===t)return""+t;if(t.overriddenName)return t.overriddenName;if(t.name)return t.name;var e=t.toString(),n=e.indexOf("\n");return n===-1?e:e.substring(0,n)}function serializeEnum(t){return t}function deserializeEnum(t,e){return t}function resolveEnumToken(t,e){return t[e]}function looseIdentical(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}function getMapKey(t){return t}function normalizeBlank(t){return isBlank(t)?null:t}function normalizeBool(t){return!isBlank(t)&&t}function isJsObject(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function print(t){console.log(t)}function warn(t){console.warn(t)}function setValueOnPath(t,e,n){for(var r=e.split("."),o=t;r.length>1;){var a=r.shift();o=o.hasOwnProperty(a)&&isPresent(o[a])?o[a]:o[a]={}}void 0!==o&&null!==o||(o={}),o[r.shift()]=n}function getSymbolIterator(){if(isBlank(f))if(isPresent(n.Symbol)&&isPresent(Symbol.iterator))f=Symbol.iterator;else for(var t=Object.getOwnPropertyNames(Map.prototype),e=0;e<t.length;++e){var r=t[e];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(f=r)}return f}function evalExpression(t,e,n,r){var o=n+"\nreturn "+e+"\n//# sourceURL="+t,a=[],i=[];for(var s in r)a.push(s),i.push(r[s]);return(new(Function.bind.apply(Function,[void 0].concat(a.concat(o))))).apply(void 0,i)}function isPrimitive(t){return!isJsObject(t)}function hasConstructor(t,e){return t.constructor===e}function escape(t){return o.encodeURI(t)}function escapeRegExp(t){return t.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}var n,r=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)};n="undefined"==typeof window?"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:t:window,e.scheduleMicroTask=scheduleMicroTask;var o=n;e.global=o,e.Type=Function,e.getTypeNameForDebugging=getTypeNameForDebugging,e.Math=o.Math,e.Date=o.Date,o.assert=function(t){},e.isPresent=isPresent,e.isBlank=isBlank,e.isBoolean=isBoolean,e.isNumber=isNumber,e.isString=isString,e.isFunction=isFunction,e.isType=isType,e.isStringMap=isStringMap;var a=Object.getPrototypeOf({});e.isStrictStringMap=isStrictStringMap,e.isPromise=isPromise,e.isArray=isArray,e.isDate=isDate,e.noop=noop,e.stringify=stringify,e.serializeEnum=serializeEnum,e.deserializeEnum=deserializeEnum,e.resolveEnumToken=resolveEnumToken;var i=function(){function StringWrapper(){}return StringWrapper.fromCharCode=function(t){return String.fromCharCode(t)},StringWrapper.charCodeAt=function(t,e){return t.charCodeAt(e)},StringWrapper.split=function(t,e){return t.split(e)},StringWrapper.equals=function(t,e){return t===e},StringWrapper.stripLeft=function(t,e){if(t&&t.length){for(var n=0,r=0;r<t.length&&t[r]==e;r++)n++;t=t.substring(n)}return t},StringWrapper.stripRight=function(t,e){if(t&&t.length){for(var n=t.length,r=t.length-1;r>=0&&t[r]==e;r--)n--;t=t.substring(0,n)}return t},StringWrapper.replace=function(t,e,n){return t.replace(e,n)},StringWrapper.replaceAll=function(t,e,n){return t.replace(e,n)},StringWrapper.slice=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=null),t.slice(e,null===n?void 0:n)},StringWrapper.replaceAllMapped=function(t,e,n){return t.replace(e,function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];return t.splice(-2,2),n(t)})},StringWrapper.contains=function(t,e){return t.indexOf(e)!=-1},StringWrapper.compare=function(t,e){return t<e?-1:t>e?1:0},StringWrapper}();e.StringWrapper=i;var s=function(){function StringJoiner(t){void 0===t&&(t=[]),this.parts=t}return StringJoiner.prototype.add=function(t){this.parts.push(t)},StringJoiner.prototype.toString=function(){return this.parts.join("")},StringJoiner}();e.StringJoiner=s;var c=function(t){function NumberParseError(e){t.call(this),this.message=e}return r(NumberParseError,t),NumberParseError.prototype.toString=function(){return this.message},NumberParseError}(Error);e.NumberParseError=c;var l=function(){function NumberWrapper(){}return NumberWrapper.toFixed=function(t,e){return t.toFixed(e)},NumberWrapper.equal=function(t,e){return t===e},NumberWrapper.parseIntAutoRadix=function(t){var e=parseInt(t);if(isNaN(e))throw new c("Invalid integer literal when parsing "+t);return e},NumberWrapper.parseInt=function(t,e){if(10==e){if(/^(\-|\+)?[0-9]+$/.test(t))return parseInt(t,e)}else if(16==e){if(/^(\-|\+)?[0-9ABCDEFabcdef]+$/.test(t))return parseInt(t,e)}else{var n=parseInt(t,e);if(!isNaN(n))return n}throw new c("Invalid integer literal when parsing "+t+" in base "+e)},NumberWrapper.parseFloat=function(t){return parseFloat(t)},Object.defineProperty(NumberWrapper,"NaN",{get:function(){return NaN},enumerable:!0,configurable:!0}),NumberWrapper.isNumeric=function(t){return!isNaN(t-parseFloat(t))},NumberWrapper.isNaN=function(t){return isNaN(t)},NumberWrapper.isInteger=function(t){return Number.isInteger(t)},NumberWrapper}();e.NumberWrapper=l,e.RegExp=o.RegExp;var u=function(){function FunctionWrapper(){}return FunctionWrapper.apply=function(t,e){return t.apply(null,e)},FunctionWrapper.bind=function(t,e){return t.bind(e)},FunctionWrapper}();e.FunctionWrapper=u,e.looseIdentical=looseIdentical,e.getMapKey=getMapKey,e.normalizeBlank=normalizeBlank,e.normalizeBool=normalizeBool,e.isJsObject=isJsObject,e.print=print,e.warn=warn;var p=function(){function Json(){}return Json.parse=function(t){return o.JSON.parse(t)},Json.stringify=function(t){return o.JSON.stringify(t,null,2)},Json}();e.Json=p;var d=function(){function DateWrapper(){}return DateWrapper.create=function(t,n,r,o,a,i,s){return void 0===n&&(n=1),void 0===r&&(r=1),void 0===o&&(o=0),void 0===a&&(a=0),void 0===i&&(i=0),void 0===s&&(s=0),new e.Date(t,n-1,r,o,a,i,s)},DateWrapper.fromISOString=function(t){return new e.Date(t)},DateWrapper.fromMillis=function(t){return new e.Date(t)},DateWrapper.toMillis=function(t){return t.getTime()},DateWrapper.now=function(){return new e.Date},DateWrapper.toJson=function(t){return t.toJSON()},DateWrapper}();e.DateWrapper=d,e.setValueOnPath=setValueOnPath;var f=null;e.getSymbolIterator=getSymbolIterator,e.evalExpression=evalExpression,e.isPrimitive=isPrimitive,e.hasConstructor=hasConstructor,e.escape=escape,e.escapeRegExp=escapeRegExp}).call(e,function(){return this}())},33:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=n(3),o=n(32),a=n(34),i=function(){function NgControlStatus(t){this._cd=t}return Object.defineProperty(NgControlStatus.prototype,"ngClassUntouched",{get:function(){return!!o.isPresent(this._cd.control)&&this._cd.control.untouched},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlStatus.prototype,"ngClassTouched",{get:function(){return!!o.isPresent(this._cd.control)&&this._cd.control.touched},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlStatus.prototype,"ngClassPristine",{get:function(){return!!o.isPresent(this._cd.control)&&this._cd.control.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlStatus.prototype,"ngClassDirty",{get:function(){return!!o.isPresent(this._cd.control)&&this._cd.control.dirty},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlStatus.prototype,"ngClassValid",{get:function(){return!!o.isPresent(this._cd.control)&&this._cd.control.valid},enumerable:!0,configurable:!0}),Object.defineProperty(NgControlStatus.prototype,"ngClassInvalid",{get:function(){return!!o.isPresent(this._cd.control)&&!this._cd.control.valid},enumerable:!0,configurable:!0}),NgControlStatus.decorators=[{type:r.Directive,args:[{selector:"[formControlName],[ngModel],[formControl]",host:{"[class.ng-untouched]":"ngClassUntouched","[class.ng-touched]":"ngClassTouched","[class.ng-pristine]":"ngClassPristine","[class.ng-dirty]":"ngClassDirty","[class.ng-valid]":"ngClassValid","[class.ng-invalid]":"ngClassInvalid"}}]}],NgControlStatus.ctorParameters=[{type:a.NgControl,decorators:[{type:r.Self}]}],NgControlStatus}();e.NgControlStatus=i},34:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},o=n(35),a=n(39),i=function(t){function NgControl(){t.apply(this,arguments),this.name=null,this.valueAccessor=null}return r(NgControl,t),Object.defineProperty(NgControl.prototype,"validator",{get:function(){return o.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(NgControl.prototype,"asyncValidator",{get:function(){return o.unimplemented()},enumerable:!0,configurable:!0}),NgControl}(a.AbstractControlDirective);e.NgControl=i},35:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";function makeTypeError(t){return new TypeError(t)}function unimplemented(){throw new s("unimplemented")}var r=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},o=n(36),a=n(37),i=n(37);e.ExceptionHandler=i.ExceptionHandler;var s=function(t){function BaseException(e){void 0===e&&(e="--"),t.call(this,e),this.message=e,this.stack=new Error(e).stack}return r(BaseException,t),BaseException.prototype.toString=function(){return this.message},BaseException}(Error);e.BaseException=s;var c=function(t){function WrappedException(e,n,r,o){t.call(this,e),this._wrapperMessage=e,this._originalException=n,this._originalStack=r,this._context=o,this._wrapperStack=new Error(e).stack}return r(WrappedException,t),Object.defineProperty(WrappedException.prototype,"wrapperMessage",{get:function(){return this._wrapperMessage},enumerable:!0,configurable:!0}),Object.defineProperty(WrappedException.prototype,"wrapperStack",{get:function(){return this._wrapperStack},enumerable:!0,configurable:!0}),Object.defineProperty(WrappedException.prototype,"originalException",{get:function(){return this._originalException},enumerable:!0,configurable:!0}),Object.defineProperty(WrappedException.prototype,"originalStack",{get:function(){return this._originalStack},enumerable:!0,configurable:!0}),Object.defineProperty(WrappedException.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(WrappedException.prototype,"message",{get:function(){return a.ExceptionHandler.exceptionToString(this)},enumerable:!0,configurable:!0}),WrappedException.prototype.toString=function(){return this.message},WrappedException}(o.BaseWrappedException);e.WrappedException=c,e.makeTypeError=makeTypeError,e.unimplemented=unimplemented},36:function(t,e){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var n=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},r=function(t){function BaseWrappedException(e){t.call(this,e)}return n(BaseWrappedException,t),Object.defineProperty(BaseWrappedException.prototype,"wrapperMessage",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(BaseWrappedException.prototype,"wrapperStack",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(BaseWrappedException.prototype,"originalException",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(BaseWrappedException.prototype,"originalStack",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(BaseWrappedException.prototype,"context",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(BaseWrappedException.prototype,"message",{get:function(){return""},enumerable:!0,configurable:!0}),BaseWrappedException}(Error);e.BaseWrappedException=r},37:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=n(36),o=n(38),a=n(32),i=function(){function _ArrayLogger(){this.res=[]}return _ArrayLogger.prototype.log=function(t){this.res.push(t)},_ArrayLogger.prototype.logError=function(t){this.res.push(t)},_ArrayLogger.prototype.logGroup=function(t){this.res.push(t)},_ArrayLogger.prototype.logGroupEnd=function(){},_ArrayLogger}(),s=function(){function ExceptionHandler(t,e){void 0===e&&(e=!0),this._logger=t,this._rethrowException=e}return ExceptionHandler.exceptionToString=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var r=new i,o=new ExceptionHandler(r,(!1));return o.call(t,e,n),r.res.join("\n")},ExceptionHandler.prototype.call=function(t,e,n){void 0===e&&(e=null),void 0===n&&(n=null);var r=this._findOriginalException(t),o=this._findOriginalStack(t),i=this._findContext(t);if(this._logger.logGroup("EXCEPTION: "+this._extractMessage(t)),a.isPresent(e)&&a.isBlank(o)&&(this._logger.logError("STACKTRACE:"),this._logger.logError(this._longStackTrace(e))),a.isPresent(n)&&this._logger.logError("REASON: "+n),a.isPresent(r)&&this._logger.logError("ORIGINAL EXCEPTION: "+this._extractMessage(r)),a.isPresent(o)&&(this._logger.logError("ORIGINAL STACKTRACE:"),this._logger.logError(this._longStackTrace(o))),a.isPresent(i)&&(this._logger.logError("ERROR CONTEXT:"),this._logger.logError(i)),this._logger.logGroupEnd(),this._rethrowException)throw t},ExceptionHandler.prototype._extractMessage=function(t){return t instanceof r.BaseWrappedException?t.wrapperMessage:t.toString()},ExceptionHandler.prototype._longStackTrace=function(t){return o.isListLikeIterable(t)?t.join("\n\n-----async gap-----\n"):t.toString()},ExceptionHandler.prototype._findContext=function(t){try{return t instanceof r.BaseWrappedException?a.isPresent(t.context)?t.context:this._findContext(t.originalException):null}catch(e){return null}},ExceptionHandler.prototype._findOriginalException=function(t){if(!(t instanceof r.BaseWrappedException))return null;for(var e=t.originalException;e instanceof r.BaseWrappedException&&a.isPresent(e.originalException);)e=e.originalException;return e},ExceptionHandler.prototype._findOriginalStack=function(t){if(!(t instanceof r.BaseWrappedException))return null;for(var e=t,n=t.originalStack;e instanceof r.BaseWrappedException&&a.isPresent(e.originalException);)e=e.originalException,e instanceof r.BaseWrappedException&&a.isPresent(e.originalException)&&(n=e.originalStack);return n},ExceptionHandler}();e.ExceptionHandler=s},38:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";function _flattenArray(t,e){if(r.isPresent(t))for(var n=0;n<t.length;n++){var o=t[n];r.isArray(o)?_flattenArray(o,e):e.push(o)}return e}function isListLikeIterable(t){return!!r.isJsObject(t)&&(r.isArray(t)||!(t instanceof e.Map)&&r.getSymbolIterator()in t)}function areIterablesEqual(t,e,n){for(var o=t[r.getSymbolIterator()](),a=e[r.getSymbolIterator()]();;){var i=o.next(),s=a.next();if(i.done&&s.done)return!0;if(i.done||s.done)return!1;if(!n(i.value,s.value))return!1}}function iterateListLike(t,e){if(r.isArray(t))for(var n=0;n<t.length;n++)e(t[n]);else for(var o,a=t[r.getSymbolIterator()]();!(o=a.next()).done;)e(o.value)}var r=n(32);e.Map=r.global.Map,e.Set=r.global.Set;var o=function(){try{if(1===new e.Map([[1,2]]).size)return function(t){return new e.Map(t)}}catch(t){}return function(t){for(var n=new e.Map,r=0;r<t.length;r++){var o=t[r];n.set(o[0],o[1])}return n}}(),a=function(){try{if(new e.Map(new e.Map))return function(t){return new e.Map(t)}}catch(t){}return function(t){var n=new e.Map;return t.forEach(function(t,e){n.set(e,t)}),n}}(),i=function(){return(new e.Map).keys().next?function(t){for(var e,n=t.keys();!(e=n.next()).done;)t.set(e.value,null)}:function(t){t.forEach(function(e,n){t.set(n,null)})}}(),s=function(){try{if((new e.Map).values().next)return function(t,e){return e?Array.from(t.values()):Array.from(t.keys())}}catch(t){}return function(t,e){var n=u.createFixedSize(t.size),r=0;return t.forEach(function(t,o){n[r]=e?t:o,r++}),n}}(),c=function(){function MapWrapper(){}return MapWrapper.clone=function(t){return a(t)},MapWrapper.createFromStringMap=function(t){var n=new e.Map;for(var r in t)n.set(r,t[r]);return n},MapWrapper.toStringMap=function(t){var e={};return t.forEach(function(t,n){return e[n]=t}),e},MapWrapper.createFromPairs=function(t){return o(t)},MapWrapper.clearValues=function(t){i(t)},MapWrapper.iterable=function(t){return t},MapWrapper.keys=function(t){return s(t,!1)},MapWrapper.values=function(t){return s(t,!0)},MapWrapper}();e.MapWrapper=c;var l=function(){function StringMapWrapper(){}return StringMapWrapper.create=function(){return{}},StringMapWrapper.contains=function(t,e){return t.hasOwnProperty(e)},StringMapWrapper.get=function(t,e){return t.hasOwnProperty(e)?t[e]:void 0},StringMapWrapper.set=function(t,e,n){t[e]=n},StringMapWrapper.keys=function(t){return Object.keys(t)},StringMapWrapper.values=function(t){return Object.keys(t).map(function(e){return t[e]})},StringMapWrapper.isEmpty=function(t){for(var e in t)return!1;return!0},StringMapWrapper["delete"]=function(t,e){delete t[e]},StringMapWrapper.forEach=function(t,e){for(var n=0,r=Object.keys(t);n<r.length;n++){var o=r[n];e(t[o],o)}},StringMapWrapper.merge=function(t,e){for(var n={},r=0,o=Object.keys(t);r<o.length;r++){var a=o[r];n[a]=t[a]}for(var i=0,s=Object.keys(e);i<s.length;i++){var a=s[i];n[a]=e[a]}return n},StringMapWrapper.equals=function(t,e){var n=Object.keys(t),r=Object.keys(e);if(n.length!=r.length)return!1;for(var o,a=0;a<n.length;a++)if(o=n[a],t[o]!==e[o])return!1;return!0},StringMapWrapper}();e.StringMapWrapper=l;var u=function(){function ListWrapper(){}return ListWrapper.createFixedSize=function(t){return new Array(t)},ListWrapper.createGrowableSize=function(t){return new Array(t)},ListWrapper.clone=function(t){return t.slice(0)},ListWrapper.forEachWithIndex=function(t,e){for(var n=0;n<t.length;n++)e(t[n],n)},ListWrapper.first=function(t){return t?t[0]:null},ListWrapper.last=function(t){return t&&0!=t.length?t[t.length-1]:null},ListWrapper.indexOf=function(t,e,n){return void 0===n&&(n=0),t.indexOf(e,n)},ListWrapper.contains=function(t,e){return t.indexOf(e)!==-1},ListWrapper.reversed=function(t){var e=ListWrapper.clone(t);return e.reverse()},ListWrapper.concat=function(t,e){return t.concat(e)},ListWrapper.insert=function(t,e,n){t.splice(e,0,n)},ListWrapper.removeAt=function(t,e){var n=t[e];return t.splice(e,1),n},ListWrapper.removeAll=function(t,e){for(var n=0;n<e.length;++n){var r=t.indexOf(e[n]);t.splice(r,1)}},ListWrapper.remove=function(t,e){var n=t.indexOf(e);return n>-1&&(t.splice(n,1),!0)},ListWrapper.clear=function(t){t.length=0},ListWrapper.isEmpty=function(t){return 0==t.length},ListWrapper.fill=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=null),t.fill(e,n,null===r?t.length:r)},ListWrapper.equals=function(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0},ListWrapper.slice=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=null),t.slice(e,null===n?void 0:n)},ListWrapper.splice=function(t,e,n){return t.splice(e,n)},ListWrapper.sort=function(t,e){r.isPresent(e)?t.sort(e):t.sort()},ListWrapper.toString=function(t){return t.toString()},ListWrapper.toJSON=function(t){return JSON.stringify(t)},ListWrapper.maximum=function(t,e){if(0==t.length)return null;for(var n=null,o=-(1/0),a=0;a<t.length;a++){var i=t[a];if(!r.isBlank(i)){var s=e(i);s>o&&(n=i,o=s)}}return n},ListWrapper.flatten=function(t){var e=[];return _flattenArray(t,e),e},ListWrapper.addAll=function(t,e){for(var n=0;n<e.length;n++)t.push(e[n])},ListWrapper}();e.ListWrapper=u,e.isListLikeIterable=isListLikeIterable,e.areIterablesEqual=areIterablesEqual,e.iterateListLike=iterateListLike;var p=function(){var t=new e.Set([1,2,3]);return 3===t.size?function(t){return new e.Set(t)}:function(t){var n=new e.Set(t);if(n.size!==t.length)for(var r=0;r<t.length;r++)n.add(t[r]);return n}}(),d=function(){function SetWrapper(){}return SetWrapper.createFromList=function(t){return p(t)},SetWrapper.has=function(t,e){return t.has(e)},SetWrapper["delete"]=function(t,e){t["delete"](e)},SetWrapper}();e.SetWrapper=d},39:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=n(35),o=n(32),a=function(){function AbstractControlDirective(){}return Object.defineProperty(AbstractControlDirective.prototype,"control",{get:function(){return r.unimplemented()},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"value",{get:function(){return o.isPresent(this.control)?this.control.value:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"valid",{get:function(){return o.isPresent(this.control)?this.control.valid:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"invalid",{get:function(){return o.isPresent(this.control)?this.control.invalid:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"pending",{get:function(){return o.isPresent(this.control)?this.control.pending:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"errors",{get:function(){return o.isPresent(this.control)?this.control.errors:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"pristine",{get:function(){return o.isPresent(this.control)?this.control.pristine:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"dirty",{get:function(){return o.isPresent(this.control)?this.control.dirty:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"touched",{get:function(){return o.isPresent(this.control)?this.control.touched:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"untouched",{get:function(){return o.isPresent(this.control)?this.control.untouched:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"statusChanges",{get:function(){return o.isPresent(this.control)?this.control.statusChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"valueChanges",{get:function(){return o.isPresent(this.control)?this.control.valueChanges:null},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControlDirective.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),AbstractControlDirective.prototype.reset=function(t){void 0===t&&(t=void 0),o.isPresent(this.control)&&this.control.reset(t)},AbstractControlDirective}();e.AbstractControlDirective=a},40:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},o=n(3),a=n(41),i=n(38),s=n(32),c=n(42),l=n(45),u=n(52),p=n(44);e.formDirectiveProvider={provide:u.ControlContainer,useExisting:o.forwardRef(function(){return f})};var d=Promise.resolve(null),f=function(t){function NgForm(e,n){t.call(this),this._submitted=!1,this.ngSubmit=new a.EventEmitter,this.form=new c.FormGroup({},null,p.composeValidators(e),p.composeAsyncValidators(n))}return r(NgForm,t),Object.defineProperty(NgForm.prototype,"submitted",{get:function(){return this._submitted},enumerable:!0,configurable:!0}),Object.defineProperty(NgForm.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(NgForm.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(NgForm.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(NgForm.prototype,"controls",{get:function(){return this.form.controls},enumerable:!0,configurable:!0}),NgForm.prototype.addControl=function(t){var e=this;d.then(function(){var n=e._findContainer(t.path);t._control=n.registerControl(t.name,t.control),p.setUpControl(t.control,t),t.control.updateValueAndValidity({emitEvent:!1})})},NgForm.prototype.getControl=function(t){return this.form.get(t.path)},NgForm.prototype.removeControl=function(t){var e=this;d.then(function(){var n=e._findContainer(t.path);s.isPresent(n)&&n.removeControl(t.name)})},NgForm.prototype.addFormGroup=function(t){var e=this;d.then(function(){var n=e._findContainer(t.path),r=new c.FormGroup({});p.setUpFormContainer(r,t),n.registerControl(t.name,r),r.updateValueAndValidity({emitEvent:!1})})},NgForm.prototype.removeFormGroup=function(t){var e=this;d.then(function(){var n=e._findContainer(t.path);s.isPresent(n)&&n.removeControl(t.name)})},NgForm.prototype.getFormGroup=function(t){return this.form.get(t.path)},NgForm.prototype.updateModel=function(t,e){var n=this;d.then(function(){var r=n.form.get(t.path);r.setValue(e)})},NgForm.prototype.setValue=function(t){this.control.setValue(t)},NgForm.prototype.onSubmit=function(){return this._submitted=!0,this.ngSubmit.emit(null),!1},NgForm.prototype.onReset=function(){this.form.reset()},NgForm.prototype._findContainer=function(t){return t.pop(),i.ListWrapper.isEmpty(t)?this.form:this.form.get(t)},NgForm.decorators=[{type:o.Directive,args:[{selector:"form:not([ngNoForm]):not([formGroup]),ngForm,[ngForm]",providers:[e.formDirectiveProvider],host:{"(submit)":"onSubmit()","(reset)":"onReset()"},outputs:["ngSubmit"],exportAs:"ngForm"}]}],NgForm.ctorParameters=[{type:Array,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[l.NG_VALIDATORS]}]},{type:Array,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[l.NG_ASYNC_VALIDATORS]}]}],NgForm}(u.ControlContainer);e.NgForm=f},41:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},o=n(4),a=n(5);e.Observable=a.Observable;var i=n(4);e.Subject=i.Subject;var s=function(t){function EventEmitter(e){void 0===e&&(e=!1),t.call(this),this.__isAsync=e}return r(EventEmitter,t),EventEmitter.prototype.emit=function(e){t.prototype.next.call(this,e)},EventEmitter.prototype.next=function(e){t.prototype.next.call(this,e)},EventEmitter.prototype.subscribe=function(e,n,r){var o,a=function(t){return null},i=function(){return null};return e&&"object"==typeof e?(o=this.__isAsync?function(t){setTimeout(function(){return e.next(t)})}:function(t){e.next(t)},e.error&&(a=this.__isAsync?function(t){setTimeout(function(){return e.error(t)})}:function(t){e.error(t)}),e.complete&&(i=this.__isAsync?function(){setTimeout(function(){return e.complete()})}:function(){e.complete()})):(o=this.__isAsync?function(t){setTimeout(function(){return e(t)})}:function(t){e(t)},n&&(a=this.__isAsync?function(t){setTimeout(function(){return n(t)})}:function(t){n(t)}),r&&(i=this.__isAsync?function(){setTimeout(function(){return r()})}:function(){r()})),t.prototype.subscribe.call(this,o,a,i)},EventEmitter}(o.Subject);e.EventEmitter=s},42:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";function isControl(t){return t instanceof u}function _find(t,e,n){return l.isBlank(e)?null:(e instanceof Array||(e=e.split(n)),e instanceof Array&&s.ListWrapper.isEmpty(e)?null:e.reduce(function(t,e){if(t instanceof d)return l.isPresent(t.controls[e])?t.controls[e]:null;if(t instanceof f){var n=e;return l.isPresent(t.at(n))?t.at(n):null}return null},t))}function toObservable(t){return l.isPromise(t)?o.PromiseObservable.create(t):t}function coerceToValidator(t){return Array.isArray(t)?a.composeValidators(t):t}function coerceToAsyncValidator(t){return Array.isArray(t)?a.composeAsyncValidators(t):t}var r=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},o=n(43),a=n(44),i=n(41),s=n(38),c=n(35),l=n(32);e.VALID="VALID",e.INVALID="INVALID",e.PENDING="PENDING",e.isControl=isControl;var u=function(){function AbstractControl(t,e){this.validator=t,this.asyncValidator=e,this._pristine=!0,this._touched=!1}return Object.defineProperty(AbstractControl.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"status",{get:function(){return this._status},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"valid",{get:function(){return this._status===e.VALID},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"invalid",{get:function(){return this._status===e.INVALID},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"errors",{get:function(){return this._errors},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"pristine",{get:function(){return this._pristine},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"dirty",{get:function(){return!this.pristine},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"touched",{get:function(){return this._touched},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"untouched",{get:function(){return!this._touched},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"valueChanges",{get:function(){return this._valueChanges},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"statusChanges",{get:function(){return this._statusChanges},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractControl.prototype,"pending",{get:function(){return this._status==e.PENDING},enumerable:!0,configurable:!0}),AbstractControl.prototype.setAsyncValidators=function(t){this.asyncValidator=coerceToAsyncValidator(t)},AbstractControl.prototype.clearAsyncValidators=function(){this.asyncValidator=null},AbstractControl.prototype.setValidators=function(t){this.validator=coerceToValidator(t)},AbstractControl.prototype.clearValidators=function(){this.validator=null},AbstractControl.prototype.markAsTouched=function(t){var e=(void 0===t?{}:t).onlySelf;e=l.normalizeBool(e),this._touched=!0,l.isPresent(this._parent)&&!e&&this._parent.markAsTouched({onlySelf:e})},AbstractControl.prototype.markAsDirty=function(t){var e=(void 0===t?{}:t).onlySelf;e=l.normalizeBool(e),this._pristine=!1,l.isPresent(this._parent)&&!e&&this._parent.markAsDirty({onlySelf:e})},AbstractControl.prototype.markAsPristine=function(t){var e=(void 0===t?{}:t).onlySelf;this._pristine=!0,this._forEachChild(function(t){t.markAsPristine({onlySelf:!0})}),l.isPresent(this._parent)&&!e&&this._parent._updatePristine({onlySelf:e})},AbstractControl.prototype.markAsUntouched=function(t){var e=(void 0===t?{}:t).onlySelf;this._touched=!1,this._forEachChild(function(t){t.markAsUntouched({onlySelf:!0})}),l.isPresent(this._parent)&&!e&&this._parent._updateTouched({onlySelf:e})},AbstractControl.prototype.markAsPending=function(t){var n=(void 0===t?{}:t).onlySelf;n=l.normalizeBool(n),this._status=e.PENDING,l.isPresent(this._parent)&&!n&&this._parent.markAsPending({onlySelf:n})},AbstractControl.prototype.setParent=function(t){this._parent=t},AbstractControl.prototype.updateValueAndValidity=function(t){var n=void 0===t?{}:t,r=n.onlySelf,o=n.emitEvent;r=l.normalizeBool(r),o=!l.isPresent(o)||o,this._updateValue(),this._errors=this._runValidator(),this._status=this._calculateStatus(),this._status!=e.VALID&&this._status!=e.PENDING||this._runAsyncValidator(o),o&&(this._valueChanges.emit(this._value),this._statusChanges.emit(this._status)),l.isPresent(this._parent)&&!r&&this._parent.updateValueAndValidity({onlySelf:r,emitEvent:o})},AbstractControl.prototype._runValidator=function(){return l.isPresent(this.validator)?this.validator(this):null},AbstractControl.prototype._runAsyncValidator=function(t){var n=this;if(l.isPresent(this.asyncValidator)){this._status=e.PENDING,this._cancelExistingSubscription();var r=toObservable(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe({next:function(e){return n.setErrors(e,{emitEvent:t})}})}},AbstractControl.prototype._cancelExistingSubscription=function(){l.isPresent(this._asyncValidationSubscription)&&this._asyncValidationSubscription.unsubscribe()},AbstractControl.prototype.setErrors=function(t,e){var n=(void 0===e?{}:e).emitEvent;n=!l.isPresent(n)||n,this._errors=t,this._updateControlsErrors(n)},AbstractControl.prototype.find=function(t){return _find(this,t,"/")},AbstractControl.prototype.get=function(t){return _find(this,t,".")},AbstractControl.prototype.getError=function(t,e){void 0===e&&(e=null);var n=l.isPresent(e)&&!s.ListWrapper.isEmpty(e)?this.find(e):this;return l.isPresent(n)&&l.isPresent(n._errors)?s.StringMapWrapper.get(n._errors,t):null},AbstractControl.prototype.hasError=function(t,e){return void 0===e&&(e=null),l.isPresent(this.getError(t,e))},Object.defineProperty(AbstractControl.prototype,"root",{get:function(){for(var t=this;l.isPresent(t._parent);)t=t._parent;return t},enumerable:!0,configurable:!0}),AbstractControl.prototype._updateControlsErrors=function(t){this._status=this._calculateStatus(),t&&this._statusChanges.emit(this._status),l.isPresent(this._parent)&&this._parent._updateControlsErrors(t)},AbstractControl.prototype._initObservables=function(){this._valueChanges=new i.EventEmitter,this._statusChanges=new i.EventEmitter},AbstractControl.prototype._calculateStatus=function(){return l.isPresent(this._errors)?e.INVALID:this._anyControlsHaveStatus(e.PENDING)?e.PENDING:this._anyControlsHaveStatus(e.INVALID)?e.INVALID:e.VALID},AbstractControl.prototype._anyControlsHaveStatus=function(t){return this._anyControls(function(e){return e.status==t})},AbstractControl.prototype._anyControlsDirty=function(){return this._anyControls(function(t){return t.dirty})},AbstractControl.prototype._anyControlsTouched=function(){return this._anyControls(function(t){return t.touched})},AbstractControl.prototype._updatePristine=function(t){var e=(void 0===t?{}:t).onlySelf;this._pristine=!this._anyControlsDirty(),l.isPresent(this._parent)&&!e&&this._parent._updatePristine({onlySelf:e})},AbstractControl.prototype._updateTouched=function(t){var e=(void 0===t?{}:t).onlySelf;this._touched=this._anyControlsTouched(),l.isPresent(this._parent)&&!e&&this._parent._updateTouched({onlySelf:e})},AbstractControl}();e.AbstractControl=u;var p=function(t){function FormControl(e,n,r){void 0===e&&(e=null),void 0===n&&(n=null),void 0===r&&(r=null),t.call(this,coerceToValidator(n),coerceToAsyncValidator(r)),this._onChange=[],this._value=e,this.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),this._initObservables()}return r(FormControl,t),FormControl.prototype.setValue=function(t,e){var n=this,r=void 0===e?{}:e,o=r.onlySelf,a=r.emitEvent,i=r.emitModelToViewChange,s=r.emitViewToModelChange;i=!l.isPresent(i)||i,s=!l.isPresent(s)||s,this._value=t,this._onChange.length&&i&&this._onChange.forEach(function(t){return t(n._value,s)}),this.updateValueAndValidity({onlySelf:o,emitEvent:a})},FormControl.prototype.patchValue=function(t,e){void 0===e&&(e={}),this.setValue(t,e)},FormControl.prototype.updateValue=function(t,e){void 0===e&&(e={}),this.setValue(t,e)},FormControl.prototype.reset=function(t,e){void 0===t&&(t=null);var n=(void 0===e?{}:e).onlySelf;this.markAsPristine({onlySelf:n}),this.markAsUntouched({onlySelf:n}),this.setValue(t,{onlySelf:n})},FormControl.prototype._updateValue=function(){},FormControl.prototype._anyControls=function(t){return!1},FormControl.prototype.registerOnChange=function(t){this._onChange.push(t)},FormControl.prototype._forEachChild=function(t){},FormControl}(u);e.FormControl=p;var d=function(t){function FormGroup(e,n,r,o){void 0===n&&(n=null),void 0===r&&(r=null),void 0===o&&(o=null),t.call(this,r,o),this.controls=e,this._optionals=l.isPresent(n)?n:{},this._initObservables(),this._setParentForControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}return r(FormGroup,t),FormGroup.prototype.registerControl=function(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e)},FormGroup.prototype.addControl=function(t,e){this.registerControl(t,e),this.updateValueAndValidity()},FormGroup.prototype.removeControl=function(t){s.StringMapWrapper["delete"](this.controls,t),this.updateValueAndValidity()},FormGroup.prototype.include=function(t){s.StringMapWrapper.set(this._optionals,t,!0),this.updateValueAndValidity()},FormGroup.prototype.exclude=function(t){s.StringMapWrapper.set(this._optionals,t,!1),this.updateValueAndValidity()},FormGroup.prototype.contains=function(t){var e=s.StringMapWrapper.contains(this.controls,t);return e&&this._included(t)},FormGroup.prototype.setValue=function(t,e){var n=this,r=(void 0===e?{}:e).onlySelf;this._checkAllValuesPresent(t),s.StringMapWrapper.forEach(t,function(t,e){n._throwIfControlMissing(e),n.controls[e].setValue(t,{onlySelf:!0})}),this.updateValueAndValidity({onlySelf:r})},FormGroup.prototype.patchValue=function(t,e){var n=this,r=(void 0===e?{}:e).onlySelf;s.StringMapWrapper.forEach(t,function(t,e){n.controls[e]&&n.controls[e].patchValue(t,{onlySelf:!0})}),this.updateValueAndValidity({onlySelf:r})},FormGroup.prototype.reset=function(t,e){void 0===t&&(t={});var n=(void 0===e?{}:e).onlySelf;this._forEachChild(function(e,n){e.reset(t[n],{onlySelf:!0})}),this.updateValueAndValidity({onlySelf:n}),this._updatePristine({onlySelf:n}),this._updateTouched({onlySelf:n})},FormGroup.prototype._throwIfControlMissing=function(t){if(!Object.keys(this.controls).length)throw new c.BaseException("\n        There are no form controls registered with this group yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new c.BaseException("Cannot find form control with name: "+t+".")},FormGroup.prototype._forEachChild=function(t){s.StringMapWrapper.forEach(this.controls,t)},FormGroup.prototype._setParentForControls=function(){var t=this;this._forEachChild(function(e,n){e.setParent(t)})},FormGroup.prototype._updateValue=function(){this._value=this._reduceValue()},FormGroup.prototype._anyControls=function(t){var e=this,n=!1;return this._forEachChild(function(r,o){n=n||e.contains(o)&&t(r)}),n},FormGroup.prototype._reduceValue=function(){return this._reduceChildren({},function(t,e,n){return t[n]=e.value,t})},FormGroup.prototype._reduceChildren=function(t,e){var n=this,r=t;return this._forEachChild(function(t,o){n._included(o)&&(r=e(r,t,o))}),r},FormGroup.prototype._included=function(t){var e=s.StringMapWrapper.contains(this._optionals,t);return!e||s.StringMapWrapper.get(this._optionals,t)},FormGroup.prototype._checkAllValuesPresent=function(t){this._forEachChild(function(e,n){if(void 0===t[n])throw new c.BaseException("Must supply a value for form control with name: '"+n+"'.")})},FormGroup}(u);e.FormGroup=d;var f=function(t){function FormArray(e,n,r){void 0===n&&(n=null),void 0===r&&(r=null),t.call(this,n,r),this.controls=e,this._initObservables(),this._setParentForControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}return r(FormArray,t),FormArray.prototype.at=function(t){return this.controls[t]},FormArray.prototype.push=function(t){this.controls.push(t),t.setParent(this),this.updateValueAndValidity()},FormArray.prototype.insert=function(t,e){s.ListWrapper.insert(this.controls,t,e),e.setParent(this),this.updateValueAndValidity()},FormArray.prototype.removeAt=function(t){s.ListWrapper.removeAt(this.controls,t),this.updateValueAndValidity()},Object.defineProperty(FormArray.prototype,"length",{get:function(){return this.controls.length},enumerable:!0,configurable:!0}),FormArray.prototype.setValue=function(t,e){var n=this,r=(void 0===e?{}:e).onlySelf;this._checkAllValuesPresent(t),t.forEach(function(t,e){n._throwIfControlMissing(e),n.at(e).setValue(t,{onlySelf:!0})}),this.updateValueAndValidity({onlySelf:r})},FormArray.prototype.patchValue=function(t,e){var n=this,r=(void 0===e?{}:e).onlySelf;t.forEach(function(t,e){n.at(e)&&n.at(e).patchValue(t,{onlySelf:!0})}),this.updateValueAndValidity({onlySelf:r})},FormArray.prototype.reset=function(t,e){void 0===t&&(t=[]);var n=(void 0===e?{}:e).onlySelf;this._forEachChild(function(e,n){e.reset(t[n],{onlySelf:!0})}),this.updateValueAndValidity({onlySelf:n}),this._updatePristine({onlySelf:n}),this._updateTouched({onlySelf:n})},FormArray.prototype._throwIfControlMissing=function(t){if(!this.controls.length)throw new c.BaseException("\n        There are no form controls registered with this array yet.  If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new c.BaseException("Cannot find form control at index "+t)},FormArray.prototype._forEachChild=function(t){this.controls.forEach(function(e,n){t(e,n)})},FormArray.prototype._updateValue=function(){this._value=this.controls.map(function(t){return t.value})},FormArray.prototype._anyControls=function(t){return this.controls.some(function(e){return t(e)})},FormArray.prototype._setParentForControls=function(){var t=this;this._forEachChild(function(e){e.setParent(t)})},FormArray.prototype._checkAllValuesPresent=function(t){this._forEachChild(function(e,n){if(void 0===t[n])throw new c.BaseException("Must supply a value for form control at index: "+n+".")})},FormArray}(u);e.FormArray=f},44:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";function controlPath(t,e){var n=r.ListWrapper.clone(e.path);return n.push(t),n}function setUpControl(t,e){a.isBlank(t)&&_throwError(e,"Cannot find control with"),a.isBlank(e.valueAccessor)&&_throwError(e,"No value accessor for form control with"),t.validator=i.Validators.compose([t.validator,e.validator]),t.asyncValidator=i.Validators.composeAsync([t.asyncValidator,e.asyncValidator]),e.valueAccessor.writeValue(t.value),e.valueAccessor.registerOnChange(function(n){e.viewToModelUpdate(n),t.markAsDirty(),t.setValue(n,{emitModelToViewChange:!1})}),t.registerOnChange(function(t,n){e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)}),e.valueAccessor.registerOnTouched(function(){return t.markAsTouched()})}function setUpFormContainer(t,e){a.isBlank(t)&&_throwError(e,"Cannot find control with"),t.validator=i.Validators.compose([t.validator,e.validator]),t.asyncValidator=i.Validators.composeAsync([t.asyncValidator,e.asyncValidator])}function _throwError(t,e){var n;throw n=t.path.length>1?"path: '"+t.path.join(" -> ")+"'":t.path[0]?"name: '"+t.path+"'":"unspecified name attribute",new o.BaseException(e+" "+n)}function composeValidators(t){return a.isPresent(t)?i.Validators.compose(t.map(l.normalizeValidator)):null}function composeAsyncValidators(t){return a.isPresent(t)?i.Validators.composeAsync(t.map(l.normalizeAsyncValidator)):null}function isPropertyUpdated(t,e){if(!r.StringMapWrapper.contains(t,"model"))return!1;var n=t.model;return!!n.isFirstChange()||!a.looseIdentical(e,n.currentValue)}function selectValueAccessor(t,e){if(a.isBlank(e))return null;var n,r,o;return e.forEach(function(e){a.hasConstructor(e,c.DefaultValueAccessor)?n=e:a.hasConstructor(e,s.CheckboxControlValueAccessor)||a.hasConstructor(e,u.NumberValueAccessor)||a.hasConstructor(e,d.SelectControlValueAccessor)||a.hasConstructor(e,f.SelectMultipleControlValueAccessor)||a.hasConstructor(e,p.RadioControlValueAccessor)?(a.isPresent(r)&&_throwError(t,"More than one built-in value accessor matches form control with"),r=e):(a.isPresent(o)&&_throwError(t,"More than one custom value accessor matches form control with"),o=e)}),a.isPresent(o)?o:a.isPresent(r)?r:a.isPresent(n)?n:(_throwError(t,"No valid value accessor for form control with"),null)}var r=n(38),o=n(35),a=n(32),i=n(45),s=n(29),c=n(31),l=n(47),u=n(48),p=n(49),d=n(50),f=n(51);e.controlPath=controlPath,e.setUpControl=setUpControl,e.setUpFormContainer=setUpFormContainer,e.composeValidators=composeValidators,e.composeAsyncValidators=composeAsyncValidators,e.isPropertyUpdated=isPropertyUpdated,e.selectValueAccessor=selectValueAccessor},45:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";function _convertToPromise(t){return i.isPromise(t)?t:o.toPromise.call(t)}function _executeValidators(t,e){return e.map(function(e){return e(t)})}function _executeAsyncValidators(t,e){return e.map(function(e){return e(t)})}function _mergeErrors(t){var e=t.reduce(function(t,e){return i.isPresent(e)?a.StringMapWrapper.merge(t,e):t},{});return a.StringMapWrapper.isEmpty(e)?null:e}var r=n(3),o=n(46),a=n(38),i=n(32);e.NG_VALIDATORS=new r.OpaqueToken("NgValidators"),e.NG_ASYNC_VALIDATORS=new r.OpaqueToken("NgAsyncValidators");var s=function(){function Validators(){}return Validators.required=function(t){return i.isBlank(t.value)||i.isString(t.value)&&""==t.value?{required:!0}:null},Validators.minLength=function(t){return function(e){if(i.isPresent(Validators.required(e)))return null;var n=e.value;return n.length<t?{minlength:{requiredLength:t,actualLength:n.length}}:null}},Validators.maxLength=function(t){return function(e){if(i.isPresent(Validators.required(e)))return null;var n=e.value;return n.length>t?{maxlength:{requiredLength:t,actualLength:n.length}}:null}},Validators.pattern=function(t){return function(e){if(i.isPresent(Validators.required(e)))return null;var n=new RegExp("^"+t+"$"),r=e.value;return n.test(r)?null:{pattern:{requiredPattern:"^"+t+"$",actualValue:r}}}},Validators.nullValidator=function(t){return null},Validators.compose=function(t){if(i.isBlank(t))return null;var e=t.filter(i.isPresent);return 0==e.length?null:function(t){return _mergeErrors(_executeValidators(t,e))}},Validators.composeAsync=function(t){if(i.isBlank(t))return null;var e=t.filter(i.isPresent);return 0==e.length?null:function(t){var n=_executeAsyncValidators(t,e).map(_convertToPromise);return Promise.all(n).then(_mergeErrors)}},Validators}();e.Validators=s},47:function(t,e){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";function normalizeValidator(t){return void 0!==t.validate?function(e){return t.validate(e)}:t}function normalizeAsyncValidator(t){return void 0!==t.validate?function(e){return t.validate(e)}:t}e.normalizeValidator=normalizeValidator,e.normalizeAsyncValidator=normalizeAsyncValidator},48:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=n(3),o=n(32),a=n(30);e.NUMBER_VALUE_ACCESSOR={provide:a.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return i}),multi:!0};var i=function(){function NumberValueAccessor(t,e){this._renderer=t,this._elementRef=e,this.onChange=function(t){},this.onTouched=function(){}}return NumberValueAccessor.prototype.writeValue=function(t){var e=o.isBlank(t)?"":t;this._renderer.setElementProperty(this._elementRef.nativeElement,"value",e)},NumberValueAccessor.prototype.registerOnChange=function(t){this.onChange=function(e){t(""==e?null:o.NumberWrapper.parseFloat(e))}},NumberValueAccessor.prototype.registerOnTouched=function(t){this.onTouched=t},NumberValueAccessor.decorators=[{type:r.Directive,args:[{selector:"input[type=number][formControlName],input[type=number][formControl],input[type=number][ngModel]",host:{"(change)":"onChange($event.target.value)","(input)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[e.NUMBER_VALUE_ACCESSOR]}]}],NumberValueAccessor.ctorParameters=[{type:r.Renderer},{type:r.ElementRef}],NumberValueAccessor}();e.NumberValueAccessor=i},49:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=n(3),o=n(38),a=n(35),i=n(32),s=n(30),c=n(34);e.RADIO_VALUE_ACCESSOR={provide:s.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return u}),multi:!0};var l=function(){function RadioControlRegistry(){this._accessors=[]}return RadioControlRegistry.prototype.add=function(t,e){this._accessors.push([t,e])},RadioControlRegistry.prototype.remove=function(t){for(var e=-1,n=0;n<this._accessors.length;++n)this._accessors[n][1]===t&&(e=n);o.ListWrapper.removeAt(this._accessors,e)},RadioControlRegistry.prototype.select=function(t){var e=this;this._accessors.forEach(function(n){e._isSameGroup(n,t)&&n[1]!==t&&n[1].fireUncheck(t.value)})},RadioControlRegistry.prototype._isSameGroup=function(t,e){return!!t[0].control&&(t[0].control.root===e._control.control.root&&t[1].name===e.name)},RadioControlRegistry.decorators=[{type:r.Injectable}],RadioControlRegistry}();e.RadioControlRegistry=l;var u=function(){function RadioControlValueAccessor(t,e,n,r){this._renderer=t,this._elementRef=e,this._registry=n,this._injector=r,this.onChange=function(){},this.onTouched=function(){}}return RadioControlValueAccessor.prototype.ngOnInit=function(){this._control=this._injector.get(c.NgControl),this._checkName(),this._registry.add(this._control,this)},RadioControlValueAccessor.prototype.ngOnDestroy=function(){this._registry.remove(this)},RadioControlValueAccessor.prototype.writeValue=function(t){this._state=t===this.value,i.isPresent(t)&&this._renderer.setElementProperty(this._elementRef.nativeElement,"checked",this._state)},RadioControlValueAccessor.prototype.registerOnChange=function(t){var e=this;this._fn=t,this.onChange=function(){t(e.value),e._registry.select(e)}},RadioControlValueAccessor.prototype.fireUncheck=function(t){this.writeValue(t)},RadioControlValueAccessor.prototype.registerOnTouched=function(t){this.onTouched=t},RadioControlValueAccessor.prototype._checkName=function(){this.name&&this.formControlName&&this.name!==this.formControlName&&this._throwNameError(),!this.name&&this.formControlName&&(this.name=this.formControlName)},RadioControlValueAccessor.prototype._throwNameError=function(){throw new a.BaseException('\n      If you define both a name and a formControlName attribute on your radio button, their values\n      must match. Ex: <input type="radio" formControlName="food" name="food">\n    ')},RadioControlValueAccessor.decorators=[{type:r.Directive,args:[{selector:"input[type=radio][formControlName],input[type=radio][formControl],input[type=radio][ngModel]",host:{"(change)":"onChange()","(blur)":"onTouched()"},providers:[e.RADIO_VALUE_ACCESSOR]}]}],RadioControlValueAccessor.ctorParameters=[{type:r.Renderer},{type:r.ElementRef},{type:l},{type:r.Injector}],RadioControlValueAccessor.propDecorators={name:[{type:r.Input}],formControlName:[{type:r.Input}],value:[{type:r.Input}]},RadioControlValueAccessor}();e.RadioControlValueAccessor=u},50:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";function _buildValueString(t,e){return a.isBlank(t)?""+e:(a.isPrimitive(e)||(e="Object"),a.StringWrapper.slice(t+": "+e,0,50))}function _extractId(t){return t.split(":")[0]}var r=n(3),o=n(38),a=n(32),i=n(30);e.SELECT_VALUE_ACCESSOR={provide:i.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return s}),multi:!0};var s=function(){function SelectControlValueAccessor(t,e){this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){}}return SelectControlValueAccessor.prototype.writeValue=function(t){this.value=t;var e=_buildValueString(this._getOptionId(t),t);this._renderer.setElementProperty(this._elementRef.nativeElement,"value",e)},SelectControlValueAccessor.prototype.registerOnChange=function(t){var e=this;this.onChange=function(n){e.value=n,t(e._getOptionValue(n))}},SelectControlValueAccessor.prototype.registerOnTouched=function(t){this.onTouched=t},SelectControlValueAccessor.prototype._registerOption=function(){return(this._idCounter++).toString()},SelectControlValueAccessor.prototype._getOptionId=function(t){for(var e=0,n=o.MapWrapper.keys(this._optionMap);e<n.length;e++){var r=n[e];if(a.looseIdentical(this._optionMap.get(r),t))return r}return null},SelectControlValueAccessor.prototype._getOptionValue=function(t){var e=this._optionMap.get(_extractId(t));return a.isPresent(e)?e:t},SelectControlValueAccessor.decorators=[{type:r.Directive,args:[{selector:"select:not([multiple])[formControlName],select:not([multiple])[formControl],select:not([multiple])[ngModel]",host:{"(change)":"onChange($event.target.value)","(blur)":"onTouched()"},providers:[e.SELECT_VALUE_ACCESSOR]}]}],SelectControlValueAccessor.ctorParameters=[{type:r.Renderer},{type:r.ElementRef}],SelectControlValueAccessor}();e.SelectControlValueAccessor=s;var c=function(){function NgSelectOption(t,e,n){this._element=t,this._renderer=e,this._select=n,a.isPresent(this._select)&&(this.id=this._select._registerOption())}return Object.defineProperty(NgSelectOption.prototype,"ngValue",{set:function(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(_buildValueString(this.id,t)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(NgSelectOption.prototype,"value",{set:function(t){this._setElementValue(t),a.isPresent(this._select)&&this._select.writeValue(this._select.value)},enumerable:!0,configurable:!0}),NgSelectOption.prototype._setElementValue=function(t){this._renderer.setElementProperty(this._element.nativeElement,"value",t)},NgSelectOption.prototype.ngOnDestroy=function(){a.isPresent(this._select)&&(this._select._optionMap["delete"](this.id),this._select.writeValue(this._select.value))},NgSelectOption.decorators=[{type:r.Directive,args:[{selector:"option"}]}],NgSelectOption.ctorParameters=[{type:r.ElementRef},{type:r.Renderer},{type:s,decorators:[{type:r.Optional},{type:r.Host}]}],NgSelectOption.propDecorators={ngValue:[{type:r.Input,args:["ngValue"]}],value:[{type:r.Input,args:["value"]}]},NgSelectOption}();e.NgSelectOption=c},51:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";function _buildValueString(t,e){return a.isBlank(t)?""+e:(a.isString(e)&&(e="'"+e+"'"),a.isPrimitive(e)||(e="Object"),a.StringWrapper.slice(t+": "+e,0,50))}function _extractId(t){return t.split(":")[0]}var r=n(3),o=n(38),a=n(32),i=n(30);e.SELECT_MULTIPLE_VALUE_ACCESSOR={provide:i.NG_VALUE_ACCESSOR,useExisting:r.forwardRef(function(){return s}),multi:!0};var s=(function(){function HTMLCollection(){}return HTMLCollection}(),function(){function SelectMultipleControlValueAccessor(){this._optionMap=new Map,this._idCounter=0,this.onChange=function(t){},this.onTouched=function(){}}return SelectMultipleControlValueAccessor.prototype.writeValue=function(t){var e=this;if(this.value=t,null!=t){var n=t,r=n.map(function(t){return e._getOptionId(t)});this._optionMap.forEach(function(t,e){t._setSelected(r.indexOf(e.toString())>-1)})}},SelectMultipleControlValueAccessor.prototype.registerOnChange=function(t){var e=this;this.onChange=function(n){var r=[];if(n.hasOwnProperty("selectedOptions"))for(var o=n.selectedOptions,a=0;a<o.length;a++){var i=o.item(a),s=e._getOptionValue(i.value);r.push(s)}else for(var o=n.options,a=0;a<o.length;a++){var i=o.item(a);if(i.selected){var s=e._getOptionValue(i.value);r.push(s)}}t(r)}},SelectMultipleControlValueAccessor.prototype.registerOnTouched=function(t){this.onTouched=t},SelectMultipleControlValueAccessor.prototype._registerOption=function(t){var e=(this._idCounter++).toString();return this._optionMap.set(e,t),e},SelectMultipleControlValueAccessor.prototype._getOptionId=function(t){for(var e=0,n=o.MapWrapper.keys(this._optionMap);e<n.length;e++){var r=n[e];if(a.looseIdentical(this._optionMap.get(r)._value,t))return r}return null},SelectMultipleControlValueAccessor.prototype._getOptionValue=function(t){var e=this._optionMap.get(_extractId(t));return a.isPresent(e)?e._value:t},SelectMultipleControlValueAccessor.decorators=[{type:r.Directive,args:[{selector:"select[multiple][formControlName],select[multiple][formControl],select[multiple][ngModel]",host:{"(change)":"onChange($event.target)","(blur)":"onTouched()"},providers:[e.SELECT_MULTIPLE_VALUE_ACCESSOR]}]}],SelectMultipleControlValueAccessor.ctorParameters=[],SelectMultipleControlValueAccessor}());e.SelectMultipleControlValueAccessor=s;var c=function(){function NgSelectMultipleOption(t,e,n){this._element=t,this._renderer=e,this._select=n,a.isPresent(this._select)&&(this.id=this._select._registerOption(this))}return Object.defineProperty(NgSelectMultipleOption.prototype,"ngValue",{set:function(t){null!=this._select&&(this._value=t,this._setElementValue(_buildValueString(this.id,t)),this._select.writeValue(this._select.value))},enumerable:!0,configurable:!0}),Object.defineProperty(NgSelectMultipleOption.prototype,"value",{set:function(t){a.isPresent(this._select)?(this._value=t,this._setElementValue(_buildValueString(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)},enumerable:!0,configurable:!0}),NgSelectMultipleOption.prototype._setElementValue=function(t){this._renderer.setElementProperty(this._element.nativeElement,"value",t)},NgSelectMultipleOption.prototype._setSelected=function(t){this._renderer.setElementProperty(this._element.nativeElement,"selected",t)},NgSelectMultipleOption.prototype.ngOnDestroy=function(){a.isPresent(this._select)&&(this._select._optionMap["delete"](this.id),this._select.writeValue(this._select.value))},NgSelectMultipleOption.decorators=[{type:r.Directive,args:[{selector:"option"}]}],NgSelectMultipleOption.ctorParameters=[{type:r.ElementRef},{type:r.Renderer},{type:s,decorators:[{type:r.Optional},{type:r.Host}]}],NgSelectMultipleOption.propDecorators={ngValue:[{type:r.Input,args:["ngValue"]}],value:[{type:r.Input,args:["value"]}]},NgSelectMultipleOption}();e.NgSelectMultipleOption=c,e.SELECT_DIRECTIVES=[s,c]},52:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},o=n(39),a=function(t){function ControlContainer(){t.apply(this,arguments)}return r(ControlContainer,t),Object.defineProperty(ControlContainer.prototype,"formDirective",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(ControlContainer.prototype,"path",{get:function(){return null},enumerable:!0,configurable:!0}),ControlContainer}(o.AbstractControlDirective);e.ControlContainer=a},53:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},o=n(3),a=n(41),i=n(42),s=n(45),c=n(54),l=n(52),u=n(30),p=n(34),d=n(40),f=n(55),h=n(44),g=n(56);e.formControlBinding={provide:p.NgControl,useExisting:o.forwardRef(function(){return y})};var m=Promise.resolve(null),y=function(t){function NgModel(e,n,r,o){t.call(this),this._parent=e,this._validators=n,this._asyncValidators=r,this._control=new i.FormControl,this._registered=!1,this.update=new a.EventEmitter,this.valueAccessor=h.selectValueAccessor(this,o)}return r(NgModel,t),NgModel.prototype.ngOnChanges=function(t){this._checkForErrors(),this._registered||this._setUpControl(),h.isPropertyUpdated(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)},NgModel.prototype.ngOnDestroy=function(){this.formDirective&&this.formDirective.removeControl(this)},Object.defineProperty(NgModel.prototype,"control",{get:function(){return this._control},enumerable:!0,configurable:!0}),Object.defineProperty(NgModel.prototype,"path",{get:function(){return this._parent?h.controlPath(this.name,this._parent):[this.name]},enumerable:!0,configurable:!0}),Object.defineProperty(NgModel.prototype,"formDirective",{get:function(){return this._parent?this._parent.formDirective:null},enumerable:!0,configurable:!0}),Object.defineProperty(NgModel.prototype,"validator",{get:function(){return h.composeValidators(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(NgModel.prototype,"asyncValidator",{get:function(){return h.composeAsyncValidators(this._asyncValidators)},enumerable:!0,configurable:!0}),NgModel.prototype.viewToModelUpdate=function(t){this.viewModel=t,this.update.emit(t)},NgModel.prototype._setUpControl=function(){this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0},NgModel.prototype._isStandalone=function(){return!this._parent||this.options&&this.options.standalone},NgModel.prototype._setUpStandalone=function(){h.setUpControl(this._control,this),this._control.updateValueAndValidity({emitEvent:!1})},NgModel.prototype._checkForErrors=function(){this._isStandalone()||this._checkParentType(),this._checkName()},NgModel.prototype._checkParentType=function(){!(this._parent instanceof f.NgModelGroup)&&this._parent instanceof c.AbstractFormGroupDirective?g.TemplateDrivenErrors.formGroupNameException():this._parent instanceof f.NgModelGroup||this._parent instanceof d.NgForm||g.TemplateDrivenErrors.modelParentException()},NgModel.prototype._checkName=function(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()||this.name||g.TemplateDrivenErrors.missingNameException()},NgModel.prototype._updateValue=function(t){var e=this;m.then(function(){e.control.setValue(t,{emitViewToModelChange:!1})})},NgModel.decorators=[{type:o.Directive,args:[{selector:"[ngModel]:not([formControlName]):not([formControl])",providers:[e.formControlBinding],exportAs:"ngModel"}]}],NgModel.ctorParameters=[{type:l.ControlContainer,decorators:[{type:o.Optional},{type:o.Host}]},{type:Array,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[s.NG_VALIDATORS]}]},{type:Array,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[s.NG_ASYNC_VALIDATORS]}]},{type:Array,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[u.NG_VALUE_ACCESSOR]}]}],NgModel.propDecorators={model:[{type:o.Input,args:["ngModel"]}],name:[{type:o.Input}],options:[{type:o.Input,args:["ngModelOptions"]}],update:[{type:o.Output,args:["ngModelChange"]}]},NgModel}(p.NgControl);e.NgModel=y},54:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},o=n(52),a=n(44),i=function(t){function AbstractFormGroupDirective(){t.apply(this,arguments)}return r(AbstractFormGroupDirective,t),AbstractFormGroupDirective.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormGroup(this)},AbstractFormGroupDirective.prototype.ngOnDestroy=function(){this.formDirective.removeFormGroup(this)},Object.defineProperty(AbstractFormGroupDirective.prototype,"control",{get:function(){return this.formDirective.getFormGroup(this)},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractFormGroupDirective.prototype,"path",{get:function(){return a.controlPath(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractFormGroupDirective.prototype,"formDirective",{get:function(){return this._parent.formDirective},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractFormGroupDirective.prototype,"validator",{get:function(){return a.composeValidators(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(AbstractFormGroupDirective.prototype,"asyncValidator",{get:function(){return a.composeAsyncValidators(this._asyncValidators)},enumerable:!0,configurable:!0}),AbstractFormGroupDirective.prototype._checkParentType=function(){},AbstractFormGroupDirective}(o.ControlContainer);e.AbstractFormGroupDirective=i},55:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},o=n(3),a=n(45),i=n(54),s=n(52),c=n(40),l=n(56);e.modelGroupProvider={provide:s.ControlContainer,useExisting:o.forwardRef(function(){return u})};var u=function(t){function NgModelGroup(e,n,r){t.call(this),this._parent=e,this._validators=n,this._asyncValidators=r}return r(NgModelGroup,t),NgModelGroup.prototype._checkParentType=function(){this._parent instanceof NgModelGroup||this._parent instanceof c.NgForm||l.TemplateDrivenErrors.modelGroupParentException()},NgModelGroup.decorators=[{type:o.Directive,args:[{selector:"[ngModelGroup]",providers:[e.modelGroupProvider],exportAs:"ngModelGroup"}]}],NgModelGroup.ctorParameters=[{type:s.ControlContainer,decorators:[{type:o.Host},{type:o.SkipSelf}]},{type:Array,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[a.NG_VALIDATORS]}]},{type:Array,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[a.NG_ASYNC_VALIDATORS]}]}],NgModelGroup.propDecorators={name:[{type:o.Input,args:["ngModelGroup"]}]},NgModelGroup}(i.AbstractFormGroupDirective);e.NgModelGroup=u},56:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=n(35),o=n(57),a=function(){function TemplateDrivenErrors(){}return TemplateDrivenErrors.modelParentException=function(){throw new r.BaseException('\n      ngModel cannot be used to register form controls with a parent formGroup directive.  Try using\n      formGroup\'s partner directive "formControlName" instead.  Example:\n\n      '+o.FormErrorExamples.formControlName+"\n\n      Or, if you'd like to avoid registering this form control, indicate that it's standalone in ngModelOptions:\n\n      Example:\n\n      "+o.FormErrorExamples.ngModelWithFormGroup)},TemplateDrivenErrors.formGroupNameException=function(){throw new r.BaseException("\n      ngModel cannot be used to register form controls with a parent formGroupName or formArrayName directive.\n\n      Option 1: Use formControlName instead of ngModel (reactive strategy):\n\n      "+o.FormErrorExamples.formGroupName+"\n\n      Option 2:  Update ngModel's parent be ngModelGroup (template-driven strategy):\n\n      "+o.FormErrorExamples.ngModelGroup)},TemplateDrivenErrors.missingNameException=function(){throw new r.BaseException('If ngModel is used within a form tag, either the name attribute must be set or the form\n      control must be defined as \'standalone\' in ngModelOptions.\n\n      Example 1: <input [(ngModel)]="person.firstName" name="first">\n      Example 2: <input [(ngModel)]="person.firstName" [ngModelOptions]="{standalone: true}">')},TemplateDrivenErrors.modelGroupParentException=function(){throw new r.BaseException("\n      ngModelGroup cannot be used with a parent formGroup directive.\n\n      Option 1: Use formGroupName instead of ngModelGroup (reactive strategy):\n\n      "+o.FormErrorExamples.formGroupName+"\n\n      Option 2:  Use a regular form tag instead of the formGroup directive (template-driven strategy):\n\n      "+o.FormErrorExamples.ngModelGroup)},TemplateDrivenErrors}();e.TemplateDrivenErrors=a},57:function(t,e){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";e.FormErrorExamples={formControlName:'\n    <div [formGroup]="myGroup">\n      <input formControlName="firstName">\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       firstName: new FormControl()\n    });',formGroupName:'\n    <div [formGroup]="myGroup">\n       <div formGroupName="person">\n          <input formControlName="firstName">\n       </div>\n    </div>\n\n    In your class:\n\n    this.myGroup = new FormGroup({\n       person: new FormGroup({ firstName: new FormControl() })\n    });',formArrayName:'\n    <div [formGroup]="myGroup">\n      <div formArrayName="cities">\n        <div *ngFor="let city of cityArray.controls; let i=index">\n          <input [formControlName]="i">\n        </div>\n      </div>\n    </div>\n\n    In your class:\n\n    this.cityArray = new FormArray([new FormControl(\'SF\')]);\n    this.myGroup = new FormGroup({\n      cities: this.cityArray\n    });',ngModelGroup:'\n    <form>\n       <div ngModelGroup="person">\n          <input [(ngModel)]="person.name" name="firstName">\n       </div>\n    </form>',ngModelWithFormGroup:'\n    <div [formGroup]="myGroup">\n       <input formControlName="firstName">\n       <input [(ngModel)]="showMoreControls" [ngModelOptions]="{standalone: true}">\n    </div>\n  '}},58:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},o=n(3),a=n(41),i=n(38),s=n(45),c=n(30),l=n(34),u=n(44);e.formControlBinding={provide:l.NgControl,useExisting:o.forwardRef(function(){return p})};var p=function(t){function FormControlDirective(e,n,r){t.call(this),this._validators=e,this._asyncValidators=n,this.update=new a.EventEmitter,this.valueAccessor=u.selectValueAccessor(this,r)}return r(FormControlDirective,t),FormControlDirective.prototype.ngOnChanges=function(t){this._isControlChanged(t)&&(u.setUpControl(this.form,this),this.form.updateValueAndValidity({emitEvent:!1})),u.isPropertyUpdated(t,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)},Object.defineProperty(FormControlDirective.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(FormControlDirective.prototype,"validator",{get:function(){return u.composeValidators(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(FormControlDirective.prototype,"asyncValidator",{get:function(){return u.composeAsyncValidators(this._asyncValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(FormControlDirective.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),FormControlDirective.prototype.viewToModelUpdate=function(t){this.viewModel=t,this.update.emit(t)},FormControlDirective.prototype._isControlChanged=function(t){return i.StringMapWrapper.contains(t,"form")},FormControlDirective.decorators=[{type:o.Directive,args:[{selector:"[formControl]",providers:[e.formControlBinding],exportAs:"ngForm"}]}],FormControlDirective.ctorParameters=[{type:Array,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[s.NG_VALIDATORS]}]},{type:Array,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[s.NG_ASYNC_VALIDATORS]}]},{type:Array,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[c.NG_VALUE_ACCESSOR]}]}],FormControlDirective.propDecorators={form:[{type:o.Input,args:["formControl"]}],model:[{type:o.Input,args:["ngModel"]}],update:[{type:o.Output,args:["ngModelChange"]}]},FormControlDirective}(l.NgControl);e.FormControlDirective=p},59:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},o=n(3),a=n(41),i=n(45),s=n(54),c=n(52),l=n(30),u=n(34),p=n(60),d=n(44),f=n(61),h=n(62);e.controlNameBinding={provide:u.NgControl,useExisting:o.forwardRef(function(){return g})};var g=function(t){function FormControlName(e,n,r,o){t.call(this),this._parent=e,this._validators=n,this._asyncValidators=r,this._added=!1,this.update=new a.EventEmitter,this.valueAccessor=d.selectValueAccessor(this,o)}return r(FormControlName,t),FormControlName.prototype.ngOnChanges=function(t){this._added||(this._checkParentType(),this.formDirective.addControl(this),this._added=!0),d.isPropertyUpdated(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))},FormControlName.prototype.ngOnDestroy=function(){this.formDirective.removeControl(this)},FormControlName.prototype.viewToModelUpdate=function(t){this.viewModel=t,this.update.emit(t)},Object.defineProperty(FormControlName.prototype,"path",{get:function(){return d.controlPath(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(FormControlName.prototype,"formDirective",{get:function(){return this._parent.formDirective},enumerable:!0,configurable:!0}),Object.defineProperty(FormControlName.prototype,"validator",{get:function(){return d.composeValidators(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(FormControlName.prototype,"asyncValidator",{get:function(){return d.composeAsyncValidators(this._asyncValidators)},enumerable:!0,configurable:!0}),Object.defineProperty(FormControlName.prototype,"control",{get:function(){return this.formDirective.getControl(this)},enumerable:!0,configurable:!0}),FormControlName.prototype._checkParentType=function(){!(this._parent instanceof h.FormGroupName)&&this._parent instanceof s.AbstractFormGroupDirective?p.ReactiveErrors.ngModelGroupException():this._parent instanceof h.FormGroupName||this._parent instanceof f.FormGroupDirective||this._parent instanceof h.FormArrayName||p.ReactiveErrors.controlParentException()},FormControlName.decorators=[{type:o.Directive,args:[{selector:"[formControlName]",providers:[e.controlNameBinding]}]}],FormControlName.ctorParameters=[{type:c.ControlContainer,decorators:[{type:o.Optional},{type:o.Host},{type:o.SkipSelf}]},{type:Array,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[i.NG_VALIDATORS]}]},{type:Array,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[i.NG_ASYNC_VALIDATORS]}]},{type:Array,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[l.NG_VALUE_ACCESSOR]}]}],FormControlName.propDecorators={name:[{type:o.Input,args:["formControlName"]}],model:[{type:o.Input,args:["ngModel"]}],update:[{type:o.Output,args:["ngModelChange"]}]},FormControlName}(u.NgControl);e.FormControlName=g},60:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=n(35),o=n(57),a=function(){function ReactiveErrors(){}return ReactiveErrors.controlParentException=function(){throw new r.BaseException("formControlName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+o.FormErrorExamples.formControlName)},ReactiveErrors.ngModelGroupException=function(){throw new r.BaseException('formControlName cannot be used with an ngModelGroup parent. It is only compatible with parents\n       that also have a "form" prefix: formGroupName, formArrayName, or formGroup.\n\n       Option 1:  Update the parent to be formGroupName (reactive form strategy)\n\n        '+o.FormErrorExamples.formGroupName+"\n\n        Option 2: Use ngModel instead of formControlName (template-driven strategy)\n\n        "+o.FormErrorExamples.ngModelGroup)},ReactiveErrors.missingFormException=function(){throw new r.BaseException("formGroup expects a FormGroup instance. Please pass one in.\n\n       Example:\n\n       "+o.FormErrorExamples.formControlName)},ReactiveErrors.groupParentException=function(){throw new r.BaseException("formGroupName must be used with a parent formGroup directive.  You'll want to add a formGroup\n      directive and pass it an existing FormGroup instance (you can create one in your class).\n\n      Example:\n\n      "+o.FormErrorExamples.formGroupName)},ReactiveErrors.arrayParentException=function(){throw new r.BaseException("formArrayName must be used with a parent formGroup directive.  You'll want to add a formGroup\n       directive and pass it an existing FormGroup instance (you can create one in your class).\n\n        Example:\n\n        "+o.FormErrorExamples.formArrayName)},ReactiveErrors}();e.ReactiveErrors=a},61:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},o=n(3),a=n(41),i=n(38),s=n(32),c=n(45),l=n(52),u=n(60),p=n(44);e.formDirectiveProvider={provide:l.ControlContainer,useExisting:o.forwardRef(function(){return d})};var d=function(t){function FormGroupDirective(e,n){t.call(this),this._validators=e,this._asyncValidators=n,this._submitted=!1,this.directives=[],this.form=null,this.ngSubmit=new a.EventEmitter}return r(FormGroupDirective,t),FormGroupDirective.prototype.ngOnChanges=function(t){if(this._checkFormPresent(),i.StringMapWrapper.contains(t,"form")){var e=p.composeValidators(this._validators);this.form.validator=c.Validators.compose([this.form.validator,e]);var n=p.composeAsyncValidators(this._asyncValidators);this.form.asyncValidator=c.Validators.composeAsync([this.form.asyncValidator,n]),this.form.updateValueAndValidity({onlySelf:!0,emitEvent:!1})}this._updateDomValue()},Object.defineProperty(FormGroupDirective.prototype,"submitted",{get:function(){return this._submitted},enumerable:!0,configurable:!0}),Object.defineProperty(FormGroupDirective.prototype,"formDirective",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(FormGroupDirective.prototype,"control",{get:function(){return this.form},enumerable:!0,configurable:!0}),Object.defineProperty(FormGroupDirective.prototype,"path",{get:function(){return[]},enumerable:!0,configurable:!0}),FormGroupDirective.prototype.addControl=function(t){var e=this.form.get(t.path);p.setUpControl(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t)},FormGroupDirective.prototype.getControl=function(t){return this.form.get(t.path)},FormGroupDirective.prototype.removeControl=function(t){i.ListWrapper.remove(this.directives,t)},FormGroupDirective.prototype.addFormGroup=function(t){var e=this.form.get(t.path);p.setUpFormContainer(e,t),e.updateValueAndValidity({emitEvent:!1})},FormGroupDirective.prototype.removeFormGroup=function(t){},FormGroupDirective.prototype.getFormGroup=function(t){return this.form.get(t.path)},FormGroupDirective.prototype.addFormArray=function(t){var e=this.form.get(t.path);p.setUpFormContainer(e,t),e.updateValueAndValidity({emitEvent:!1})},FormGroupDirective.prototype.removeFormArray=function(t){},FormGroupDirective.prototype.getFormArray=function(t){return this.form.get(t.path)},FormGroupDirective.prototype.updateModel=function(t,e){var n=this.form.get(t.path);n.setValue(e)},FormGroupDirective.prototype.onSubmit=function(){return this._submitted=!0,this.ngSubmit.emit(null),!1},FormGroupDirective.prototype.onReset=function(){this.form.reset()},FormGroupDirective.prototype._updateDomValue=function(){var t=this;this.directives.forEach(function(e){var n=t.form.get(e.path);e.valueAccessor.writeValue(n.value)})},FormGroupDirective.prototype._checkFormPresent=function(){s.isBlank(this.form)&&u.ReactiveErrors.missingFormException()},FormGroupDirective.decorators=[{type:o.Directive,args:[{selector:"[formGroup]",providers:[e.formDirectiveProvider],host:{"(submit)":"onSubmit()","(reset)":"onReset()"},exportAs:"ngForm"}]}],FormGroupDirective.ctorParameters=[{type:Array,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[c.NG_VALIDATORS]}]},{type:Array,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[c.NG_ASYNC_VALIDATORS]}]}],FormGroupDirective.propDecorators={form:[{type:o.Input,args:["formGroup"]}],ngSubmit:[{type:o.Output}]},FormGroupDirective}(l.ControlContainer);e.FormGroupDirective=d},62:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";function _hasInvalidParent(t){return!(t instanceof p||t instanceof u.FormGroupDirective||t instanceof d)}var r=this&&this.__extends||function(t,e){function __(){this.constructor=t}for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.prototype=null===e?Object.create(e):(__.prototype=e.prototype,new __)},o=n(3),a=n(45),i=n(54),s=n(52),c=n(60),l=n(44),u=n(61);e.formGroupNameProvider={provide:s.ControlContainer,useExisting:o.forwardRef(function(){return p})};var p=function(t){function FormGroupName(e,n,r){t.call(this),this._parent=e,this._validators=n,this._asyncValidators=r}return r(FormGroupName,t),FormGroupName.prototype._checkParentType=function(){_hasInvalidParent(this._parent)&&c.ReactiveErrors.groupParentException()},FormGroupName.decorators=[{type:o.Directive,args:[{selector:"[formGroupName]",providers:[e.formGroupNameProvider]}]}],FormGroupName.ctorParameters=[{type:s.ControlContainer,decorators:[{type:o.Optional},{type:o.Host},{type:o.SkipSelf}]},{type:Array,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[a.NG_VALIDATORS]}]},{type:Array,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[a.NG_ASYNC_VALIDATORS]}]}],FormGroupName.propDecorators={name:[{type:o.Input,args:["formGroupName"]}]},FormGroupName}(i.AbstractFormGroupDirective);e.FormGroupName=p,e.formArrayNameProvider={provide:s.ControlContainer,useExisting:o.forwardRef(function(){return d})};var d=function(t){function FormArrayName(e,n,r){t.call(this),this._parent=e,this._validators=n,this._asyncValidators=r}return r(FormArrayName,t),FormArrayName.prototype.ngOnInit=function(){this._checkParentType(),this.formDirective.addFormArray(this)},FormArrayName.prototype.ngOnDestroy=function(){this.formDirective.removeFormArray(this)},Object.defineProperty(FormArrayName.prototype,"control",{get:function(){return this.formDirective.getFormArray(this)},enumerable:!0,configurable:!0}),Object.defineProperty(FormArrayName.prototype,"formDirective",{get:function(){return this._parent.formDirective},enumerable:!0,configurable:!0}),Object.defineProperty(FormArrayName.prototype,"path",{get:function(){return l.controlPath(this.name,this._parent)},enumerable:!0,configurable:!0}),Object.defineProperty(FormArrayName.prototype,"validator",{get:function(){return l.composeValidators(this._validators)},enumerable:!0,configurable:!0}),Object.defineProperty(FormArrayName.prototype,"asyncValidator",{get:function(){return l.composeAsyncValidators(this._asyncValidators)},enumerable:!0,configurable:!0}),FormArrayName.prototype._checkParentType=function(){_hasInvalidParent(this._parent)&&c.ReactiveErrors.arrayParentException()},FormArrayName.decorators=[{type:o.Directive,args:[{selector:"[formArrayName]",providers:[e.formArrayNameProvider]}]}],FormArrayName.ctorParameters=[{type:s.ControlContainer,decorators:[{type:o.Optional},{type:o.Host},{type:o.SkipSelf}]},{type:Array,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[a.NG_VALIDATORS]}]},{type:Array,decorators:[{type:o.Optional},{type:o.Self},{type:o.Inject,args:[a.NG_ASYNC_VALIDATORS]}]}],FormArrayName.propDecorators={name:[{type:o.Input,args:["formArrayName"]}]},FormArrayName}(s.ControlContainer);e.FormArrayName=d},63:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=n(3),o=n(32),a=n(45);e.REQUIRED=a.Validators.required,e.REQUIRED_VALIDATOR={provide:a.NG_VALIDATORS,useValue:e.REQUIRED,multi:!0};var i=function(){function RequiredValidator(){}return RequiredValidator.decorators=[{type:r.Directive,args:[{selector:"[required][formControlName],[required][formControl],[required][ngModel]",providers:[e.REQUIRED_VALIDATOR]}]}],RequiredValidator}();e.RequiredValidator=i,e.MIN_LENGTH_VALIDATOR={provide:a.NG_VALIDATORS,useExisting:r.forwardRef(function(){return s}),multi:!0};var s=function(){function MinLengthValidator(t){this._validator=a.Validators.minLength(o.NumberWrapper.parseInt(t,10))}return MinLengthValidator.prototype.validate=function(t){return this._validator(t)},MinLengthValidator.decorators=[{type:r.Directive,args:[{selector:"[minlength][formControlName],[minlength][formControl],[minlength][ngModel]",providers:[e.MIN_LENGTH_VALIDATOR]}]}],MinLengthValidator.ctorParameters=[{type:void 0,decorators:[{type:r.Attribute,args:["minlength"]}]}],MinLengthValidator}();e.MinLengthValidator=s,e.MAX_LENGTH_VALIDATOR={provide:a.NG_VALIDATORS,useExisting:r.forwardRef(function(){return c}),multi:!0};var c=function(){function MaxLengthValidator(t){this._validator=a.Validators.maxLength(o.NumberWrapper.parseInt(t,10))}return MaxLengthValidator.prototype.validate=function(t){return this._validator(t)},MaxLengthValidator.decorators=[{type:r.Directive,args:[{selector:"[maxlength][formControlName],[maxlength][formControl],[maxlength][ngModel]",providers:[e.MAX_LENGTH_VALIDATOR]}]}],MaxLengthValidator.ctorParameters=[{type:void 0,decorators:[{type:r.Attribute,args:["maxlength"]}]}],MaxLengthValidator}();e.MaxLengthValidator=c,e.PATTERN_VALIDATOR={provide:a.NG_VALIDATORS,useExisting:r.forwardRef(function(){return l}),multi:!0};var l=function(){function PatternValidator(t){this._validator=a.Validators.pattern(t)}return PatternValidator.prototype.validate=function(t){return this._validator(t)},PatternValidator.decorators=[{type:r.Directive,args:[{selector:"[pattern][formControlName],[pattern][formControl],[pattern][ngModel]",providers:[e.PATTERN_VALIDATOR]}]}],PatternValidator.ctorParameters=[{type:void 0,decorators:[{type:r.Attribute,args:["pattern"]}]}],PatternValidator}();e.PatternValidator=l},64:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";var r=n(3),o=n(38),a=n(32),i=n(42),s=function(){function FormBuilder(){}return FormBuilder.prototype.group=function(t,e){void 0===e&&(e=null);var n=this._reduceControls(t),r=a.isPresent(e)?o.StringMapWrapper.get(e,"optionals"):null,s=a.isPresent(e)?o.StringMapWrapper.get(e,"validator"):null,c=a.isPresent(e)?o.StringMapWrapper.get(e,"asyncValidator"):null;return new i.FormGroup(n,r,s,c)},FormBuilder.prototype.control=function(t,e,n){return void 0===e&&(e=null),void 0===n&&(n=null),new i.FormControl(t,e,n)},FormBuilder.prototype.array=function(t,e,n){var r=this;void 0===e&&(e=null),void 0===n&&(n=null);var o=t.map(function(t){return r._createControl(t)});return new i.FormArray(o,e,n)},FormBuilder.prototype._reduceControls=function(t){var e=this,n={};return o.StringMapWrapper.forEach(t,function(t,r){n[r]=e._createControl(t)}),n},FormBuilder.prototype._createControl=function(t){if(t instanceof i.FormControl||t instanceof i.FormGroup||t instanceof i.FormArray)return t;if(a.isArray(t)){var e=t[0],n=t.length>1?t[1]:null,r=t.length>2?t[2]:null;return this.control(e,n,r)}return this.control(t)},FormBuilder.decorators=[{type:r.Injectable}],FormBuilder}();e.FormBuilder=s},65:function(t,e,n){/**
	 * @license
	 * Copyright Google Inc. All Rights Reserved.
	 *
	 * Use of this source code is governed by an MIT-style license that can be
	 * found in the LICENSE file at https://angular.io/license
	 */
"use strict";function disableDeprecatedForms(){return[]}function provideForms(){return[{provide:r.PLATFORM_DIRECTIVES,useValue:o.FORM_DIRECTIVES,multi:!0},e.REACTIVE_FORM_PROVIDERS]}var r=n(3),o=n(28),a=n(49),i=n(64);e.FORM_PROVIDERS=[a.RadioControlRegistry],e.REACTIVE_FORM_PROVIDERS=[i.FormBuilder,a.RadioControlRegistry];var s=function(){function FormsModule(){}return FormsModule.decorators=[{type:r.NgModule,args:[{declarations:o.TEMPLATE_DRIVEN_DIRECTIVES,providers:[e.FORM_PROVIDERS],exports:[o.InternalFormsSharedModule,o.TEMPLATE_DRIVEN_DIRECTIVES]}]}],FormsModule}();e.FormsModule=s;var c=function(){function ReactiveFormsModule(){}return ReactiveFormsModule.decorators=[{type:r.NgModule,args:[{declarations:[o.REACTIVE_DRIVEN_DIRECTIVES],providers:[e.REACTIVE_FORM_PROVIDERS],exports:[o.InternalFormsSharedModule,o.REACTIVE_DRIVEN_DIRECTIVES]}]}],ReactiveFormsModule}();e.ReactiveFormsModule=c,e.disableDeprecatedForms=disableDeprecatedForms,e.provideForms=provideForms},66:function(t,e,n){"use strict";function __export(t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(25),s=n(67),c=n(68);__export(n(67)),__export(n(68)),__export(n(92)),Object.defineProperty(e,"__esModule",{value:!0}),e["default"]={pipes:[s.TranslatePipe],providers:[c.TranslateService]};var l=function(){function TranslateModule(){}return TranslateModule.forRoot=function(t){return void 0===t&&(t={provide:c.TranslateLoader,useFactory:function(t){return new c.TranslateStaticLoader(t)},deps:[i.Http]}),{ngModule:TranslateModule,providers:[t,c.TranslateService]}},TranslateModule=r([a.NgModule({imports:[i.HttpModule],declarations:[s.TranslatePipe],exports:[i.HttpModule,s.TranslatePipe]}),o("design:paramtypes",[])],TranslateModule)}();e.TranslateModule=l},67:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(68),s=function(){function TranslatePipe(t,e){this.translate=t,this._ref=e,this.value=""}return TranslatePipe.prototype.equals=function(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!==t&&e!==e)return!0;var n,r,o,a=typeof t,i=typeof e;if(a==i&&"object"==a){if(!Array.isArray(t)){if(Array.isArray(e))return!1;o=Object.create(null);for(r in t){if(!this.equals(t[r],e[r]))return!1;o[r]=!0}for(r in e)if(!(r in o)&&"undefined"!=typeof e[r])return!1;return!0}if(!Array.isArray(e))return!1;if((n=t.length)==e.length){for(r=0;r<n;r++)if(!this.equals(t[r],e[r]))return!1;return!0}}return!1},TranslatePipe.prototype.updateValue=function(t,e){var n=this;this.translate.get(t,e).subscribe(function(e){n.value=e?e:t,n.lastKey=t,n._ref.markForCheck()})},TranslatePipe.prototype.transform=function(t){for(var e=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];if(!t||0===t.length)return t;if(this.equals(t,this.lastKey)&&this.equals(n,this.lastParams))return this.value;var o;if(n.length&&null!==n[0])if("string"==typeof n[0]&&n[0].length)try{o=JSON.parse(n[0].replace(/(['"])?([a-zA-Z0-9_]+)(['"])?:/g,'"$2": '))}catch(a){throw new SyntaxError("Wrong parameter in TranslatePipe. Expected a valid Object, received: "+n[0])}else"object"!=typeof n[0]||Array.isArray(n[0])||(o=n[0]);return this.lastKey=t,this.lastParams=n,this.updateValue(t,o),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(function(n){e.lastKey&&n.lang===e.translate.currentLang&&(e.lastKey=null,e.updateValue(t,o))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(function(n){e.lastKey&&(e.lastKey=null,e.updateValue(t,o))})),this.value},TranslatePipe.prototype._dispose=function(){"undefined"!=typeof this.onTranslationChange&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),"undefined"!=typeof this.onLangChange&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0)},TranslatePipe.prototype.ngOnDestroy=function(){this._dispose()},TranslatePipe=r([a.Injectable(),a.Pipe({name:"translate",pure:!1}),o("design:paramtypes",[i.TranslateService,a.ChangeDetectorRef])],TranslatePipe)}();e.TranslatePipe=s},68:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=this&&this.__param||function(t,e){return function(n,r){e(n,r,t)}},i=n(3),s=n(5);n(69),n(75),n(80),n(82),n(90);var c=n(92),l=function(){function MissingTranslationHandler(){}return MissingTranslationHandler}();e.MissingTranslationHandler=l;var u=function(){function TranslateLoader(){}return TranslateLoader}();e.TranslateLoader=u;var p=function(){function TranslateStaticLoader(t,e,n){void 0===e&&(e="i18n"),void 0===n&&(n=".json"),this.http=t,this.prefix=e,this.suffix=n}return TranslateStaticLoader.prototype.getTranslation=function(t){return this.http.get(this.prefix+"/"+t+this.suffix).map(function(t){return t.json()})},TranslateStaticLoader}();e.TranslateStaticLoader=p;var d=function(){function TranslateService(t,e){this.currentLoader=t,this.missingTranslationHandler=e,this.currentLang=this.defaultLang,this.onTranslationChange=new i.EventEmitter,this.onLangChange=new i.EventEmitter,this.translations={},this.langs=[],this.parser=new c.Parser}return TranslateService.prototype.setDefaultLang=function(t){this.defaultLang=t},TranslateService.prototype.use=function(t){var e,n=this;return"undefined"==typeof this.translations[t]&&(e=this.getTranslation(t)),"undefined"!=typeof e?(this.currentLang||(this.currentLang=t),e.subscribe(function(e){n.changeLang(t)}),e):(this.changeLang(t),s.Observable.of(this.translations[t]))},TranslateService.prototype.getTranslation=function(t){var e=this;return this.pending=this.currentLoader.getTranslation(t).share(),this.pending.subscribe(function(n){e.translations[t]=n,e.updateLangs()},function(t){throw t},function(){e.pending=void 0}),this.pending},TranslateService.prototype.setTranslation=function(t,e,n){void 0===n&&(n=!1),n&&this.translations[t]?(Object.assign(this.translations[t],e),this.onTranslationChange.emit({translations:e,lang:t})):this.translations[t]=e,this.updateLangs()},TranslateService.prototype.getLangs=function(){return this.langs},TranslateService.prototype.addLangs=function(t){var e=this;t.forEach(function(t){e.langs.indexOf(t)===-1&&e.langs.push(t)})},TranslateService.prototype.updateLangs=function(){this.addLangs(Object.keys(this.translations))},TranslateService.prototype.getParsedResult=function(t,e,n){var r;if(e instanceof Array){for(var o={},a=!1,i=0,c=e;i<c.length;i++){var l=c[i];o[l]=this.getParsedResult(t,l,n),"function"==typeof o[l].subscribe&&(a=!0)}if(a){for(var u=void 0,p=0,d=e;p<d.length;p++){var l=d[p],f="function"==typeof o[l].subscribe?o[l]:s.Observable.of(o[l]);u="undefined"==typeof u?f:u.merge(f)}return u.toArray().map(function(t){var n={};return t.forEach(function(t,r){n[e[r]]=t}),n})}return o}return t&&(r=this.parser.interpolate(this.parser.getValue(t,e),n)),"undefined"==typeof r&&this.defaultLang&&this.defaultLang!==this.currentLang&&(r=this.parser.interpolate(this.parser.getValue(this.translations[this.defaultLang],e),n)),!r&&this.missingTranslationHandler&&(r=this.missingTranslationHandler.handle(e)),r||e},TranslateService.prototype.get=function(t,e){var n=this;if(!t)throw new Error('Parameter "key" required');if(this.pending)return s.Observable.create(function(r){var o=function(t){r.next(t),r.complete()};n.pending.subscribe(function(r){r=n.getParsedResult(r,t,e),"function"==typeof r.subscribe?r.subscribe(o):o(r)})});var r=this.getParsedResult(this.translations[this.currentLang],t,e);return"function"==typeof r.subscribe?r:s.Observable.of(r)},TranslateService.prototype.instant=function(t,e){if(!t)throw new Error('Parameter "key" required');var n=this.getParsedResult(this.translations[this.currentLang],t,e);if("undefined"!=typeof n.subscribe){if(t instanceof Array){var r={};return t.forEach(function(e,n){r[t[n]]=t[n]}),r}return t}return n},TranslateService.prototype.set=function(t,e,n){void 0===n&&(n=this.currentLang),this.translations[n][t]=e,this.updateLangs(),this.onTranslationChange.emit({translations:(r={},r[t]=e,r),lang:n});var r},TranslateService.prototype.changeLang=function(t){this.currentLang=t,this.onLangChange.emit({lang:t,translations:this.translations[t]})},TranslateService.prototype.reloadLang=function(t){return this.resetLang(t),this.getTranslation(t)},TranslateService.prototype.resetLang=function(t){this.translations[t]=void 0},TranslateService.prototype.getBrowserLang=function(){if("undefined"!=typeof window&&"undefined"!=typeof window.navigator){var t;return t="undefined"!=typeof window.navigator.languages&&window.navigator.languages.length>0?window.navigator.languages[0].indexOf("-")!==-1||window.navigator.languages.length<2?window.navigator.languages[0]:window.navigator.languages[1]:window.navigator.language||window.navigator.browserLanguage,t&&t.length?t.split("-")[0]:void 0}},TranslateService=r([i.Injectable(),a(1,i.Optional()),o("design:paramtypes",[u,l])],TranslateService)}();e.TranslateService=d},92:function(t,e){"use strict";var n=function(){function Parser(){this.templateMatcher=/{{\s?([^{}\s]*)\s?}}/g}return Parser.prototype.interpolate=function(t,e){var n=this;return"string"==typeof t&&e?t.replace(this.templateMatcher,function(t,r){var o=n.getValue(e,r);return"undefined"!=typeof o?o:t}):t},Parser.prototype.getValue=function(t,e){var n=e.split(".");e="";do e+=n.shift(),void 0===t||void 0===t[e]||"object"!=typeof t[e]&&n.length?n.length?e+=".":t=void 0:(t=t[e],e="");while(n.length);return t},Parser}();e.Parser=n},402:function(t,e,n){"use strict";var r=n(403),o=n(404),a=n(408),i=n(409),s=n(410),c=n(411),l=n(412),u=n(413),p=n(414),d=n(415),f=n(416),h=n(417),g=n(418),m=n(419),y=n(420),v=n(421),b=n(422),_=[{path:"",component:o.Logging},{path:"end",component:m.Logginglight},{path:"llight",component:m.Logginglight},{path:"profile",component:a.Profile,canActivate:[b.Profileguard]},{path:"profile/eidok",component:a.Profile,canActivate:[b.Profileguard]},{path:"user/:id",component:y.User,canActivate:[b.Profileguard]},{path:"user/:id/:ret",component:y.User,canActivate:[b.Profileguard]},{path:"filesystem/:mode",component:u.Filesystem,canActivate:[b.Profileguard],canDeactivate:[b.Profileguard]},{path:"data/:name",component:i.Dataview,canActivate:[b.Fullguard],canDeactivate:[b.Fullguard]},{path:"vault/:username/:id",component:s.Vaultview,canActivate:[b.Fullguard]},{path:"password-help/:id/:data_name",component:d.Resethelp,canActivate:[b.Profileguard]},{path:"password-recovery/:id/:pwd",component:c.Reset},{path:"save-key/:key/:value/:is_dated/:return_url",component:l.Savekey,canActivate:[b.Fullguard]},{path:"oauth/:for_id/:prefix/:token/:return_url_ok/:return_url_deny",component:p.Oauth,canActivate:[b.Profileguard]},{path:"account/:id_to/:return_url_ok/:return_url_deny/:with_account",component:f.Account,canActivate:[b.Profileguard]},{path:"account/:id_to/:return_url_ok/:return_url_deny/:with_account/:data_list/:expire_epoch",component:f.Account,canActivate:[b.Profileguard]},{path:"account/:id_to/:return_url_ok/:return_url_deny/:with_account/:data_list/:expire_epoch/:trigger",component:f.Account,canActivate:[b.Profileguard]},{path:"remote/:id_to/:challenge/:return_url",component:h.Remote,canActivate:[b.Profileguard]},{path:"generics",component:g.Generics,canActivate:[b.Fullguard],canDeactivate:[b.Fullguard]},{path:"**",component:v.Notfound}];e.appRoutingProviders=[],e.routing=r.RouterModule.forRoot(_)},404:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(403),s=n(66),c=n(93),l=n(405),u=n(406);a.enableProdMode();var p=function(){function Logging(t,e,n,r,o){this.translate=t,this.backend=e,this.router=n,this.notif=r,this.dataservice=o,this.persistent=!1,this.recuperable=!0,this.safe=!1,this.use_pwd=!0}return Logging.prototype.ngOnInit=function(t){var e=this;"token"in localStorage&&this.backend.getProfile().then(function(n){e.backend.profile=n,t&&(localStorage.setItem("key_decryption",window.sha256(e.password+n.salt)),localStorage.setItem("psha",window.sha256(e.password))),e.router.navigate(["/profile"])},function(t){localStorage.removeItem("token")})},Logging.prototype.enter=function(){var t=this;this.backend.createToken(this.username,this.password,this.persistent).then(function(e){localStorage.setItem("token",e._id),t.ngOnInit(!0)},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("login.noLogin"))})},Logging.prototype.signUp=function(){function safe(){t.dataservice.newData("keys/pwd/mine1",t.password.slice(0,4),!1).then(function(){t.dataservice.newData("keys/pwd/mine2",t.password.slice(4),!1).then(function(){t.safe?t.dataservice.grantVault("whigi-restore","keys/pwd/mine1","keys/pwd/mine1",t.password.slice(0,4),new Date(0)).then(function(){t.dataservice.grantVault("whigi-restore","profile/recup_id","profile/recup_id",t.recup_id,new Date(0)).then(function(){t.dataservice.grantVault(t.recup_id,"keys/pwd/mine2","keys/pwd/mine2",t.password.slice(4),new Date(0)).then(function(){t.notif.success(t.translate.instant("success"),t.translate.instant("login.sent")),t.logout()},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("login.noSignup")),t.logout()})},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("login.noSignup")),t.logout()})},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("login.noSignup")),t.logout()}):t.dataservice.grantVault("whigi-restore","keys/pwd/mine1","keys/pwd/mine1",t.password.slice(0,4),new Date(0)).then(function(){t.dataservice.grantVault("whigi-restore","keys/pwd/mine2","keys/pwd/mine2",t.password.slice(4),new Date(0)).then(function(){t.notif.success(t.translate.instant("success"),t.translate.instant("login.sent")),t.logout()},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("login.noSignup")),t.logout()})},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("login.noSignup")),t.logout()})},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("login.noSignup")),t.logout()})},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("login.noSignup")),t.logout()})}function complete(){t.backend.createUser(t.username,t.password).then(function(){t.backend.createToken(t.username,t.password,!1).then(function(e){localStorage.setItem("token",e._id),t.backend.getProfile().then(function(e){t.backend.profile=e,localStorage.setItem("key_decryption",window.sha256(t.password+e.salt)),localStorage.setItem("psha",window.sha256(t.password)),t.dataservice.listData().then(function(){t.dataservice.newData("profile/email/restore",t.email,!1,!0).then(function(e){t.dataservice.newData("profile/recup_id",t.recup_id,!1,!0).then(function(e){t.recuperable?t.dataservice.grantVault("whigi-restore","profile/email/restore","profile/email/restore",t.email,new Date(0)).then(function(){safe()},function(){t.notif.error(t.translate.instant("error"),t.translate.instant("login.noSignup")),t.logout()}):(t.notif.success(t.translate.instant("success"),t.translate.instant("login.sent")),t.logout())},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("login.noSignup")),t.logout()})},function(){t.notif.error(t.translate.instant("error"),t.translate.instant("login.noSignup")),t.logout()})})},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("login.noSignup")),t.logout()})},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("login.noSignup"))})},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("login.noSignup"))})}var t=this;if(this.password.length<8||/whigi/i.test(this.username))return void t.notif.error(t.translate.instant("error"),t.translate.instant("login.noMatch"));if(this.password==this.password2){if(!/^([\w-]+(?:\.[\w-]+)*)@(.)+\.(.+)$/i.test(this.email))return void t.notif.error(t.translate.instant("error"),t.translate.instant("login.noMatch"));this.safe&&this.recuperable?this.backend.peekUser(this.recup_id).then(function(){complete()},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("filesystem.noUser"))}):complete()}else t.notif.error(t.translate.instant("error"),t.translate.instant("login.noMatch"))},Logging.prototype.forgot=function(){var t=this;this.backend.requestRestore(this.username).then(function(){t.notif.success(t.translate.instant("success"),t.translate.instant("login.sent"))},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("login.noReset"))})},Logging.prototype.logout=function(){var t=this;this.backend.removeTokens(!1).then(function(){localStorage.removeItem("token"),localStorage.removeItem("key_decryption"),localStorage.removeItem("psha"),t.backend.forceReload(),delete t.backend.profile},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("profile.noLogout"))})},Logging.prototype.fileLoad=function(t){var e=this,n=t.target.files[0],r=new FileReader;r.onloadend=function(t){/^data:;base64,/.test(r.result)?e.password=atob(r.result.split(",")[1]):e.password=r.result,e.password2=e.password},r.readAsText(n)},Logging=r([a.Component({template:'\n        <!-- Full Width Image Header -->\n            <header class="header-image">\n                <div class="headline">\n                    <div class="container-fluid">\n                        <h1>{{ \'login.whigi\' | translate }}</h1>\n                        <h2>{{ \'login.explain\' | translate }}</h2>\n                    </div>\n                </div>\n            </header>\n\n            <!-- Page Content -->\n            <div class="container">\n\n                <hr class="featurette-divider">\n\n                <!-- First Featurette -->\n                <div class="featurette" id="about">\n                    <img class="featurette-image img-circle img-responsive pull-right" src="images/ball.jpg">\n                    <h2 class="featurette-heading">{{ \'login.title\' | translate }}\n                        <span class="text-muted">{{ \'login.titleMuted\' | translate }}</span>\n                    </h2>\n                    <div class="col-sm-4">\n                        <form class="form-signin">\n                            <div class="form-group">\n                                {{ \'login.username\' | translate }}<br />\n                                <input type="text" [(ngModel)]="username" name="n0" class="form-control" required>\n                            </div>\n                            <div class="checkbox">\n                                <label><input type="checkbox" name="n90" [(ngModel)]="use_pwd" checked> {{ \'login.use_pwd\' | translate }}</label>\n                            </div>\n                            <div class="form-group">\n                                {{ \'login.password\' | translate }}<br />\n                                <input type="password" [(ngModel)]="password" name="n1" class="form-control" [disabled]="!use_pwd" required>\n                            </div>\n                            <div class="form-group">\n                                {{ \'login.password_file\' | translate }}<br />\n                                <input type="file" (change)="fileLoad($event)" name="n50" class="form-control" [disabled]="use_pwd" required>\n                            </div>\n                            <div class="form-group">\n                                <div class="checkbox">\n                                    <label><input type="checkbox" name="n2" [(ngModel)]="persistent"> {{ \'login.remember\' | translate }}</label>\n                                </div>\n                                <button type="submit" class="btn btn-primary" (click)="enter()">{{ \'login.goOn\' | translate }}</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n\n                <hr class="featurette-divider">\n\n                <!-- Second Featurette -->\n                <div class="featurette" id="services">\n                    <img class="featurette-image img-circle img-responsive pull-right" src="images/ball.jpg">\n                    <h2 class="featurette-heading">{{ \'login.forgot\' | translate }}</h2>\n                    <div class="col-sm-4">\n                        <form class="form-signin">\n                            <div class="form-group">\n                                {{ \'login.id\' | translate }}<br />\n                                <input type="text" [(ngModel)]="username" name="n10" class="form-control" required>\n                            </div>\n                            <div class="form-group">\n                                <button type="submit" class="btn btn-primary" (click)="forgot()">{{ \'login.sendForgot\' | translate }}</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n\n                <hr class="featurette-divider">\n\n                <!-- Third Featurette -->\n                <div class="featurette" id="contact">\n                    <img class="featurette-image img-circle img-responsive pull-right" src="images/ball.jpg">\n                    <h2 class="featurette-heading">{{ \'login.register\' | translate }}</h2>\n                    <div class="col-sm-4">\n                        <form class="form-signin">\n                            <div class="form-group">\n                                {{ \'login.usernameRec\' | translate }}<br />\n                                <input type="text" [(ngModel)]="username" name="n3" class="form-control" required>\n                            </div>\n                            <div class="checkbox">\n                                <label><input type="checkbox" name="n90" [(ngModel)]="use_pwd" checked> {{ \'login.use_pwd\' | translate }}</label>\n                            </div>\n                            <div class="form-group">\n                                {{ \'login.password\' | translate }}<br />\n                                <input type="password" [(ngModel)]="password" name="n4" class="form-control" [disabled]="!use_pwd" required>\n                            </div>\n                            <div class="form-group">\n                                {{ \'login.password\' | translate }}<br />\n                                <input type="password" [(ngModel)]="password2" name="n5" class="form-control" [disabled]="!use_pwd" required>\n                            </div>\n                            <div class="form-group">\n                                {{ \'login.password_file\' | translate }}<br />\n                                <input type="file" (change)="fileLoad($event)" name="n50" class="form-control" [disabled]="use_pwd" required>\n                            </div>\n                            <div class="form-group">\n                                {{ \'login.email\' | translate }}<br />\n                                <input type="text" [(ngModel)]="email" name="n6" class="form-control" required>\n                            </div>\n                            <div class="form-group">\n                                <div class="checkbox">\n                                    <label><input type="checkbox" name="n9" [(ngModel)]="recuperable" checked> {{ \'login.recuperable\' | translate }}</label>\n                                </div>\n                                <div class="checkbox">\n                                    <label><input type="checkbox" name="n10" [(ngModel)]="safe"> {{ \'login.safe\' | translate }}</label>\n                                </div>\n                                <input type="text" [(ngModel)]="recup_id" name="n11" class="form-control" [readonly]="!recuperable || !safe">\n                            </div>\n                            <div class="form-group">\n                                <div id="grecaptcha" class="g-recaptcha" data-sitekey="6LfleigTAAAAALOtJgNBGWu4A0ZiHRvetRorXkDx"></div>\n                                <button type="submit" class="btn btn-primary" (click)="signUp()">{{ \'login.send\' | translate }}</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n\n                <hr class="featurette-divider">\n\n                <!-- Footer -->\n                <footer>\n                    <div class="row">\n                        <div class="col-lg-12">\n                            <p>{{ \'login.mention\' | translate }}</p>\n                        </div>\n                    </div>\n                </footer>\n\n            </div>\n            <!-- /.container -->\n    '}),o("design:paramtypes",[s.TranslateService,l.Backend,i.Router,c.NotificationsService,u.Data])],Logging)}();e.Logging=p},405:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(25),s=n(403),c=n(93),l=n(66),u=function(){function Backend(t,e,n,r){this.http=t,this.notif=e,this.translate=n,this.router=r,this.EID_HOST="192.168.1.61/api/v1/eid",this.BASE_URL="https://192.168.1.61/api/v1/",this.RESTORE_URL="https://192.168.1.61/api/v1/";var o=this;this.data_loaded=!1,this.rsa_key=[],this.backend(!0,"GET",{},"generics.json",!1,!1).then(function(t){o.generics=t})}return Backend.prototype.toBytes=function(t){function num(t){return t>=65?t-55:t-48}var e=[];try{for(var n=0;n<32;n++)e.push((16*num(t.charCodeAt(2*n))+num(t.charCodeAt(2*n+1)))%256)}catch(r){return e}return e},Backend.prototype.arr2str=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return e},Backend.prototype.str2arr=function(t){for(var e=[],n=0;n<t.length;n++)e.push(window.parseInt(t.charCodeAt(n).toString(10)));return e},Backend.prototype.generateRandomString=function(t){for(var e="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n="",r=0;r<t;r++)n+=e[Math.floor(Math.random()*e.length)];return n},Backend.prototype.decryptMaster=function(){try{var t=this.toBytes(localStorage.getItem("key_decryption")),e=new window.aesjs.ModeOfOperation.ctr(t,new window.aesjs.Counter(0));this.master_key=e.decrypt(this.profile.encr_master_key);for(var n=0;n<this.profile.rsa_pri_key.length;n++)e=new window.aesjs.ModeOfOperation.ctr(this.master_key,new window.aesjs.Counter(0)),this.rsa_key[n]=window.aesjs.util.convertBytesToString(e.decrypt(this.profile.rsa_pri_key[n]))}catch(r){this.notif.alert(this.translate.instant("error"),this.translate.instant("noKey"))}},Backend.prototype.newAES=function(){return this.toBytes(this.generateRandomString(64))},Backend.prototype.encryptMasterAES=function(t,e,n){return new window.aesjs.ModeOfOperation.ctr(this.toBytes(window.sha256(t+e)),new window.aesjs.Counter(0)).encrypt(this.toBytes(n))},Backend.prototype.encryptMasterAESAsNumber=function(t,e,n){return new window.aesjs.ModeOfOperation.ctr(this.toBytes(window.sha256(t+e)),new window.aesjs.Counter(0)).encrypt(n)},Backend.prototype.encryptAES=function(t,e,n){this.master_key||n||this.decryptMaster(),n=n||this.master_key;var r=new Worker("/js/worker.js");return r.onmessage=e,r.postMessage([t,n,!0]),r},Backend.prototype.decryptAES=function(t,e,n){this.master_key||n||this.decryptMaster(),n=n||this.master_key;var r=new Worker("/js/worker.js");return r.onmessage=e,r.postMessage([t,n,!1]),r},Backend.prototype.encryptRSA=function(t,e){var n=new window.JSEncrypt.JSEncrypt;return n.setPublicKey(e),n.encrypt(this.arr2str(t))},Backend.prototype.decryptRSA=function(t){0==this.rsa_key.length&&this.decryptMaster();for(var e=new window.JSEncrypt.JSEncrypt,n=0;n<this.rsa_key.length;n++)try{return e.setPrivateKey(this.rsa_key[n]),e=e.decrypt(t),this.str2arr(e)}catch(r){}},Backend.prototype.forceReload=function(){delete this.master_key,this.rsa_key=[]},Backend.prototype.recordPuzzle=function(t){try{var e=t.json()||{};t.msg=e.error||"","puzzle"in e&&localStorage.setItem("puzzle",e.puzzle)}catch(t){}},Backend.prototype.backend=function(t,e,n,r,o,a,s,c,l,u){function accept(t,e){var n=e.json();"puzzle"in n&&localStorage.setItem("puzzle",n.puzzle),t(n)}function retry(i,c,l){d.recordPuzzle(i),412==i.status&&u<4?d.backend(t,e,n,r,o,a,s,c,l,u+1):(401==i.status&&a&&d.router.navigate(["/end"]),l(i))}var p,s=s||!1,d=this,f=new i.Headers;switch(u=u||0,o&&a?f.append("Authorization","Bearer "+btoa(localStorage.getItem("token"))):o&&f.append("Authorization","Basic "+btoa(n.username+":"+n.password)),f.append("Accept-Language",("lang"in localStorage?localStorage.getItem("lang"):"en")+";q=1"),p=(t?this.BASE_URL:this.RESTORE_URL)+r+(s?this.regPuzzle():""),e){case"post":case"POST":return f.append("Content-Type","application/json"),c&&l?void d.http.post(p,JSON.stringify(n),{headers:f}).toPromise().then(function(t){accept(c,t)})["catch"](function(t){retry(t,c,l)}):new Promise(function(t,e){d.http.post(p,JSON.stringify(n),{headers:f}).toPromise().then(function(e){accept(t,e)})["catch"](function(n){retry(n,t,e)})});case"delete":case"DELETE":return c&&l?void d.http["delete"](p,{headers:f}).toPromise().then(function(t){accept(c,t)})["catch"](function(t){retry(t,c,l)}):new Promise(function(t,e){d.http["delete"](p,{headers:f}).toPromise().then(function(e){accept(t,e)})["catch"](function(n){retry(n,t,e)})});case"get":case"GET":default:return c&&l?void d.http.get(p,{headers:f}).toPromise().then(function(t){accept(c,t)})["catch"](function(t){retry(t,c,l)}):new Promise(function(t,e){d.http.get(p,{headers:f}).toPromise().then(function(e){accept(t,e)})["catch"](function(n){retry(n,t,e)})})}},Backend.prototype.regPuzzle=function(){var t,e=0;if(!("puzzle"in localStorage))return"?puzzle=0";do t=window.sha256(localStorage.getItem("puzzle")+e),e++;while("0"!=t.charAt(0)||"0"!=t.charAt(1)||"0"!=t.charAt(2)||"0"!=t.charAt(3));return"?puzzle="+(e-1)},Backend.prototype.regCaptcha=function(){var t=window.grecaptcha.getResponse();
return"?captcha="+t},Backend.prototype.peekUser=function(t){return this.backend(!0,"GET",{},"peek/"+window.encodeURIComponent(t),!1,!1)},Backend.prototype.getUser=function(t){return this.backend(!0,"GET",{},"user/"+window.encodeURIComponent(t),!0,!0)},Backend.prototype.getProfile=function(){return this.backend(!0,"GET",{},"profile",!0,!0)},Backend.prototype.closeTo=function(t,e){for(var n=[],r=0;r<this.rsa_key.length;r++)n.push(new window.aesjs.ModeOfOperation.ctr(e,new window.aesjs.Counter(0)).encrypt(window.aesjs.util.convertStringToBytes(this.rsa_key[r])));return this.backend(!0,"POST",{new_keys:n},"close/"+window.encodeURIComponent(t),!0,!0,!0)},Backend.prototype.goCompany=function(t){return this.backend(!0,"POST",t,"profile/info",!0,!0)},Backend.prototype.goBCE=function(t){return this.backend(!0,"GET",{},"eid/bce/"+t,!0,!0)},Backend.prototype.listData=function(){return this.backend(!0,"GET",{},"profile/data",!0,!0)},Backend.prototype.postData=function(t,e,n){return this.backend(!0,"POST",{name:t,encr_data:this.arr2str(e),is_dated:!!n&&n},"profile/data/new",!0,!0,!0)},Backend.prototype.updateProfile=function(t,e){return this.backend(!0,"POST",{new_password:window.sha256(t),encr_master_key:this.encryptMasterAESAsNumber(t,this.profile.salt,this.master_key),sha_master:window.sha256(window.sha256(this.arr2str(this.master_key))),username:this.profile.username,password:window.sha256(e)},"profile/update",!0,!1)},Backend.prototype.updateProfileForReset=function(t,e){return this.backend(!0,"POST",{new_password:window.sha256(t),encr_master_key:e},"profile/update",!0,!0)},Backend.prototype.createUser=function(t,e){return this.backend(!0,"POST",{username:t,password:e},"user/create"+this.regCaptcha(),!1,!1)},Backend.prototype.createToken=function(t,e,n){return this.backend(!0,"POST",{username:t,password:window.sha256(e),is_eternal:n},"profile/token/new",!0,!1,!0)},Backend.prototype.removeTokens=function(t){return this.backend(!0,"DELETE",{},"profile/token"+(t?"":"?token="+localStorage.getItem("token")),!0,!0)},Backend.prototype.createOAuth=function(t,e,n){return this.backend(!0,"POST",{for_id:t,prefix:e,token:n},"oauth/new",!0,!0)},Backend.prototype.removeOAuth=function(t){return this.backend(!0,"DELETE",{},"oauth"+t,!0,!0)},Backend.prototype.getData=function(t){return this.backend(!0,"GET",{},"data/"+t,!0,!0)},Backend.prototype.triggerVaults=function(t){return this.backend(!0,"GET",{},"data/trigger/"+window.encodeURIComponent(t),!0,!0)},Backend.prototype.removeData=function(t){return this.backend(!0,"DELETE",{},"data/"+window.encodeURIComponent(t),!0,!0)},Backend.prototype.createVault=function(t,e,n,r,o,a,i){return this.backend(!0,"POST",{data_name:t,shared_to_id:n,data_crypted_aes:this.arr2str(r),aes_crypted_shared_pub:o,expire_epoch:a?a:0,trigger:i?i:"",real_name:e},"vault/new",!0,!0,!0)},Backend.prototype.revokeVault=function(t){return this.backend(!0,"DELETE",{},"vault/"+t,!0,!0)},Backend.prototype.getVault=function(t){return this.backend(!0,"GET",{},"vault/"+t,!0,!0)},Backend.prototype.getAccessVault=function(t){return this.backend(!0,"GET",{},"vault/time/"+t,!0,!0)},Backend.prototype.requestRestore=function(t){return this.backend(!1,"GET",{},"request/"+window.encodeURIComponent(t),!1,!1)},Backend.prototype.mixRestore=function(t,e){return this.backend(!1,"GET",{},"mix/"+window.encodeURIComponent(t)+"/"+window.encodeURIComponent(e),!1,!1)},Backend=r([a.Injectable(),o("design:paramtypes",[i.Http,c.NotificationsService,l.TranslateService,s.Router])],Backend)}();e.Backend=u},406:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(93),s=n(66),c=n(405),l=n(407),u=function(){function Data(t,e,n,r){this.notif=t,this.translate=e,this.backend=n,this.check=r}return Data.prototype.sanitarize=function(t,e){var n=t.split("/");n.unshift("/");var r=n.pop();return n.join(" > ")+(e?"":" >> "+r)},Data.prototype.workerMgt=function(t,e){var n=this;return function(r){switch(r.data[0]){case 1:n.notif.remove(),n.notif.info(n.translate.instant(t?"encrypting":"decrypting"),r.data[1]+" %",{timeout:300,showProgressBar:!1}),n.check.tick();break;case 2:n.notif.remove(),n.notif.info(n.translate.instant(t?"encrypting":"decrypting"),"100 %",{timeout:300,showProgressBar:!1}),e(r.data[1]);break;case 3:n.notif.remove(),n.notif.error(n.translate.instant(t?"encrypting":"decrypting"),n.translate.instant("corruption")),console.log(JSON.parse(r.data[1])),e("[]");break;case 0:}}},Data.prototype.listData=function(){var t=this;return new Promise(function(e,n){t.backend.data_loaded&&e(),t.backend.data_trie=new l.Trie,t.backend.shared_with_me_trie=new l.Trie,t.backend.listData().then(function(n){t.backend.profile.data=n.data,t.backend.profile.shared_with_me=n.shared_with_me;for(var r=Object.getOwnPropertyNames(n.data),o=0;o<r.length;o++)t.backend.data_trie.addMilestones(r[o],"/"),t.backend.data_trie.add(r[o],t.backend.profile.data[r[o]]);r=Object.getOwnPropertyNames(n.shared_with_me);for(var o=0;o<r.length;o++)for(var a=Object.getOwnPropertyNames(n.shared_with_me[r[o]]),i=0;i<a.length;i++)t.backend.shared_with_me_trie.addMilestones(r[o]+"/"+a[i],"/"),t.backend.shared_with_me_trie.add(r[o]+"/"+a[i],t.backend.profile.shared_with_me[r[o]][a[i]]);t.backend.data_loaded=!0,e()},function(n){t.backend.profile.data={},t.backend.profile.shared_with_me={},t.backend.data_loaded=!0,t.notif.error(t.translate.instant("error"),t.translate.instant("noData")),e()})})},Data.prototype.newData=function(t,e,n,r){var o=this;return r=r||!1,new Promise(function(a,i){return!r&&o.backend.data_trie.has(t)?void i("exists"):void o.backend.encryptAES(e,o.workerMgt(!0,function(e){o.backend.postData(t,e,n).then(function(e){o.backend.profile.data[t]={id:e._id,length:0,is_dated:n,shared_to:{}},o.backend.data_trie.addMilestones(t,"/"),o.backend.data_trie.add(t,o.backend.profile.data[t]),a()},function(t){i("server")})}))})},Data.prototype.remove=function(t){var e=this;return new Promise(function(n,r){e.backend.removeData(t).then(function(){delete e.backend.profile.data[t],e.backend.data_trie.remove(t),n()},function(t){r(t)})})},Data.prototype.modifyData=function(t,e,n,r,o){function keys(){var t=[];for(var e in r)r.hasOwnProperty(e)&&t.push(e);return t}function check(t,e){a++,a>=s&&(l.listData(),c?t():e("vault"))}var a=0,i=keys(),s=i.length,c=!0,l=this;return o=!!o&&o,l.backend.triggerVaults(t),new Promise(function(a,s){l.newData(t,e,n,!0).then(function(){i.forEach(function(n){var i=r[n].getTime?r[n]:new Date(0);l.grantVault(n,o?t.replace(/\/[^\/]*$/,""):t,t,e,i).then(function(t,e){check(a,s)},function(){c=!1,check(a,s)})}),0==i.length&&a()},function(t){s(t)})})},Data.prototype.getVault=function(t){var e=this;return new Promise(function(n,r){e.backend.getVault(t).then(function(t){console.log(t.aes_crypted_shared_pub);var r=e.backend.decryptRSA(t.aes_crypted_shared_pub);console.log(r),e.backend.decryptAES(e.backend.str2arr(t.data_crypted_aes),e.workerMgt(!1,function(e){t.decr_data=e,n(t)}),r)},function(t){r(t)})})},Data.prototype.grantVault=function(t,e,n,r,o,a){var i=this;return new Promise(function(s,c){i.backend.getUser(t).then(function(t){var l=i.backend.newAES(),u=i.backend.encryptRSA(l,t.rsa_pub_key);i.backend.encryptAES(r,i.workerMgt(!0,function(r){i.backend.createVault(e,n,t._id,r,u,o.getTime()<(new Date).getTime()?0:o.getTime(),a).then(function(e){i.backend.profile.data[n].shared_to[t._id]=e._id,s(t,e._id)},function(t){c(t)})}),l)},function(t){c(t)})})},Data.prototype.populateUsers=function(t){function check(t){e++,e>=n&&t(r)}var e=0,n=t.length,r={},o=this;return new Promise(function(e,n){t.forEach(function(t){o.backend.getUser(t).then(function(t){r[t._id]=t,check(e)},function(){check(e)})}),0==t.length&&e({})})},Data=r([a.Injectable(),o("design:paramtypes",[i.NotificationsService,s.TranslateService,c.Backend,a.ApplicationRef])],Data)}();e.Data=u},407:function(t,e){"use strict";var n=function(){function Node(t,e){this.value=t,this.end=e,this.children={}}return Node}();e.Node=n;var r=function(){function Trie(){this.cnt=0,this.rootObj=new n((void 0),(!1))}return Trie.prototype.add=function(t,e){for(var r=this.rootObj,o=!1,a=0;a<t.length;a++){var i=t[a];r.children.hasOwnProperty(i)?(r=r.children[i],a!=t.length-1||r.end||(r.end=!0,this.cnt++),a==t.length-1&&(r.value=e)):(o=!0,r=r.children[i]=new n(e,a==t.length-1))}o&&this.cnt++},Trie.prototype.addMilestones=function(t,e){t+="0"==e?"1":"0";var n,r=t.split(e),o=r[0];for(n=0;n<r.length-1;n++)o+=e,this.add(o,void 0),o+=r[n+1]},Trie.prototype.find=function(t){for(var e=this.rootObj,n=!0,r=0;r<t.length&&n;r++){var o=t[r];e.children.hasOwnProperty(o)||(n=!1),e=e.children[o]}return n&&0!=e.end||(e=null),e},Trie.prototype.has=function(t){return!!this.find(t)},Trie.prototype.explore=function(t,e,n,r){for(var o=Object.getOwnPropertyNames(t.children),a=0;a<o.length;a++){var i=o[a],s=t.children[i],c=e+i;s.end&&n.push(c),r&&r==i||n.concat(this.explore(s,c,n,r))}return n},Trie.prototype.suggestions=function(t,e){var n;if(t&&t.length>0){if(n=this.find(t),!n)return[]}else n=this.rootObj;return this.explore(n,t,[],e)},Trie.prototype.count=function(){return this.cnt},Trie.prototype.deleteHelper=function(t,e,n){if(!t)return!1;if(n==e.length){if(t.end)return t.end=!1,0==Object.getOwnPropertyNames(t).length}else if(this.deleteHelper(t.children[e[n]],e,n+1))return delete t.children[e[n]],0==t.end&&0==Object.getOwnPropertyNames(t).length;return!1},Trie.prototype.remove=function(t){t.length<1||this.deleteHelper(this.rootObj,t,0)},Trie}();e.Trie=r},408:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(403),s=n(66),c=n(93),l=n(405),u=n(406);a.enableProdMode();var p=function(){function Profile(t,e,n,r,o){this.translate=t,this.notif=e,this.backend=n,this.router=r,this.dataservice=o,this.use_pwd=!0,this.onEid=!0}return Profile.prototype.ngOnInit=function(){var t=this;this.onEid&&/eidok/.test(window.location.href)&&(this.onEid=!1,this.notif.success(this.translate.instant("success"),this.translate.instant("profile.eidRead")),this.backend.getProfile().then(function(e){t.backend.profile=e,t.dataservice.newData("profile/address/eid",t.backend.profile.company_info.address,!1).then(function(){t.dataservice.newData("profile/rrn",t.backend.profile.company_info.rrn,!1)})})),this.dataservice.listData().then(function(){if(localStorage.getItem("return_url")&&localStorage.getItem("return_url").length>1){var e=localStorage.getItem("return_url");e=JSON.parse(e),localStorage.removeItem("return_url"),t.router.navigate(e)}})},Profile.prototype.logout=function(t){var e=this;this.backend.removeTokens(t).then(function(){localStorage.removeItem("token"),localStorage.removeItem("key_decryption"),localStorage.removeItem("psha"),e.backend.forceReload(),delete e.backend.profile,e.router.navigate(["/"])},function(t){e.notif.error(e.translate.instant("error"),e.translate.instant("profile.noLogout"))})},Profile.prototype.remove=function(t){var e=this;this.backend.removeOAuth(t).then(function(){for(var n=0;n<e.backend.profile.oauth.length;n++)if(e.backend.profile.oauth[n].id==t){delete e.backend.profile.oauth[n];break}},function(t){e.notif.error(e.translate.instant("error"),e.translate.instant("profile.noRevoke"))})},Profile.prototype.update=function(){var t=this;return this.password.length<8?void t.notif.error(t.translate.instant("error"),t.translate.instant("login.noMatch")):void(this.password==this.password2?this.backend.updateProfile(this.password,this.current_pwd).then(function(){t.dataservice.modifyData("keys/pwd/mine1",t.password.slice(0,4),!1,t.backend.profile.data["keys/pwd/mine1"].shared_to).then(function(){t.dataservice.modifyData("keys/pwd/mine2",t.password.slice(4),!1,t.backend.profile.data["keys/pwd/mine2"].shared_to).then(function(){t.current_pwd="",t.password="",t.password2="",t.notif.success(t.translate.instant("success"),t.translate.instant("profile.changed"))},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("profile.warnChange"))})},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("profile.warnChange"))})},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("profile.noChange"))}):t.notif.error(t.translate.instant("error"),t.translate.instant("login.noMatch")))},Profile.prototype.revokeAll=function(){var t=this,e=Object.getOwnPropertyNames(this.backend.profile.data);this.backend.getUser(this.revoke_id).then(function(n){e.forEach(function(e){n._id in t.backend.profile[e].shared_to&&t.backend.revokeVault(t.backend.profile.data[e].shared_to[n._id]).then(function(){delete t.backend.profile.data[e].shared_to[n._id]},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("profile.noRevoke"))})})},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("filesystem.noUser"))})},Profile.prototype.fileLoad=function(t){var e=this,n=t.target.files[0],r=new FileReader;r.onloadend=function(t){/^data:;base64,/.test(r.result)?e.password=atob(r.result.split(",")[1]):e.password=r.result,e.password2=e.password},r.readAsText(n)},Profile=r([a.Component({template:'\n        <h2>{{ backend.profile._id }}</h2>\n        <button type="button" class="btn btn-primary" (click)="logout(false)">{{ \'profile.logout\' | translate }}</button>\n        <button type="button" class="btn btn-danger" (click)="logout(true)">{{ \'profile.logoutAll\' | translate }}</button>\n        <br /><br />\n\n        <button type="button" class="btn btn-primary" (click)="router.navigate([\'/filesystem\', \'data\'])">{{ \'profile.mine\' | translate }}</button>\n        <button type="button" class="btn btn-primary" (click)="router.navigate([\'/filesystem\', \'vault\'])">{{ \'profile.shared\' | translate }}</button>\n        <button type="button" class="btn btn-primary" (click)="router.navigate([\'/generics\'])">{{ \'profile.generics\' | translate }}</button>\n        <br /><br />\n\n        <form class="form-signin">\n            <div class="heading">\n                <h3 class="form-signin-heading">{{ \'profile.change\' | translate }}</h3>\n            </div>\n            <div class="form-group">\n                {{ \'profile.current\' | translate }}<br />\n                <input type="password" [(ngModel)]="current_pwd" name="n0" class="form-control" required>\n            </div>\n            <div class="checkbox">\n                <label><input type="checkbox" name="n90" [(ngModel)]="use_pwd" checked> {{ \'login.use_pwd\' | translate }}</label>\n            </div>\n            <div class="form-group">\n                {{ \'profile.new\' | translate }}<br />\n                <input type="password" [(ngModel)]="password" name="n4" class="form-control" [disabled]="!use_pwd" required>\n            </div>\n            <div class="form-group">\n                {{ \'profile.new\' | translate }}<br />\n                <input type="password" [(ngModel)]="password2" name="n5" class="form-control" [disabled]="!use_pwd" required>\n            </div>\n            <div class="form-group">\n                {{ \'login.password_file\' | translate }}<br />\n                <input type="file" (change)="fileLoad($event)" name="n50" class="form-control" [disabled]="use_pwd" required>\n            </div>\n            <div class="form-group">\n                <button type="submit" class="btn btn-primary" (click)="update()">{{ \'profile.change\' | translate }}</button>\n            </div>\n        </form>\n        <br /><br />\n\n        <merge-account></merge-account>\n        <br /><br />\n\n        <form class="form-signin">\n            <div class="heading">\n                <h3 class="form-signin-heading">{{ \'profile.revoke\' | translate }}</h3>\n            </div>\n            <div class="form-group">\n                {{ \'profile.revokeID\' | translate }}<br />\n                <input type="text" [(ngModel)]="revoke_id" name="n100" class="form-control" required>\n            </div>\n            <div class="form-group">\n                <button type="submit" class="btn btn-warning" (click)="revokeAll()">{{ \'profile.revoke\' | translate }}</button>\n            </div>\n        </form>\n        <br /><br />\n\n        <div class="heading">\n            <h3 class="form-signin-heading">{{ \'profile.oauth\' | translate }}</h3>\n        </div>\n        <div class="table-responsive">\n            <table class="table table-hover">\n                <thead>\n                    <tr>\n                        <th>{{ \'oauth.for_id\' | translate }}</th>\n                        <th>{{ \'oauth.prefix\' | translate }}</th>\n                        <th>{{ \'action\' | translate }}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr *ngFor="let d of backend.profile.oauth">\n                        <td>{{ d.for_id }}</td>\n                        <td>{{ d.prefix }}</td>\n                        <td><button type="button" class="btn btn-alarm" (click)="remove(d.id)">{{ \'remove\' | translate }}</button></td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n        <br /><br />\n\n        <user-info [user]="backend.profile"></user-info>\n        <br />\n    '}),o("design:paramtypes",[s.TranslateService,c.NotificationsService,l.Backend,i.Router,u.Data])],Profile)}();e.Profile=p},409:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(403),s=n(66),c=n(93),l=n(405),u=n(406);a.enableProdMode();var p=function(){function Dataview(t,e,n,r,o,a,i){this.translate=t,this.backend=e,this.router=n,this.notif=r,this.routed=o,this.dataservice=a,this.check=i,this.decr_data="[]",this.new_data_file="",this.is_generic=!1,this.timings={},this.new_datas={},this.filter="",new window.Clipboard(".btn-copier")}return Dataview.prototype.ngOnInit=function(){var t=this;this.sub=this.routed.params.subscribe(function(e){t.data_name=window.decodeURIComponent(e.name),t.to_filesystem=e.to_filesystem,t.is_dated=t.backend.profile.data[t.data_name].is_dated,t.backend.generics[t.data_name]?(t.is_generic=!0,t.gen_name=t.data_name):t.backend.generics[t.data_name.replace(/\/[^\/]*$/,"")]&&t.backend.generics[t.data_name.replace(/\/[^\/]*$/,"")].is_folder&&(t.is_generic=!0,t.gen_name=t.data_name.replace(/\/[^\/]*$/,""));var n=Object.getOwnPropertyNames(t.backend.profile.data[t.data_name].shared_to);n.forEach(function(e){t.backend.getAccessVault(t.backend.profile.data[t.data_name].shared_to[e]).then(function(n){t.timings[e]={la:new Date(parseInt(n.last_access)),ee:new Date(parseInt(n.expire_epoch)),seen:parseInt(n.last_access)>0,ends:parseInt(n.expire_epoch)>(new Date).getTime(),trigger:n.trigger}},function(n){delete t.backend.profile.data[t.data_name].shared_to[e]})}),t.backend.getData(t.backend.profile.data[t.data_name].id).then(function(e){t.data=e,t.data.encr_data=t.backend.str2arr(t.data.encr_data),t.backend.decryptAES(t.data.encr_data,t.dataservice.workerMgt(!1,function(e){t.decr_data=e,t.check.tick()}))},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("dataview.noData"))}),window.$("#pick4").datetimepicker(),window.$("#pick4").datetimepicker("date",window.moment()),window.$("#pick5").datetimepicker(),window.$("#pick5").datetimepicker("date",window.moment()),window.$("#pick5").datetimepicker("options",{widgetPositioning:{vertical:"bottom"}})})},Dataview.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},Dataview.prototype.shared=function(){return 0!=Object.getOwnPropertyNames(this.backend.profile.data[this.data_name].shared_to).length},Dataview.prototype.filters=function(){var t=this;return this.backend.data_trie.suggestions(this.gen_name+"/").sort().filter(function(e){return"/"!=e.charAt(e.length-1)&&e!=t.data_name}).map(function(t){return t.replace(/.+\//,"")})},Dataview.prototype.modify=function(){var t,e=window.$("#pick4").datetimepicker("date").toDate(),n=!1;if(this.is_generic&&this.backend.generics[this.gen_name].json_keys){for(var r={},o=0;o<this.backend.generics[this.gen_name].json_keys.length;o++)r[this.backend.generics[this.gen_name].json_keys[o]]=this.new_datas[this.backend.generics[this.gen_name].json_keys[o]];this.new_data=JSON.stringify(r)}if(this.is_dated){t=JSON.parse(this.decr_data);for(var o=0;o<t.length;o++)if(e>t[o].from){t.splice(o,0,{from:e,value:""!=this.new_data_file?this.new_data_file:this.new_data}),n=!0;break}n||t.push({from:e,value:""!=this.new_data_file?this.new_data_file:this.new_data}),t=JSON.stringify(t)}else t=""!=this.new_data_file?this.new_data_file:this.new_data;this.mod(t,!0)},Dataview.prototype.mod=function(t,e){for(var n=this,r=this.sharedIds(),o={},a=0;a<r.length;a++)o[r[a]]=this.timings[r[a]].ee;this.dataservice.modifyData(this.data_name,t,this.is_dated,o,this.is_generic&&this.data_name!=this.gen_name).then(function(){n.new_datas={},n.new_data="",n.decr_data=t,e&&n.back(!1)},function(t){"server"==t?n.notif.error(n.translate.instant("error"),n.translate.instant("server")):n.notif.error(n.translate.instant("error"),n.translate.instant("profile.exists"))})},Dataview.prototype.remove=function(){var t=this;this.dataservice.remove(this.data_name).then(function(){t.back(!1)},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("server"))})},Dataview.prototype.sharedIds=function(){var t=this;if(!this.backend.profile.data[this.data_name])return[];var e=Object.getOwnPropertyNames(this.backend.profile.data[this.data_name].shared_to);return e.forEach(function(e){t.timings[e]&&(window.$("#pick-id"+e).datetimepicker(),window.$("#pick-id"+e).datetimepicker("date",window.moment(t.timings[e].la.getTime())),window.$("#pick-id2"+e).datetimepicker(),window.$("#pick-id2"+e).datetimepicker("date",window.moment(t.timings[e].ee.getTime())))}),e},Dataview.prototype.back=function(t){t?this.router.navigate(["/generics"]):this.router.navigate(["/filesystem","data",{folders:this.data_name.replace(/[^\/]+$/,"")}])},Dataview.prototype.revoke=function(t){var e=this;this.backend.revokeVault(this.backend.profile.data[this.data_name].shared_to[t]).then(function(){delete e.backend.profile.data[e.data_name].shared_to[t]},function(t){e.notif.error(e.translate.instant("error"),e.translate.instant("dataview.noRevoke"))})},Dataview.prototype.change=function(t){var e=this;this.backend.getAccessVault(this.backend.profile.data[this.data_name].shared_to[t]).then(function(n){e.backend.revokeVault(e.backend.profile.data[e.data_name].shared_to[t]).then(function(){delete e.backend.profile.data[e.data_name].shared_to[t],e.backend.getData(e.backend.profile.data[e.gen_name+"/"+e.filter].id).then(function(r){e.backend.decryptAES(r.encr_data,e.dataservice.workerMgt(!1,function(r){e.dataservice.grantVault(t,e.gen_name,e.gen_name+"/"+e.filter,r,new Date(n.expire_epoch),n.trigger).then(function(){e.backend.triggerVaults(e.gen_name+"/"+e.filter),e.notif.success(e.translate.instant("success"),e.translate.instant("dataview.transfered"))},function(t){e.notif.error(e.translate.instant("error"),e.translate.instant("dataview.noGrant"))})}))},function(t){e.notif.error(e.translate.instant("error"),e.translate.instant("dataview.noData"))})},function(t){e.notif.error(e.translate.instant("error"),e.translate.instant("dataview.noRevoke"))})})},Dataview.prototype.revokeAll=function(){var t=this,e=Object.getOwnPropertyNames(this.backend.profile.data[this.data_name].shared_to);e.forEach(function(e){this.backend.revokeVault(this.backend.profile.data[this.data_name].shared_to[e]).then(function(){delete t.backend.profile.data[t.data_name].shared_to[e]},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("dataview.noRevoke"))})})},Dataview.prototype.register=function(){var t=this,e=window.$("#pick5").datetimepicker("date").toDate();this.dataservice.grantVault(this.new_id,this.data_name,this.data_name,this.decr_data,e,this.new_trigger).then(function(n,r){t.backend.profile.data[t.data_name].shared_to[n._id]=r,t.timings[n._id]={la:new Date(0),ee:e,seen:!1,ends:e.getTime()>(new Date).getTime(),trigger:t.new_trigger},t.new_id=""},function(){t.notif.error(t.translate.instant("error"),t.translate.instant("dataview.noGrant"))})},Dataview.prototype.dialog=function(t){return new Promise(function(e,n){e(window.confirm(t))})},Dataview.prototype.fileLoad=function(t){var e=this,n=t.target.files[0],r=new FileReader;r.onloadend=function(t){/^data:;base64,/.test(r.result)?e.new_data_file=atob(r.result.split(",")[1]):e.new_data_file=r.result},r.readAsDataURL(n)},Dataview.prototype.user=function(t){this.router.navigate(["/user",t,JSON.stringify(this.router.routerState.snapshot.url.split("/").map(window.decodeURIComponent))])},Dataview=r([a.Component({template:'\n        <h2>{{ dataservice.sanitarize(data_name) }}</h2>\n        <button type="button" class="btn btn-primary" (click)="back(false)">{{ \'back\' | translate }}</button>\n        <button *ngIf="is_generic" type="button" class="btn btn-primary" (click)="back(true)">{{ \'dataview.toGen\' | translate }}</button>\n        <br />\n        <clear-view [decr_data]="decr_data" [is_dated]="is_dated" [data_name]="data_name" [change]="true" [is_folder]="is_generic && !!backend.generics[gen_name].json_keys"\n            (notify)="mod($event, false)" [gen_name]="gen_name" [is_generic]="is_generic"></clear-view>\n        <br /><br />\n\n        <p *ngIf="!is_dated">{{ \'modify\' | translate }}</p>\n        <p *ngIf="!!is_dated && is_dated">{{ \'add\' | translate }}</p>\n        <div *ngIf="!!is_dated && is_dated" class=\'input-group date\' id=\'pick4\'>\n            <input type=\'text\' class="form-control"/>\n            <span class="input-group-addon">\n                <span class="glyphicon glyphicon-calendar"></span>\n            </span>\n        </div>\n\n        <div *ngIf="!is_generic">\n            <input type="text" [(ngModel)]="new_data" [disabled]="new_data_file!=\'\'" class="form-control">\n            <input type="file" (change)="fileLoad($event)" class="form-control">\n        </div>\n        <div *ngIf="is_generic">\n            <input type="text" *ngIf="!backend.generics[gen_name].is_file && !backend.generics[gen_name].json_keys" [(ngModel)]="new_data" name="s1" class="form-control">\n            <div *ngIf="!backend.generics[gen_name].is_file && !!backend.generics[gen_name].json_keys">\n                <div class="form-group" *ngFor="let k of backend.generics[gen_name].json_keys">\n                    {{ k | translate }}<br />\n                    <input type="text" [(ngModel)]="new_datas[k]" name="s1" class="form-control">\n                </div>\n            </div>\n            <input type="file" *ngIf="backend.generics[gen_name].is_file" (change)="fileLoad($event)" name="n50" class="form-control">\n        </div>\n\n\n        <button type="button" class="btn btn-primary" (click)="modify()" [disabled]="!decr_data">{{ \'filesystem.record\' | translate }}</button>\n        <button type="button" class="btn btn-warning" (click)="revokeAll()">{{ \'dataview.revokeAll\' | translate }}</button>\n        <button type="button" class="btn btn-danger" (click)="remove()"\n                [disabled]="shared() || !!backend.generics[data_name]">{{ \'remove\' | translate }}</button>\n        <br /><br />\n\n        <div class="table-responsive">\n            <table class="table table-hover">\n                <thead>\n                    <tr>\n                        <th>{{ \'dataview.shared_to\' | translate }}</th>\n                        <th>{{ \'dataview.lastAccess\' | translate }}</th>\n                        <th>{{ \'dataview.until\' | translate }}</th>\n                        <th>{{ \'dataview.trigger\' | translate }}</th>\n                        <th *ngIf="is_generic && data_name != gen_name">{{ \'dataview.redirect\' | translate }}</th>\n                        <th>{{ \'action\' | translate }}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr *ngFor="let d of sharedIds()">\n                        <td><a (click)="user(d)">{{ d }}</a></td>\n                        <td *ngIf="!!timings[d] && timings[d].seen">\n                            <div class=\'input-group date\' id=\'pick-id{{ d }}\'>\n                                <input type=\'text\' class="form-control" readonly="readonly"/>\n                                <span class="input-group-addon">\n                                    <span class="glyphicon glyphicon-calendar"></span>\n                                </span>\n                            </div>\n                        </td>\n                        <td *ngIf="!!timings[d] && timings[d].ends">\n                            <div class=\'input-group date\' id=\'pick-id2{{ d }}\'>\n                                <input type=\'text\' class="form-control" readonly="readonly"/>\n                                <span class="input-group-addon">\n                                    <span class="glyphicon glyphicon-calendar"></span>\n                                </span>\n                            </div>\n                        </td>\n                        <td *ngIf="!!timings[d] && !timings[d].seen">{{ \'dataview.neverSeen\' | translate }}</td>\n                        <td *ngIf="!!timings[d] && !timings[d].ends">{{ \'dataview.forever\' | translate }}</td>\n                        <td *ngIf="!timings[d]"></td>\n                        <td *ngIf="!timings[d]"></td>\n                        <td *ngIf="!!timings[d]">{{ timings[d].trigger }}</td>\n                        <td *ngIf="!timings[d]"></td>\n\n                        <td *ngIf="is_generic && data_name != gen_name">\n                            <select class="form-control" [(ngModel)]="filter">\n                                <option *ngFor="let f of filters()" [value]="f">{{ f | translate }}</option>\n                            </select>\n                        </td>\n\n                        <td>\n                            <button type="button" class="btn btn-primary" (click)="change(d)" [disabled]="filter==\'\'">{{ \'redirect\' | translate }}</button>\n                            <button type="button" class="btn btn-default" (click)="revoke(d)">{{ \'remove\' | translate }}</button>\n                        </td>\n                    </tr>\n                    <tr>\n                        <td><input type="text" [(ngModel)]="new_id" name="y0" class="form-control"></td>\n                        <td></td>\n                        <td>\n                            <div class=\'input-group date\' id=\'pick5\'>\n                                <input type=\'text\' class="form-control"/>\n                                <span class="input-group-addon">\n                                    <span class="glyphicon glyphicon-calendar"></span>\n                                </span>\n                            </div>\n                        </td>\n                        <td><input type="text" [(ngModel)]="new_trigger" name="y1" class="form-control"></td>\n                        <td *ngIf="is_generic && data_name != gen_name"></td>\n                        <td><button type="button" class="btn btn-default" (click)="register()" [disabled]="!decr_data">{{ \'record\' | translate }}</button></td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    '
}),o("design:paramtypes",[s.TranslateService,l.Backend,i.Router,c.NotificationsService,i.ActivatedRoute,u.Data,a.ApplicationRef])],Dataview)}();e.Dataview=p},410:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(403),s=n(66),c=n(93),l=n(405),u=n(406);a.enableProdMode();var p=function(){function Vaultview(t,e,n,r,o,a){this.translate=t,this.router=e,this.backend=n,this.notif=r,this.routed=o,this.dataservice=a,this.vault={data_name:""},this.decr_data="",this.is_generic=!1}return Vaultview.prototype.ngOnInit=function(){var t=this;this.sub=this.routed.params.subscribe(function(e){t.route_back=e.route_back,t.sharer_id=e.username,t.dataservice.getVault(e.id).then(function(e){t.vault=e,t.decr_data=e.decr_data,t.is_dated=e.is_dated,t.backend.generics[e.data_name]&&(t.is_generic=!0)},function(n){417==n.status?t.notif.error(t.translate.instant("error"),t.translate.instant("vaultview.expired")):t.notif.error(t.translate.instant("error"),t.translate.instant("vaultview.noData")),delete t.backend.profile.shared_with_me[t.sharer_id][e.data_name],t.back()})})},Vaultview.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},Vaultview.prototype.back=function(){this.router.navigate(["/filesystem","vault",this.route_back?{folders:this.route_back}:{}])},Vaultview=r([a.Component({template:'\n        <h2>{{ dataservice.sanitarize(sharer_id + \'/\' + vault.data_name) }}</h2>\n        <button type="button" class="btn btn-primary" (click)="back()">{{ \'back\' | translate }}</button>\n        <br />\n\n        <clear-view [decr_data]="decr_data" [is_dated]="is_dated" [data_name]="vault.data_name" [change]="false" [is_generic]="is_generic"\n            [is_folder]="is_generic && !!backend.generics[vault.data_name] && !!backend.generics[vault.data_name].json_keys" [gen_name]="vault.data_name"></clear-view>\n    '}),o("design:paramtypes",[s.TranslateService,i.Router,l.Backend,c.NotificationsService,i.ActivatedRoute,u.Data])],Vaultview)}();e.Vaultview=p},411:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(403),s=n(66),c=n(93),l=n(405),u=n(406);a.enableProdMode();var p=function(){function Reset(t,e,n,r,o,a){this.translate=t,this.backend=e,this.router=n,this.notif=r,this.routed=o,this.dataservice=a,this.use_pwd=!0}return Reset.prototype.ngOnInit=function(){var t=this;this.sub=this.routed.params.subscribe(function(e){t.pwd=e.pwd,t.id=e.id})},Reset.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},Reset.prototype.enter=function(){var t=this;return this.password.length<8?void t.notif.error(t.translate.instant("error"),t.translate.instant("login.noMatch")):void(this.password==this.password2?this.backend.createToken(this.id,this.pwd,!1).then(function(e){localStorage.setItem("token",e._id),t.backend.getProfile().then(function(e){t.backend.profile=e,localStorage.setItem("key_decryption",window.sha256(t.pwd+e.salt)),localStorage.setItem("psha",window.sha256(t.password)),t.dataservice.listData().then(function(){t.backend.updateProfile(t.password,t.pwd).then(function(){t.dataservice.modifyData("keys/pwd/mine1",t.password.slice(0,4),!1,t.backend.profile.data["keys/pwd/mine1"].shared_to).then(function(){t.dataservice.modifyData("keys/pwd/mine2",t.password.slice(4),!1,t.backend.profile.data["keys/pwd/mine2"].shared_to).then(function(){window.location.href="/"},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("reset.noReset"))})},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("reset.noReset"))})},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("reset.noReset"))})})},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("reset.noReset"))})},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("reset.noReset"))}):t.notif.error(t.translate.instant("error"),t.translate.instant("reset.noReset")))},Reset.prototype.fileLoad=function(t){var e=this,n=t.target.files[0],r=new FileReader;r.onloadend=function(t){/^data:;base64,/.test(r.result)?e.password=atob(r.result.split(",")[1]):e.password=r.result,e.password2=e.password},r.readAsText(n)},Reset=r([a.Component({template:'\n        <div style="box-shadow: 0 0 10px 10px black; padding: 10px;">\n            <form class="form-signin">\n                <div class="heading">\n                    <h3 class="form-signin-heading">{{ \'reset.reset\' | translate }}</h3>\n                </div>\n                <div class="checkbox">\n                    <label><input type="checkbox" name="n90" [(ngModel)]="use_pwd" checked> {{ \'login.use_pwd\' | translate }}</label>\n                </div>\n                <div class="form-group">\n                    {{ \'reset.password\' | translate }}<br />\n                    <input type="password" [(ngModel)]="password" name="n4" class="form-control" [disabled]="!use_pwd" required>\n                </div>\n                <div class="form-group">\n                    {{ \'reset.password\' | translate }}<br />\n                    <input type="password" [(ngModel)]="password2" name="n5" class="form-control" [disabled]="!use_pwd" required>\n                </div>\n                <div class="form-group">\n                    {{ \'login.password_file\' | translate }}<br />\n                    <input type="file" (change)="fileLoad($event)" name="n50" class="form-control" [disabled]="use_pwd" required>\n                </div>\n                <div class="form-group">\n                    <button type="submit" class="btn btn-primary" (click)="enter()">{{ \'reset.send\' | translate }}</button>\n                </div>\n            </form>\n        </div>\n    '}),o("design:paramtypes",[s.TranslateService,l.Backend,i.Router,c.NotificationsService,i.ActivatedRoute,u.Data])],Reset)}();e.Reset=p},412:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(403),s=n(66),c=n(93),l=n(406);a.enableProdMode();var u=function(){function Savekey(t,e,n,r,o){this.translate=t,this.router=e,this.notif=n,this.routed=r,this.dataservice=o}return Savekey.prototype.ngOnInit=function(){var t=this;this.sub=this.routed.params.subscribe(function(e){t.key=window.decodeURIComponent(e.key),t.value=window.decodeURIComponent(e.value),t.return_url=window.decodeURIComponent(e.return_url),t.dataservice.newData(t.key,t.value,e.is_dated).then(function(){t.notif.success(t.translate.instant("success"),t.translate.instant("savekey.rec")),window.location.href=t.return_url},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("server")),window.location.href=t.return_url})})},Savekey.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},Savekey=r([a.Component({template:"\n\n    "}),o("design:paramtypes",[s.TranslateService,i.Router,c.NotificationsService,i.ActivatedRoute,l.Data])],Savekey)}();e.Savekey=u},413:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(403),s=n(66),c=n(93),l=n(405),u=n(406);a.enableProdMode();var p=function(){function Filesystem(t,e,n,r,o,a,i){this.translate=t,this.backend=e,this.router=n,this.routed=r,this.notif=o,this.dataservice=a,this.check=i,this.folders="",this.data_value_file=""}return Filesystem.prototype.ngOnInit=function(){var t=this;this.sub=this.routed.params.subscribe(function(e){t.dataservice.listData(),e.folders&&(t.folders=e.folders),t.mode=e.mode,setTimeout(function(){window.$("#pick1").datetimepicker(),window.$("#pick1").datetimepicker("date",window.moment()),window.$("#pick2").datetimepicker(),window.$("#pick2").datetimepicker("date",window.moment())},100)})},Filesystem.prototype.register=function(t,e){var n,r=this;return this.completeName()in this.backend.generics||this.folders.slice(0,-1)in this.backend.generics&&this.backend.generics[this.folders.slice(0,-1)].is_folder?void r.notif.error(r.translate.instant("error"),r.translate.instant("filesystem.generics")):(n=e?JSON.stringify([{value:t?this.data_value_file:this.data_value,from:window.$("#pick1").datetimepicker("date").toDate().getTime()}]):t?this.data_value_file:this.data_value,void this.dataservice.newData(this.completeName(),n,e).then(function(){r.data_name="",r.data_value="",r.data_value_file="",r.check.tick()},function(t){"server"==t?r.notif.error(r.translate.instant("error"),r.translate.instant("server")):r.notif.error(r.translate.instant("error"),r.translate.instant("filesystem.exists"))}))},Filesystem.prototype.getUp=function(){this.folders=this.folders.replace(/[^\/]+\/$/,"")},Filesystem.prototype.select=function(t){this.folders+=t+"/"},Filesystem.prototype.view=function(t){if("data"==this.mode)this.router.navigate(["/data",window.encodeURIComponent(this.folders+t)]);else if("vault"==this.mode){var e=this.folders.substr(0,this.folders.indexOf("/"));this.router.navigate(["/vault",window.encodeURIComponent(e),this.backend.shared_with_me_trie.find(this.folders+t).value,{route_back:this.folders,data_name:t}])}},Filesystem.prototype.listLevel=function(){return"data"==this.mode?this.backend.data_trie.suggestions(this.folders,"/").sort():"vault"==this.mode?this.backend.shared_with_me_trie.suggestions(this.folders,"/").sort():void 0},Filesystem.prototype.dataNames=function(){return this.listLevel().filter(function(t){return"/"!=t.charAt(t.length-1)}).map(function(t){return t.replace(/.+\//,"")})},Filesystem.prototype.folderNames=function(){return this.listLevel().filter(function(t){return"/"==t.charAt(t.length-1)}).map(function(t){return t.slice(0,-1).replace(/.+\//,"")})},Filesystem.prototype.completeName=function(){return this.folders+this.data_name.replace("/",":")},Filesystem.prototype.dialog=function(t){return new Promise(function(e,n){e(window.confirm(t))})},Filesystem.prototype.fileLoad=function(t){var e=this,n=t.target.files[0],r=new FileReader;r.onloadend=function(t){/^data:;base64,/.test(r.result)?e.data_value_file=atob(r.result.split(",")[1]):e.data_value_file=r.result},r.readAsDataURL(n)},Filesystem.prototype.hasKey=function(){if(!this.folders||""==this.folders)return"/";var t="data"==this.mode?this.folders:this.folders.replace(/^[^\/]*\//,"");return console.log(this.folders),console.log(t),this.translate.instant(t)==t?void 0:t},Filesystem=r([a.Component({template:'\n        <h2>{{ dataservice.sanitarize(folders, true) }}</h2>\n        <button type="button" class="btn btn-primary" (click)="router.navigate([\'/profile\'])">{{ \'back\' | translate }}</button>\n        <br />\n\n        <h3 *ngIf="!!hasKey()">{{ hasKey() | translate }}</h3><br />\n\n        <div class="table-responsive">\n            <table class="table table-hover">\n                <thead>\n                    <tr>\n                        <th>{{ \'filesystem.data_name\' | translate }}</th>\n                        <th>{{ \'filesystem.data\' | translate }}</th>\n                        <th>{{ \'action\' | translate }}</th>\n                    </tr>\n                </thead>\n                <tbody>\n                    <tr class="info">\n                        <td></td>\n                        <td>{{ \'filesystem.folder\' | translate }}</td>\n                        <td><button type="button" class="btn btn-default" (click)="getUp()" [disabled]="folders==\'\'">{{ \'filesystem.getUp\' | translate }}</button></td>\n                    </tr>\n                    <tr *ngFor="let d of folderNames()"  class="info">\n                        <td>{{ d }}</td>\n                        <td>{{ \'filesystem.folder\' | translate }}</td>\n                        <td><button type="button" class="btn btn-default" (click)="select(d)">{{ \'filesystem.goTo\' | translate }}</button></td>\n                    </tr>\n                    <tr *ngFor="let d of dataNames()">\n                        <td>{{ d }}</td>\n                        <td><i>{{ \'filesystem.mix\' | translate }}</i></td>\n                        <td><button type="button" class="btn btn-default" (click)="view(d)">{{ \'filesystem.goTo\' | translate }}</button></td>\n                    </tr>\n                    <tr *ngIf="mode==\'data\'" class="info">\n                        <td><input type="text" [(ngModel)]="data_name" name="s0" class="form-control"></td>\n                        <td>{{ \'filesystem.folder\' | translate }}</td>\n                        <td><button type="button" class="btn btn-default" (click)="select(data_name); data_name=\'\'">{{ \'filesystem.newFolder\' | translate }}</button></td>\n                    </tr>\n\n                    <tr *ngIf="mode==\'data\' && !backend.generics[folders.slice(0, -1)]">\n                        <td><input type="text" [(ngModel)]="data_name" name="s0" class="form-control"></td>\n                        <td><input type="text" [(ngModel)]="data_value" name="s1" class="form-control"></td>\n                        <td>\n                            <button type="button" class="btn btn-default" (click)="register(false, false)">{{ \'filesystem.record\' | translate }}</button>\n                        </td>\n                    </tr>\n                    <tr *ngIf="mode==\'data\' && !backend.generics[folders.slice(0, -1)]">\n                        <td><input type="text" [(ngModel)]="data_name" name="s0" class="form-control"></td>\n                        <td><input type="file" (change)="fileLoad($event)" name="n50" class="form-control"></td>\n                        <td>\n                            <button type="button" class="btn btn-default" (click)="register(true, false)" [disabled]="data_value_file==\'\'">{{ \'filesystem.record\' | translate }}</button>\n                        </td>\n                    </tr>\n\n                    <tr *ngIf="mode==\'data\' && !backend.generics[folders.slice(0, -1)]">\n                        <td><input type="text" [(ngModel)]="data_name" name="s0" class="form-control"></td>\n                        <td><input type="text" [(ngModel)]="data_value" name="s1" class="form-control"></td>\n                        <td>\n                            <div class=\'input-group date\' id=\'pick1\'>\n                                <input type=\'text\' class="form-control" />\n                                <span class="input-group-addon">\n                                    <span class="glyphicon glyphicon-calendar"></span>\n                                </span>\n                            </div>\n                            <button type="button" class="btn btn-default" (click)="register(false, true)">{{ \'filesystem.record\' | translate }}</button>\n                        </td>\n                    </tr>\n                    <tr *ngIf="mode==\'data\' && !backend.generics[folders.slice(0, -1)]">\n                        <td><input type="text" [(ngModel)]="data_name" name="s0" class="form-control"></td>\n                        <td><input type="file" (change)="fileLoad($event)" name="n50" class="form-control"></td>\n                        <td>\n                            <div class=\'input-group date\' id=\'pick2\'>\n                                <input type=\'text\' class="form-control" />\n                                <span class="input-group-addon">\n                                    <span class="glyphicon glyphicon-calendar"></span>\n                                </span>\n                            </div>\n                            <button type="button" class="btn btn-default" (click)="register(true, true)" [disabled]="data_value_file==\'\'">{{ \'filesystem.record\' | translate }}</button>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    '}),o("design:paramtypes",[s.TranslateService,l.Backend,i.Router,i.ActivatedRoute,c.NotificationsService,u.Data,a.ApplicationRef])],Filesystem)}();e.Filesystem=p},414:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(403),s=n(66),c=n(93),l=n(405);a.enableProdMode();var u=function(){function Oauth(t,e,n,r,o,a){this.translate=t,this.router=e,this.notif=n,this.routed=r,this.backend=o,this.check=a,this.requester={}}return Oauth.prototype.ngOnInit=function(){var t=this;this.sub=this.routed.params.subscribe(function(e){t.for_id=e.for_id,t.token=e.token,t.prefix=window.decodeURIComponent(e.prefix),t.return_url_ok=window.decodeURIComponent(e.return_url_ok),t.return_url_deny=window.decodeURIComponent(e.return_url_deny),/^https/.test(t.return_url_ok)||(window.location.href=t.mixin(t.return_url_deny,["reason=https"])),t.backend.getUser(t.for_id).then(function(e){t.requester=e,t.check.tick()},function(e){window.location.href=t.mixin(t.return_url_deny,["reason=api"])})})},Oauth.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},Oauth.prototype.mixin=function(t,e){var n=e.join("&");return t+(t.indexOf("?")>0)?"&":"?"+n},Oauth.prototype.finish=function(t){var e=this;t?this.backend.createOAuth(this.for_id,this.prefix,this.token).then(function(t){window.location.href=e.mixin(e.return_url_ok,["token="+t._id,"key_decryption="+localStorage.getItem("key_decryption")])},function(t){window.location.href=e.mixin(e.return_url_deny,["reason=api"])}):window.location.href=e.mixin(this.return_url_deny,["reason=deny"])},Oauth=r([a.Component({template:'\n        <div style="box-shadow: 0 0 10px 10px black; padding: 10px;">\n            <h2>{{ \'oauth.question\' | translate }}</h2>\n            <br />\n            <p>{{ \'oauth.explain\' | translate }}</p>\n            <br />\n            <p>{{ \'oauth.for_id\' | translate }}{{ for_id }}</p>\n            <br />\n            <p>{{ \'oauth.prefix\' | translate }}{{ prefix }}</p>\n            <br />\n\n            <button type="button" class="btn btn-warning" (click)="finish(true)">{{ \'oauth.ok\' | translate }}</button>\n            <button type="button" class="btn btn-primary" (click)="finish(false)">{{ \'oauth.nok\' | translate }}</button>\n            <br /><br />\n\n            <user-info [user]="requester"></user-info>\n        </div>\n    '}),o("design:paramtypes",[s.TranslateService,i.Router,c.NotificationsService,i.ActivatedRoute,l.Backend,a.ApplicationRef])],Oauth)}();e.Oauth=u},415:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(403),s=n(66),c=n(93),l=n(405),u=n(406);a.enableProdMode();var p=function(){function Resethelp(t,e,n,r,o,a){this.translate=t,this.router=e,this.notif=n,this.routed=r,this.backend=o,this.dataservice=a}return Resethelp.prototype.ngOnInit=function(){var t=this;this.sub=this.routed.params.subscribe(function(e){t.id=window.decodeURIComponent(e.id),t.data_name=window.decodeURIComponent(e.data_name),t.dataservice.listData().then(function(){t.dataservice.getVault(t.backend.profile.shared_with_me[t.id][t.data_name]).then(function(e,n){t.backend.mixRestore(t.id,n).then(function(){t.router.navigate(["/profile"])},function(){t.notif.error(t.translate.instant("error"),t.translate.instant("reset.noHelp"))})},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("reset.noHelp"))})},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("reset.noHelp"))})})},Resethelp.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},Resethelp=r([a.Component({template:"\n\n    "}),o("design:paramtypes",[s.TranslateService,i.Router,c.NotificationsService,i.ActivatedRoute,l.Backend,u.Data])],Resethelp)}();e.Resethelp=p},416:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(403),s=n(66),c=n(93),l=n(405),u=n(406);a.enableProdMode();var p=function(){function Account(t,e,n,r,o,a,i){this.translate=t,this.router=e,this.notif=n,this.routed=r,this.backend=o,this.dataservice=a,this.check=i,this.requester={},this.new_data={},this.new_datas={},this.new_name={},this.filter={}}return Account.prototype.ngOnInit=function(){var t=this;this.sub=this.routed.params.subscribe(function(e){t.ready=!1,t.id_to=window.decodeURIComponent(e.id_to),t.return_url_ok=window.decodeURIComponent(e.return_url_ok),t.return_url_deny=window.decodeURIComponent(e.return_url_deny),t.with_account=e.with_account,t.trigger=e.trigger?window.decodeURIComponent(e.trigger):"",t.expire_epoch=e.expire_epoch?new Date(parseInt(e.expire_epoch)):new Date(0),t.forever=parseInt(e.expire_epoch)<(new Date).getTime(),window.$("#pick3").datetimepicker(),window.$("#pick3").datetimepicker("date",window.moment(parseInt(e.expire_epoch))),/^http/.test(t.return_url_ok)||(window.location.href=t.return_url_deny);var n=t.return_url_ok.split("https://");3==n.length&&(t.return_url_ok="https://"+n[1]+window.encodeURIComponent("https://"+n[2])),t.dataservice.listData().then(function(){var n=!0;t.ready=!0,t.data_list=e.data_list&&"-"!=e.data_list?window.decodeURIComponent(e.data_list).split("//"):[];for(var r=0;r<t.data_list.length;r++)if(!(t.data_list[r]in t.backend.profile.data&&t.id_to in t.backend.profile.data[t.data_list[r]].shared_to||!(t.data_list[r]in t.backend.generics))){for(var o=t.backend.data_trie.suggestions(t.data_list[r]+"/","/").sort().filter(function(t){return"/"!=t.charAt(t.length-1)}),a=!1,i=0;i<o.length;i++)if(o[i]in t.backend.profile.data&&t.id_to in t.backend.profile.data[o[i]].shared_to){a=!0;break}if(!a){n=!1;break}}if(n&&("false"==t.with_account||"keys/auth/"+t.id_to in t.backend.profile.data&&t.id_to in t.backend.profile.data["keys/auth/"+t.id_to].shared_to))if("flow"==t.with_account){var s=t.return_url_ok.split("/");s.shift(),s.shift(),s.shift(),t.router.navigate(s)}else window.location.href=t.return_url_ok},function(){window.location.href=t.return_url_deny}),t.backend.getUser(t.id_to).then(function(e){t.requester=e,t.check.tick()},function(e){window.location.href=t.return_url_deny})})},Account.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},Account.prototype.finish=function(t){var e=this,n=[];if(t){if("false"!=this.with_account){var r=this.backend.generateRandomString(64);n.push({mode:"new",data:r,name:"keys/auth/"+this.id_to,is_dated:!1,force:!0}),n.push({mode:"grant",data:r,to:this.id_to,name:"keys/auth/"+this.id_to,real_name:"keys/auth/"+this.id_to,until:new Date(0)})}for(var o=0;o<this.data_list.length;o++){var a=this.data_list[o];if(a in this.backend.generics&&(!(a in this.filter)&&!(a in this.backend.profile.data)||a in this.filter&&"/new"==this.filter[a])){if(this.backend.generics[a].json_keys){for(var i={},o=0;o<this.backend.generics[a].json_keys.length;o++)i[this.backend.generics[a].json_keys[o]]=this.new_datas[a][this.backend.generics[a].json_keys[o]];this.new_data[a]=JSON.stringify(i)}this.backend.generics[a].is_dated&&(this.new_data[a]=JSON.stringify([{value:this.new_data[a],from:0}]));var s=a;this.backend.generics[a].is_folder&&(s+="/"+this.new_name[a]),n.push({mode:"new",data:this.new_data[a],name:s,is_dated:this.backend.generics[a].is_dated,force:!1}),n.push({mode:"grant",data:this.new_data[a],to:this.id_to,name:a,real_name:s,until:this.expire_epoch,trigger:this.trigger})}else if(a in this.backend.generics){var s=a;this.backend.generics[a].is_folder&&(s+="/"+this.filter[a]),n.push({mode:"get-and-grant",to:this.id_to,name:a,real_name:s,until:this.expire_epoch,trigger:this.trigger})}}this.process(n).then(function(){if("flow"==e.with_account){var t=e.return_url_ok.split("/");t.shift(),t.shift(),t.shift(),e.router.navigate(t)}else window.location.href=e.return_url_ok},function(t){e.notif.error(e.translate.instant("error"),e.translate.instant("account.err")),window.setTimeout(function(){window.location.href=e.return_url_deny},1500)})}else window.location.href=e.return_url_deny},Account.prototype.process=function(t){var e=this,n=0;return new Promise(function(r,o){function next(){if(n<t.length){var a=t[n];switch(n++,a.mode){case"new":e.dataservice.newData(a.name,a.data,a.is_dated,a.force).then(function(){next()},function(t){o(t)});break;case"grant":e.dataservice.grantVault(a.to,a.name,a.real_name,a.data,a.until,a.trigger).then(function(){next()},function(t){o(t)});break;case"get-and-grant":e.backend.getData(e.backend.profile.data[a.real_name].id).then(function(n){e.backend.decryptAES(e.backend.str2arr(n.encr_data),e.dataservice.workerMgt(!1,function(e){t.push({mode:"grant",data:e,to:a.to,name:a.name,real_name:a.real_name,until:a.until,trigger:a.trigger}),next()}))},function(t){o(t)})}}else r()}next()})},Account.prototype.fileLoad=function(t,e){var n=this,r=t.target.files[0],o=new FileReader;o.onloadend=function(t){/^data:;base64,/.test(o.result)?n.new_data[e]=atob(o.result.split(",")[1]):n.new_data[e]=o.result},o.readAsDataURL(r)},Account.prototype.filters=function(t){var e=this.backend.data_trie.suggestions(t+"/","/").sort().filter(function(t){return"/"!=t.charAt(t.length-1)}).map(function(t){return t.replace(/.+\//,"")}).concat(["/new"]);return this.new_datas[t]||this.filter[t]||(this.new_datas[t]={},this.filter[t]=e[0]),e},Account=r([a.Component({template:'\n        <div style="box-shadow: 0 0 10px 10px black; padding: 10px;">\n            <h2>{{ \'account.question\' | translate }}</h2>\n            <br />\n            <p>{{ \'account.explain\' | translate }}</p>\n            <br />\n            <p>{{ \'account.id_to\' | translate }}{{ id_to }}</p>\n            <br />\n            <p *ngIf="with_account != \'false\'">{{ \'account.withAccount\' | translate }}</p>\n            <br />\n            <div *ngIf="!forever">\n                {{ \'account.until\' | translate }}\n                <div class=\'input-group date\' id=\'pick3\'>\n                    <input type=\'text\' class="form-control" readonly="readonly" />\n                    <span class="input-group-addon">\n                        <span class="glyphicon glyphicon-calendar"></span>\n                    </span>\n                </div>\n            </div>\n            <p *ngIf="forever">{{ \'account.forever\' | translate }}</p>\n            <br />\n\n            <div *ngFor="let p of data_list">\n                <h3>\n                    {{ \'account.prefix\' | translate }}{{ p }}\n                    <img *ngIf="!!backend.generics[p] && !!backend.generics[p].img_url" class="featurette-image img-circle img-responsive pull-right" src="{{ backend.generics[p].img_url }}">\n                    <img *ngIf="!backend.generics[p] || !backend.generics[p].img_url" class="featurette-image img-circle img-responsive pull-right" src="favicon.png">\n                </h3>\n                \n                <p *ngIf="!backend.generics[p]"><i>{{ \'account.notShared\' | translate }}</i></p>\n                <div *ngIf="!!backend.generics[p] && !backend.generics[p].is_folder">\n                    <p *ngIf="!!backend.profile.data[p]">{{ \'account.shared\' | translate }}</p>\n                    <input *ngIf="!backend.profile.data[p] && !backend.generics[p].is_file" type="text" [(ngModel)]="new_data[p]" class="form-control">\n                    <input *ngIf="!backend.profile.data[p] && backend.generics[p].is_file" type="file" (change)="fileLoad($event, p)" class="form-control">\n                </div>\n                <div *ngIf="!!backend.generics[p] && backend.generics[p].is_folder">\n                    <select class="form-control" [(ngModel)]="filter[p]">\n                        <option *ngFor="let f of filters(p)" [value]="f"><span *ngIf="f != \'/new\'">{{ f }}</span><span *ngIf="f == \'/new\'">{{ \'account.new\' | translate }}</span></option>\n                    </select>\n                    <div *ngIf="filter[p] == \'/new\'">\n                        {{ \'account.nameField\' | translate }}\n                        <input type="text" [(ngModel)]="new_name[p]" name="s18" class="form-control">\n                        {{ \'account.dataField\' | translate }}\n                        <input type="text" *ngIf="!backend.generics[p].is_file && !backend.generics[p].json_keys" [(ngModel)]="new_data[p]" name="s1" class="form-control">\n                        <div *ngIf="!backend.generics[p].is_file && !!backend.generics[p].json_keys">\n                            <div class="form-group" *ngFor="let k of backend.generics[p].json_keys">\n                                {{ k | translate }}<br />\n                                <input type="text" [(ngModel)]="new_datas[p][k]" name="s1" class="form-control">\n                            </div>\n                        </div>\n                        <input type="file" *ngIf="backend.generics[p].is_file" (change)="fileLoad($event, p)" name="n50" class="form-control">\n                    </div>\n                </div>\n            </div>\n            <br />\n\n            <button type="button" class="btn btn-warning" (click)="finish(true)" [disabled]="!ready">{{ \'account.ok\' | translate }}</button>\n            <button type="button" class="btn btn-primary" (click)="finish(false)" [disabled]="!ready">{{ \'account.nok\' | translate }}</button>\n            <br /><br />\n\n            <user-info [user]="requester"></user-info>\n        </div>\n    '}),o("design:paramtypes",[s.TranslateService,i.Router,c.NotificationsService,i.ActivatedRoute,l.Backend,u.Data,a.ApplicationRef])],Account);
}();e.Account=p},417:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(403),s=n(66),c=n(93),l=n(406),u=n(405);a.enableProdMode();var p=function(){function Remote(t,e,n,r,o,a){this.translate=t,this.router=e,this.notif=n,this.routed=r,this.dataservice=o,this.backend=a}return Remote.prototype.ngOnInit=function(){var t=this;this.sub=this.routed.params.subscribe(function(e){t.id_to=window.decodeURIComponent(e.id_to),t.challenge=e.challenge,t.return_url=window.decodeURIComponent(e.return_url),/^https/.test(t.return_url)||(window.location.href=t.mixin(t.return_url,["response=null","user="+t.backend.profile._id])),t.dataservice.listData().then(function(){t.backend.profile.data["keys/auth/"+t.id_to]?t.backend.getData(t.backend.profile.data["keys/auth/"+t.id_to].id).then(function(e){t.backend.decryptAES(t.backend.str2arr(e.encr_data),t.dataservice.workerMgt(!1,function(e){t.backend.encryptAES(t.challenge,t.dataservice.workerMgt(!0,function(e){window.location.href=t.mixin(t.return_url,["response="+btoa(t.backend.arr2str(e)),"user="+t.backend.profile._id])}),t.backend.toBytes(e))}))},function(e){window.location.href=t.mixin(t.return_url,["response=null","user="+t.backend.profile._id])}):window.location.href=t.mixin(t.return_url,["response=null","user="+t.backend.profile._id])},function(e){window.location.href=t.mixin(t.return_url,["response=null","user="+t.backend.profile._id])})})},Remote.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},Remote.prototype.mixin=function(t,e){var n=e.join("&");return t+(t.indexOf("?")>0?"&":"?")+n},Remote=r([a.Component({template:"\n\n    "}),o("design:paramtypes",[s.TranslateService,i.Router,c.NotificationsService,i.ActivatedRoute,l.Data,u.Backend])],Remote)}();e.Remote=p},418:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(403),s=n(66),c=n(93),l=n(405),u=n(406);a.enableProdMode();var p=function(){function Generics(t,e,n,r,o,a){this.translate=t,this.backend=e,this.router=n,this.notif=r,this.dataservice=o,this.check=a,this.filter="generics.any",this.new_name="",this.new_datas={}}return Generics.prototype.register=function(t,e,n){var r,o=this;if(n=n?"/"+n.replace("/",":"):"",this.backend.generics[t].regexp){var a=new RegExp(this.backend.generics[t].regexp);if(!a.test(this.new_data))return void o.notif.error(o.translate.instant("error"),o.translate.instant("generics.regexp"))}if(this.backend.generics[t].json_keys){for(var i={},s=0;s<this.backend.generics[t].json_keys.length;s++)i[this.backend.generics[t].json_keys[s]]=this.new_datas[this.backend.generics[t].json_keys[s]];this.new_data=JSON.stringify(i)}r=this.backend.generics[t].is_dated?JSON.stringify([{value:e?this.new_data_file:this.new_data,from:(new Date).getTime()}]):e?this.new_data_file:this.new_data,this.dataservice.newData(t+n,r,this.backend.generics[t].is_dated).then(function(){o.new_name="",o.new_data="",o.new_data_file="",o.new_datas={},o.check.tick()},function(t){"server"==t?o.notif.error(o.translate.instant("error"),o.translate.instant("server")):o.notif.error(o.translate.instant("error"),o.translate.instant("filesystem.exists"))})},Generics.prototype.dataNames=function(t){return this.backend.data_trie.suggestions(t+"/","/").sort().filter(function(t){return"/"!=t.charAt(t.length-1)}).map(function(t){return t.replace(/.+\//,"")})},Generics.prototype.select=function(t){this.router.navigate(["/data",window.encodeURIComponent(t)])},Generics.prototype.filters=function(){var t=["generics.any"];for(var e in this.backend.generics)t.indexOf(this.backend.generics[e].module)<0&&t.push(this.backend.generics[e].module);return t},Generics.prototype.generics=function(){var t=this;return"generics.any"==this.filter?Object.getOwnPropertyNames(this.backend.generics):Object.getOwnPropertyNames(this.backend.generics).filter(function(e){return t.backend.generics[e].module==t.filter})},Generics.prototype.fileLoad=function(t){var e=this,n=t.target.files[0],r=new FileReader;r.onloadend=function(t){/^data:;base64,/.test(r.result)?e.new_data_file=atob(r.result.split(",")[1]):e.new_data_file=r.result},r.readAsDataURL(n)},Generics=r([a.Component({template:'\n        <h2>{{ \'generics.title\' | translate }}</h2>\n        <button type="button" class="btn btn-primary" (click)="router.navigate([\'/profile\'])">{{ \'back\' | translate }}</button>\n        <br />\n\n        <select class="form-control" [(ngModel)]="filter">\n            <option *ngFor="let f of filters()" [value]="f">{{ f | translate }}</option>\n        </select>\n        <br />\n\n        <div class="table-responsive" *ngFor="let g of generics()">\n            <table class="table table-hover">\n                <thead>\n                    <tr>\n                        <th></th>\n                        <th>{{ \'generics.descr\' | translate }}</th>\n                        <th>{{ \'filesystem.data_name\' | translate }}</th>\n                        <th>{{ \'filesystem.data\' | translate }}</th>\n                        <th>{{ \'action\' | translate }}</th>\n                    </tr>\n                </thead>\n                <tbody *ngIf="!backend.generics[g].is_folder">\n                    <tr>\n                        <td *ngIf="!!backend.generics[g].img_url"><img src="{{ backend.generics[g].img_url }}" /></td>\n                        <td *ngIf="!backend.generics[g].img_url"><img src="favicon.png" /></td>\n                        <td>{{ backend.generics[g].descr_key | translate }}</td>\n                        <td>{{ g }}</td>\n\n                        <td *ngIf="!!backend.profile.data[g]">\n                            <i>{{ \'filesystem.mix\' | translate }}</i>\n                        </td>\n                        <td *ngIf="!backend.profile.data[g] && !backend.generics[g].is_file">\n                            <input type="text" [(ngModel)]="new_data" name="s1" class="form-control">\n                        </td>\n                        <td *ngIf="!backend.profile.data[g] && backend.generics[g].is_file">\n                            <input type="file" (change)="fileLoad($event)" name="n50" class="form-control">\n                        </td>\n\n                        <td *ngIf="!!backend.profile.data[g]">\n                            <button type="button" class="btn btn-default" (click)="select(g)">{{ \'filesystem.goTo\' | translate }}</button>\n                        </td>\n                        <td *ngIf="!backend.profile.data[g] && !backend.generics[g].is_file">\n                            <button type="button" class="btn btn-default" (click)="register(g, false)">{{ \'filesystem.record\' | translate }}</button>\n                        </td>\n                        <td *ngIf="!backend.profile.data[g] && backend.generics[g].is_file">\n                            <button type="button" class="btn btn-default" (click)="register(g, true)" [disabled]="new_data_file==\'\'">{{ \'filesystem.record\' | translate }}</button>\n                        </td>\n                    </tr>\n                </tbody>\n                <tbody *ngIf="backend.generics[g].is_folder">\n                    <tr *ngFor="let d of dataNames(g)">\n                        <td *ngIf="!!backend.generics[g].img_url"><img src="{{ backend.generics[g].img_url }}" /></td>\n                        <td *ngIf="!backend.generics[g].img_url"><img src="favicon.png" /></td>\n                        <td>{{ backend.generics[g].descr_key | translate }}</td>\n                        <td>{{ g }}/{{ d }}</td>\n\n                        <td><i>{{ \'filesystem.mix\' | translate }}</i></td>\n\n                        <td><button type="button" class="btn btn-default" (click)="select(g + \'/\' + d)">{{ \'filesystem.goTo\' | translate }}</button></td>\n                    </tr>\n                    <tr>\n                        <td *ngIf="!!backend.generics[g].img_url"><img src="{{ backend.generics[g].img_url }}" /></td>\n                        <td *ngIf="!backend.generics[g].img_url"><img src="favicon.png" /></td>\n                        <td>{{ backend.generics[g].descr_key | translate }}</td>\n                        <td>{{ g }}/<input type="text" [(ngModel)]="new_name" name="s1" class="form-control"></td>\n\n                        <td *ngIf="!backend.generics[g].is_file && !backend.generics[g].json_keys">\n                            <input type="text" [(ngModel)]="new_data" name="s1" class="form-control">\n                        </td>\n                        <td *ngIf="!backend.generics[g].is_file && !!backend.generics[g].json_keys">\n                            <div class="form-group" *ngFor="let k of backend.generics[g].json_keys">\n                                {{ k | translate }}<br />\n                                <input type="text" [(ngModel)]="new_datas[k]" name="s1" class="form-control">\n                            </div>\n                        </td>\n                        <td *ngIf="backend.generics[g].is_file">\n                            <input type="file" (change)="fileLoad($event)" name="n50" class="form-control">\n                        </td>\n\n                        <td *ngIf="!backend.generics[g].is_file">\n                            <button type="button" class="btn btn-default" (click)="register(g, false, new_name)"\n                                [disabled]="!!backend.generics[g].is_folder && new_name == \'\'">{{ \'filesystem.record\' | translate }}</button>\n                        </td>\n                        <td *ngIf="backend.generics[g].is_file">\n                            <button type="button" class="btn btn-default" (click)="register(g, true, new_name)"\n                                [disabled]="new_data_file==\'\' || (!!backend.generics[g].is_folder && new_name == \'\')">{{ \'filesystem.record\' | translate }}</button>\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    '}),o("design:paramtypes",[s.TranslateService,l.Backend,i.Router,c.NotificationsService,u.Data,a.ApplicationRef])],Generics)}();e.Generics=p},419:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(403),s=n(66),c=n(93),l=n(405),u=n(406);a.enableProdMode();var p=function(){function Logginglight(t,e,n,r,o){this.translate=t,this.backend=e,this.router=n,this.notif=r,this.dataservice=o,this.onEnd=!0,this.persistent=!1,this.use_pwd=!0}return Logginglight.prototype.ngOnInit=function(t){var e=this;this.onEnd&&/end/.test(window.location.href)&&(this.onEnd=!1,localStorage.removeItem("token"),localStorage.removeItem("key_decryption"),localStorage.removeItem("psha"),window.setTimeout(function(){e.notif.alert(e.translate.instant("error"),e.translate.instant("sessionExpired"))},1500)),"token"in localStorage&&this.backend.getProfile().then(function(n){if(e.backend.profile=n,t&&(localStorage.setItem("key_decryption",window.sha256(e.password+n.salt)),localStorage.setItem("psha",window.sha256(e.password))),sessionStorage.getItem("return_url")&&sessionStorage.getItem("return_url").length>1){var r=sessionStorage.getItem("return_url");r=JSON.parse(r),sessionStorage.removeItem("return_url"),e.router.navigate(r)}else sessionStorage.removeItem("return_url"),e.router.navigate(["/profile"])},function(t){localStorage.removeItem("token")})},Logginglight.prototype.enter=function(){var t=this;this.backend.createToken(this.username,this.password,this.persistent).then(function(e){localStorage.setItem("token",e._id),t.ngOnInit(!0)},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("login.noLogin"))})},Logginglight.prototype.fileLoad=function(t){var e=this,n=t.target.files[0],r=new FileReader;r.onloadend=function(t){/^data:;base64,/.test(r.result)?e.password=atob(r.result.split(",")[1]):e.password=r.result},r.readAsText(n)},Logginglight=r([a.Component({template:'\n        <div style="box-shadow: 0 0 10px 10px black; padding: 10px;">\n            <form class="form-signin">\n                <div class="form-group">\n                    {{ \'login.username\' | translate }}<br />\n                    <input type="text" [(ngModel)]="username" name="n0" class="form-control" required>\n                </div>\n                <div class="checkbox">\n                    <label><input type="checkbox" name="n90" [(ngModel)]="use_pwd" checked> {{ \'login.use_pwd\' | translate }}</label>\n                </div>\n                <div class="form-group">\n                    {{ \'login.password\' | translate }}<br />\n                    <input type="password" [(ngModel)]="password" name="n1" class="form-control" [disabled]="!use_pwd" required>\n                </div>\n                <div class="form-group">\n                    {{ \'login.password_file\' | translate }}<br />\n                    <input type="file" (change)="fileLoad($event)" name="n50" class="form-control" [disabled]="use_pwd" required>\n                </div>\n                <div class="form-group">\n                    <div class="checkbox">\n                        <label><input type="checkbox" name="n2" [(ngModel)]="persistent"> {{ \'login.remember\' | translate }}</label>\n                    </div>\n                    <button type="submit" class="btn btn-primary" (click)="enter()">{{ \'login.goOn\' | translate }}</button>\n                </div>\n            </form>\n        </div>\n    '}),o("design:paramtypes",[s.TranslateService,l.Backend,i.Router,c.NotificationsService,u.Data])],Logginglight)}();e.Logginglight=p},420:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(403),s=n(66),c=n(93),l=n(405);a.enableProdMode();var u=function(){function User(t,e,n,r,o){this.translate=t,this.router=e,this.backend=n,this.notif=r,this.routed=o,this.user={}}return User.prototype.ngOnInit=function(){var t=this;this.sub=this.routed.params.subscribe(function(e){t.id=window.decodeURIComponent(e.id),t.ret=e.ret?JSON.parse(window.decodeURIComponent(e.ret)):["/profile"],t.backend.getUser(t.id).then(function(e){t.user=e},function(e){t.back()})})},User.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},User.prototype.back=function(){this.router.navigate(this.ret)},User=r([a.Component({template:'\n        <h2>{{ \'userinfo.title\' | translate }}</h2>\n        <button type="button" class="btn btn-primary" (click)="back()">{{ \'back\' | translate }}</button>\n        <br />\n\n        <user-info [user]="user"></user-info>\n    '}),o("design:paramtypes",[s.TranslateService,i.Router,l.Backend,c.NotificationsService,i.ActivatedRoute])],User)}();e.User=u},421:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(66);a.enableProdMode();var s=function(){function Notfound(t){this.translate=t}return Notfound=r([a.Component({template:"\n        <h2>{{ 'error.notfound' | translate }}</h2>\n    "}),o("design:paramtypes",[i.TranslateService])],Notfound)}();e.Notfound=s},422:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(403),s=n(66),c=n(405),l=function(){function Profileguard(t,e,n){this.backend=t,this.router=e,this.translate=n}return Profileguard.prototype.canActivate=function(t,e){return!!(localStorage.getItem("token")&&localStorage.getItem("key_decryption")&&this.backend.profile)||("return_url"in sessionStorage||sessionStorage.setItem("return_url",JSON.stringify(e.url.split("/").map(window.decodeURIComponent))),this.router.navigate(["/llight"]),!1)},Profileguard.prototype.canDeactivate=function(t,e,n){return!(t.data_name&&0!=t.data_name.length||t.data_value&&0!=t.data_value.length)||t.dialog(this.translate.instant("confirmation"))},Profileguard=r([a.Injectable(),o("design:paramtypes",[c.Backend,i.Router,s.TranslateService])],Profileguard)}();e.Profileguard=l;var u=function(){function Fullguard(t,e,n){this.backend=t,this.router=e,this.translate=n}return Fullguard.prototype.canActivate=function(t,e){return!!(localStorage.getItem("token")&&localStorage.getItem("key_decryption")&&this.backend.profile&&this.backend.data_loaded)||("return_url"in sessionStorage||sessionStorage.setItem("return_url",JSON.stringify(e.url.split("/").map(window.decodeURIComponent))),this.router.navigate(["/profile"]),!1)},Fullguard.prototype.canDeactivate=function(t,e,n){return!(t.new_data&&0!=t.new_data.length||t.new_id&&0!=t.new_id.length)||t.dialog(this.translate.instant("confirmation"))},Fullguard=r([a.Injectable(),o("design:paramtypes",[c.Backend,i.Router,s.TranslateService])],Fullguard)}();e.Fullguard=u},423:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(66);a.enableProdMode();var s=function(){function Application(t){if(this.translate=t,this.options={timeOut:4e3,lastOnBottom:!0,clickToClose:!0,maxLength:0,maxStack:4,showProgressBar:!0,pauseOnHover:!0,preventDuplicates:!1,preventLastDuplicates:"visible",rtl:!1,animate:"scale",position:["right","bottom"]},t.addLangs(["en","fr"]),t.setDefaultLang("en"),"lang"in sessionStorage)t.use(sessionStorage.getItem("lang"));else{var e=t.getBrowserLang();t.use(e.match(/en|fr/)?e:"en")}}return Application.prototype.setLang=function(t){sessionStorage.setItem("lang",t),this.translate.use(t)},Application=r([a.Component({selector:"my-app",template:'\n        <div class="row bottom-border">\n            <div class="col-sm-offset-1 col-sm-10">\n                <router-outlet></router-outlet>\n            </div>\n        </div>\n        <br />\n        <br />\n        <div class="row bottom-border">\n            <div class="col-sm-offset-1 col-sm-10">\n                <div class="btn-toolbar" role="toolbar" aria-label="">\n                    <div class="btn-group" role="group" aria-label="">\n                        <button type="button" class="btn btn-small" (click)="setLang(\'en\')">English</button>\n                        <button type="button" class="btn btn-small" (click)="setLang(\'fr\')">Franais</button>\n                    </div>\n                </div>\n            </div>\n        </div>\n        <simple-notifications [options]="options"></simple-notifications>\n    '}),o("design:paramtypes",[i.TranslateService])],Application)}();e.Application=s},424:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(66),s=n(93),c=n(405),l=n(406);a.enableProdMode();var u=function(){function Userinfo(t,e,n,r,o){this.translate=t,this.notif=e,this.backend=n,this.dataservice=r,this.check=o}return Userinfo.prototype.modify=function(){var t=this;this.backend.goCompany(t.backend.profile.company_info).then(function(){t.backend.profile.is_company=1,t.notif.success(t.translate.instant("success"),t.translate.instant("userinfo.changed")),t.check.tick()},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("userinfo.notChanged")),t.check.tick()})},Userinfo.prototype.load=function(){var t=this;this.backend.profile.data["profile/last_name"]&&this.backend.profile.data["profile/first_name"]?this.backend.getData(this.backend.profile.data["profile/last_name"].id).then(function(e){var n=t.backend.str2arr(e.encr_data);t.backend.decryptAES(n,t.dataservice.workerMgt(!1,function(e){t.backend.getData(t.backend.profile.data["profile/last_name"].id).then(function(n){var r=t.backend.str2arr(n.encr_data);t.backend.decryptAES(r,t.dataservice.workerMgt(!1,function(n){t.backend.profile.company_info.name=n+" "+e,t.modify()}))},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("dataview.noData"))})}))},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("dataview.noData"))}):t.notif.error(t.translate.instant("error"),t.translate.instant("dataview.noData"))},Userinfo.prototype.getAddr=function(){if(this.user.company_info&&this.user.company_info.address){var t=JSON.parse(this.user.company_info.address);return t["generics.street"]+" "+t["generics.num"]+", "+t["generics.postcode"]+" "+t["generics.city"]}return""},Userinfo.prototype.goCompany=function(){window.location.href="https://"+this.backend.profile._id+":"+localStorage.getItem("psha")+"@"+this.backend.EID_HOST},Userinfo.prototype.goBCE=function(){var t=this;this.backend.goBCE(this.bce).then(function(){t.notif.success(t.translate.instant("success"),t.translate.instant("userinfo.changed"))},function(e){t.notif.error(t.translate.instant("error"),t.translate.instant("userinfo.notChanged"))})},r([a.Input(),o("design:type",Object)],Userinfo.prototype,"user"),Userinfo=r([a.Component({selector:"user-info",template:'\n        <h2>{{ \'userinfo.title\' | translate }}</h2>\n        <h3>{{ \'userinfo.trustLevel\' | translate }}{{ user.is_company }}</h3>\n        <h3>{{ \'userinfo.public\' | translate }}</h3>\n        <p *ngIf="!!user.company_info && !!user.company_info.name">{{ \'userinfo.name\' | translate }}{{ user.company_info.name }}</p>\n        <p *ngIf="!!user.company_info && !!user.company_info.bce">{{ \'userinfo.bce\' | translate }}{{ user.company_info.bce }}</p>\n        <p *ngIf="!!user.company_info && !!user.company_info.rrn">{{ \'generics.rrn\' | translate }}: {{ user.company_info.rrn }}</p>\n        <p *ngIf="!!user.company_info && getAddr() != \'\'">{{ \'userinfo.addr\' | translate }}: {{ getAddr() }}</p>\n\n        <div *ngIf="user._id == backend.profile._id">\n            <form class="form-signin">\n                <div class="heading">\n                    <h3 class="form-signin-heading">{{ \'userinfo.set\' | translate }}</h3>\n                </div>\n                <div class="form-group">\n                    {{ \'userinfo.name\' | translate }}<br />\n                    <input type="text" [(ngModel)]="backend.profile.company_info.name" name="n1" class="form-control">\n                </div>\n                <div class="form-group">\n                    {{ \'userinfo.bce\' | translate }}<br />\n                    <input type="text" [(ngModel)]="bce" name="n2" class="form-control">\n                </div>\n                <div class="form-group">\n                    <button type="submit" class="btn btn-primary" (click)="modify()">{{ \'userinfo.modify\' | translate }}</button>\n                    <button type="submit" class="btn btn-default" (click)="load()">{{ \'userinfo.load\' | translate }}</button>\n                    <button type="button" class="btn btn-primary" (click)="goCompany()">{{ \'userinfo.goCompany\' | translate }}</button>\n                    <button type="button" class="btn btn-default" [disabled]="user.is_company != 9" (click)="goBCE()">{{ \'userinfo.goBCE\' | translate }}</button>\n                </div>\n            </form>\n        </div>\n    '}),o("design:paramtypes",[i.TranslateService,s.NotificationsService,c.Backend,l.Data,a.ApplicationRef])],Userinfo)}();e.Userinfo=u},425:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(66),s=n(93),c=n(405);a.enableProdMode();var l=function(){function Clearview(t,e,n){this.translate=t,this.notif=e,this.backend=n,this.values=void 0,this.notify=new a.EventEmitter,new window.Clipboard(".btn-copier")}return Clearview.prototype.computeValues=function(){if(!this.values){this.values=JSON.parse(this.decr_data);for(var t=0;t<this.values.length;t++)window.$("#pick-id"+this.values[t]).datetimepicker(),window.$("#pick-id"+this.values[t]).datetimepicker("date",window.moment(this.values[t].from)),this.values[t].from=new Date(this.values[t].from);0==this.values.length&&(this.values=void 0)}return this.values},Clearview.prototype.rem=function(t){this.values.splice(t,1),this.notify.emit(JSON.stringify(this.values.map(function(t){return t.from=t.from.getTime(),t})))},Clearview.prototype.recover=function(t,e){var n=JSON.parse(e);return n[t]},Clearview.prototype.dl=function(t){var e=this.data_name.split("/");window.download(t,e[e.length-1])},r([a.Input(),o("design:type",String)],Clearview.prototype,"data_name"),r([a.Input(),o("design:type",String)],Clearview.prototype,"decr_data"),r([a.Input(),o("design:type",Boolean)],Clearview.prototype,"is_dated"),r([a.Input(),o("design:type",Boolean)],Clearview.prototype,"change"),r([a.Input(),o("design:type",Boolean)],Clearview.prototype,"is_folder"),r([a.Input(),o("design:type",Boolean)],Clearview.prototype,"is_generic"),r([a.Input(),o("design:type",String)],Clearview.prototype,"gen_name"),r([a.Output(),o("design:type",a.EventEmitter)],Clearview.prototype,"notify"),Clearview=r([a.Component({selector:"clear-view",template:'\n        <h3 *ngIf="is_generic">{{ backend.generics[gen_name].descr_key | translate }}</h3><br />\n        <div *ngIf="!is_dated">\n            <p>{{ \'actual\' | translate }}</p>\n            <div *ngIf="!is_folder">\n                <input id="decrypted" *ngIf="decr_data.length < 150" type="text" [ngModel]="decr_data" class="form-control" readonly>\n                <input id="decrypted" *ngIf="decr_data.length >= 150" type="text" value="{{ \'dataview.tooLong\' | translate }}" class="form-control" readonly>\n            </div>\n            <div *ngIf="is_folder">\n                <div class="form-group" *ngFor="let k of backend.generics[gen_name].json_keys">\n                    {{ k | translate }}<br />\n                    <input type="text" [ngModel]="recover(k, decr_data)" name="s1" class="form-control" readonly>\n                </div>\n            </div>\n\n            <button type="button" class="btn btn-primary" [disabled]="decr_data==\'\'" (click)="dl(decr_data)">{{ \'download\' | translate }}</button>\n            <button type="button" *ngIf="!is_folder && decr_data.length < 150" class="btn btn-primary btn-copier" data-clipboard-target="#decrypted">{{ \'copy\' | translate }}</button>\n            <br />\n        </div>\n        <div *ngIf="is_dated">\n            <div *ngFor="let p of computeValues(); let i = index">\n                <div>{{ \'actualFrom\' | translate }}\n                    <div class=\'input-group date\' id=\'pick-id{{ p }}\'>\n                        <input type=\'text\' class="form-control" readonly="readonly"/>\n                        <span class="input-group-addon">\n                            <span class="glyphicon glyphicon-calendar"></span>\n                        </span>\n                    </div>\n                </div>\n                <div *ngIf="!is_folder">\n                    <input *ngIf="p.value.length < 150" type="text" [ngModel]="p.value" class="form-control" readonly>\n                    <input *ngIf="p.value.length >= 150" type="text" value="{{ \'dataview.tooLong\' | translate }}" class="form-control" readonly>\n                </div>\n                <div *ngIf="is_folder">\n                    <div class="form-group" *ngFor="let k of backend.generics[gen_name].json_keys">\n                        {{ k | translate }}<br />\n                        <input type="text" [ngModel]="recover(k, p.value)" name="s1" class="form-control" readonly>\n                    </div>\n                </div>\n\n                <button type="button" class="btn btn-primary" (click)="dl(p.value)">{{ \'download\' | translate }}</button>\n                <button *ngIf="change" type="button" class="btn btn-warning" (click)="rem(i)" [disabled]="computeValues().length < 2">{{ \'remove\' | translate }}</button>\n            </div>\n        </div>\n    '}),o("design:paramtypes",[i.TranslateService,s.NotificationsService,c.Backend])],Clearview)}();e.Clearview=l},426:function(t,e,n){"use strict";var r=this&&this.__decorate||function(t,e,n,r){var o,a=arguments.length,i=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,n,r);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(i=(a<3?o(i):a>3?o(e,n,i):o(e,n))||i);return a>3&&i&&Object.defineProperty(e,n,i),i},o=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=n(3),i=n(66),s=n(93),c=n(405),l=n(406);a.enableProdMode();var u=function(){function Merge(t,e,n,r,o){this.translate=t,this.notif=e,this.backend=n,this.dataservice=r,this.check=o,
this.erase=!1}return Merge.prototype.merge=function(){var t,e,n=this,r=localStorage.getItem("token"),o=localStorage.getItem("key_decryption");this.backend.decryptMaster();var a=this.backend.master_key,i=this.backend.profile._id;this.backend.forceReload(),this.backend.profile._id==this.login&&(this.login="",this.password=""),this.backend.createToken(this.login,this.password,!1).then(function(s){t=s._id,localStorage.setItem("token",t),n.backend.getProfile().then(function(t){n.backend.profile=t,e=window.sha256(n.password+t.salt),localStorage.setItem("key_decryption",e),n.backend.listData().then(function(t){function next(){if(s<e.length){var c=e[s];switch(s++,c.mode){case"get":n.backend.getData(t.data[c.name].id).then(function(t){var r=n.backend.str2arr(t.encr_data);n.backend.decryptAES(r,n.dataservice.workerMgt(!1,function(t){c.mode="getVault",c.decr_data=t,e.push(c),next()}))},function(t){n.notif.error(n.translate.instant("error"),n.translate.instant("merge.noMerge")),n.reloadProfile(r,o)});break;case"getVault":if(c.shared_to.length>c.index){var l=Object.getOwnPropertyNames(c.shared_to)[c.index];n.backend.getAccessVault(c.shared_to[l]).then(function(t){c.shared_to[s]={ee:new Date(t.expire_epoch),trigger:t.trigger},c.index++,e.push(c),next()},function(t){n.notif.error(n.translate.instant("error"),n.translate.instant("merge.noMerge")),n.reloadProfile(r,o)})}else c.mode="new",e.push(c),next();break;case"new":n.dataservice.newData(c.name,c.decr_data,c.is_dated,n.erase).then(function(){c.mode="giveVault",c.index=0,e.push(c),next()},function(t){"exists"==t?(c.mode="giveVault",c.index=0,e.push(c),next()):(n.notif.error(n.translate.instant("error"),n.translate.instant("merge.noMerge")),n.reloadProfile(r,o))});break;case"giveVault":if(c.shared_to.length>c.index){var l=Object.getOwnPropertyNames(c.shared_to)[c.index];n.dataservice.grantVault(l,c.is_folder?c.name.replace(/\/[^\/]*$/,""):c.name,c.name,c.decr_data,c.shared_to[l].ee,c.shared_to[l].trigger).then(function(){c.index++,e.push(c),next()},function(t){n.notif.error(n.translate.instant("error"),n.translate.instant("merge.noMerge")),n.reloadProfile(r,o)})}else next()}}else n.backend.closeTo(i,a).then(function(){n.notif.success(n.translate.instant("success"),n.translate.instant("merge.merged")),n.login="",n.password="",n.reloadProfile(r,o)},function(t){n.notif.error(n.translate.instant("error"),n.translate.instant("merge.noMerge")),n.reloadProfile(r,o)})}for(var e=[],s=0,c=Object.getOwnPropertyNames(t.data),l=0;l<c.length;l++)0!=c[l].indexOf("keys/pwd/")&&e.push({mode:"get",name:c[l],index:0,is_dated:t.data[c[l]].is_dated,shared_to:t.data[c[l]].shared_to,is_folder:!!n.backend.generics[c[l].replace(/\/[^\/]*$/,"")]&&n.backend.generics[c[l].replace(/\/[^\/]*$/,"")].is_folder});next()})})})},Merge.prototype.reloadProfile=function(t,e){var n=this;localStorage.setItem("token",t),localStorage.setItem("key_decryption",e),this.backend.forceReload(),this.check.tick(),this.backend.getProfile().then(function(t){n.backend.profile=t,n.check.tick(),n.dataservice.listData()},function(t){delete n.backend.profile,n.notif.success(n.translate.instant("success"),n.translate.instant("merge.relog"))})},Merge=r([a.Component({selector:"merge-account",template:'\n        <form class="form-signin">\n            <div class="heading">\n                <h3 class="form-signin-heading">{{ \'merge.title\' | translate }}</h3>\n                <p>{{ \'merge.explain\' | translate }}</p>\n            </div>\n            <div class="form-group">\n                {{ \'merge.login\' | translate }}<br />\n                <input type="text" [(ngModel)]="login" name="y1" class="form-control">\n            </div>\n            <div class="form-group">\n                {{ \'merge.pass\' | translate }}<br />\n                <input type="password" [(ngModel)]="password" name="y0" class="form-control">\n            </div>\n            <div class="form-group">\n                <div class="checkbox">\n                    <label><input type="checkbox" [(ngModel)]="erase" name="y2"> {{ \'merge.erase\' | translate }}</label>\n                </div>\n                <button type="submit" class="btn btn-danger" (click)="merge()">{{ \'merge.merge\' | translate }}</button>\n            </div>\n        </form>\n    '}),o("design:paramtypes",[i.TranslateService,s.NotificationsService,c.Backend,l.Data,a.ApplicationRef])],Merge)}();e.Merge=u}});
//# sourceMappingURL=app.js.map